<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>H5C3基础大全二（实战）</title>
    <url>/2022/03/07/H5C3%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%BA%8C%EF%BC%88%E5%AE%9E%E6%88%98%EF%BC%89/</url>
    <content><![CDATA[<h1 id="一、双栏信息"><a href="#一、双栏信息" class="headerlink" title="一、双栏信息"></a>一、双栏信息</h1><h1 id="二、元素阴影效果"><a href="#二、元素阴影效果" class="headerlink" title="二、元素阴影效果"></a>二、元素阴影效果</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: offset-x offset-y blur spread color inset;</span><br></pre></td></tr></table></figure>
<ul>
<li>offset-x：必需，取值正负都可。offset-x水平阴影的位置。</li>
<li>offset-y：必需，取值正负都可。offset-y垂直阴影的位置。</li>
<li>blur:可选，只能取正值。blur-radius阴影模糊半径，0即无模糊效果，值越大阴影边缘越模糊。</li>
<li>spread：可选，取值正负都可。spread代表阴影的周长向四周扩展的尺寸，正值，阴影扩大，负值阴影缩小。</li>
<li>color:可选。阴影的颜色。如果不设置，浏览器会取默认颜色，通常是黑色，但各浏览器默认颜色有差异，建议不要省略。可以是rgb(250,0,0)，也可以是有透明值的rgba(250,0,0,0.5)。</li>
<li>inset:可选。关键字，将外部投影(默认outset)改为内部投影。inset 阴影在背景之上，内容之下。</li>
</ul>
<h1 id="三、元素访问效果"><a href="#三、元素访问效果" class="headerlink" title="三、元素访问效果"></a>三、元素访问效果</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	ele.hover：鼠标在元素上方时，要显示的效果</span></span><br><span class="line"><span class="comment">	ele.link：未被访问的元素，要显示的效果</span></span><br><span class="line"><span class="comment">	ele.active：鼠标按住不动时，要显示的效果</span></span><br><span class="line"><span class="comment">	ele.visited：元素访问过后，要显示的效果</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>前端</category>
        <category>H5C3</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>网页效果</tag>
      </tags>
  </entry>
  <entry>
    <title>H5C3进阶一</title>
    <url>/2022/03/01/H5C3%E8%BF%9B%E9%98%B6%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、浮动"><a href="#一、浮动" class="headerlink" title="一、浮动"></a>一、浮动</h1><h2 id="1-1-概念"><a href="#1-1-概念" class="headerlink" title="1.1 概念"></a>1.1 概念</h2><ul>
<li>通过浮动可以使一个元素向其父元素的左侧或右侧移动</li>
<li>使用 float 属性来设置于元素的浮动，可选值：<ul>
<li>none 默认值 元素不浮动</li>
<li>left 元素向右浮动</li>
<li>right 元素向右浮动</li>
</ul>
</li>
</ul>
<h2 id="1-2-特点"><a href="#1-2-特点" class="headerlink" title="1.2 特点"></a>1.2 特点</h2><ol>
<li>浮动的元素会完全脱离文档流，不再占据文档流中的位置</li>
<li>设置浮动以后元素回向父元素的左侧或右侧移动</li>
<li>浮动元素默认不会从父元素中移出</li>
<li>浮动元素向左或向右移动时，不会超过它前边的其他浮动元素</li>
<li>如果浮动元素的上边是一个没有浮动的块元素，则浮动元素无法上移</li>
<li>浮动元素不会超过它上边的浮动的兄弟元素，最多就是和它一样高</li>
</ol>
<h2 id="1-3-注意"><a href="#1-3-注意" class="headerlink" title="1.3 注意"></a>1.3 注意</h2><ol>
<li>元素设置浮动以后，水平布局的等式便不需要强制成立</li>
<li>元素设置浮动以后，会完全从文档流中脱离，不在占用文档流的位置，所以元素下边的还在文档流中的元素会自动向上移动</li>
</ol>
<h2 id="1-4-总结"><a href="#1-4-总结" class="headerlink" title="1.4 总结"></a>1.4 总结</h2><ul>
<li>浮动目前来讲它的主要作用就是让页面中的元素可以水平排列</li>
<li>通过浮动可以制作一些水平方向的布局<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">             <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="1-5-浮动与文字"><a href="#1-5-浮动与文字" class="headerlink" title="1.5 浮动与文字"></a>1.5 浮动与文字</h2><ul>
<li>浮动元素不会盖住文字，文字会自动环绕在浮动元素的周围，所以我们可以利用浮动来设置文字环绕图片的效果</li>
</ul>
<h2 id="1-6-脱离文档流"><a href="#1-6-脱离文档流" class="headerlink" title="1.6 脱离文档流"></a>1.6 脱离文档流</h2><h3 id="1-6-1-概念"><a href="#1-6-1-概念" class="headerlink" title="1.6.1 概念"></a>1.6.1 概念</h3><ul>
<li>元素设置浮动以后，将会从文档流中脱离后，元素的一些特点也会发生变化</li>
</ul>
<h3 id="1-6-2-特点"><a href="#1-6-2-特点" class="headerlink" title="1.6.2 特点"></a>1.6.2 特点</h3><h4 id="（1）块元素"><a href="#（1）块元素" class="headerlink" title="（1）块元素"></a>（1）块元素</h4><ol>
<li>块元素不再独占页面的一行</li>
<li>脱离文档流以后，块元素的宽度和高度默认都被内容撑开</li>
</ol>
<h4 id="（2）行内元素"><a href="#（2）行内元素" class="headerlink" title="（2）行内元素"></a>（2）行内元素</h4><ul>
<li>行内元素脱离文档流以后变成块元素，特点和块元素一样</li>
<li>脱离文档流以后，不需要再区分块和行内了</li>
</ul>
<h1 id="二、网页布局"><a href="#二、网页布局" class="headerlink" title="二、网页布局"></a>二、网页布局</h1><h2 id="2-1-结构"><a href="#2-1-结构" class="headerlink" title="2.1 结构"></a>2.1 结构</h2><ul>
<li>头部</li>
<li>主体</li>
<li>左侧导航</li>
<li>中间的内容</li>
<li>右边的边栏</li>
<li>网页的底部</li>
</ul>
<h2 id="2-2-实现"><a href="#2-2-实现" class="headerlink" title="2.2 实现"></a>2.2 实现</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">header</span>, <span class="selector-tag">main</span>, <span class="selector-tag">footer</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 设置头部 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">header</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: silver;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 设置主体 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">main</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">10px</span> auto;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">nav</span>, <span class="selector-tag">article</span>, <span class="selector-tag">footer</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 设置左侧的导航 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">nav</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">190px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 设置中间的内容 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">article</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 设置右侧的内容 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">aside</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">190px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 设置底部 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">footer</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: tomato;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 创建头部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 创建网页的主体 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 左侧导航 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 中间的内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 右边的边栏 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 网页的底部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="三、BFC"><a href="#三、BFC" class="headerlink" title="三、BFC"></a>三、BFC</h1><h2 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1 概念"></a>3.1 概念</h2><ul>
<li>BFC(Block Formatting Context)   块级格式化环境</li>
<li>BFC是CSS中的一个隐含的属性,可以为一个元素开启BFC</li>
<li>开启BFC,该元素会变成一个独立的布局区域</li>
</ul>
<h2 id="3-2-特点"><a href="#3-2-特点" class="headerlink" title="3.2 特点"></a>3.2 特点</h2><ol>
<li>开启BFC的元素不会被浮动元素所覆盖</li>
<li>开启BFC的元素子元素和父元素外边距不会重叠</li>
<li>开启BFC的元素怒可以包含浮动的子元素</li>
</ol>
<h2 id="3-3-BFC开启方式"><a href="#3-3-BFC开启方式" class="headerlink" title="3.3 BFC开启方式"></a>3.3 BFC开启方式</h2><ol>
<li>设置元素的浮动(不推荐)</li>
<li>将元素设置为行内块元素(不推荐)</li>
<li>将元素的overflow设置为一个非visible的值</li>
<li>常用的方式 为元素设置overflow:hidden    开启其BFC,以使其可以包含浮动元素</li>
</ol>
<h2 id="3-4-示例"><a href="#3-4-示例" class="headerlink" title="3.4 示例"></a>3.4 示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">            <span class="comment">/* float: left; */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- &lt;div class=&quot;box2&quot;&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &lt;/div&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="四、高度塌陷"><a href="#四、高度塌陷" class="headerlink" title="四、高度塌陷"></a>四、高度塌陷</h1><h2 id="4-1-概念"><a href="#4-1-概念" class="headerlink" title="4.1 概念"></a>4.1 概念</h2><ul>
<li>在浮动布局中,父元素的高度默认被子元素撑开</li>
<li>当子元素浮动后,其会完全脱离文档流,子元素从文档流中脱离</li>
<li>将会无法撑起父元素的高度,导致父元素的高度丢失</li>
<li>父元素高度丢失以后,其下的元素会自动上移,导致页面布局混乱</li>
<li>所以高度塌陷使浮动布局中比较常见的问题,这个问题必须要进行处理</li>
</ul>
<h2 id="4-2-示例"><a href="#4-2-示例" class="headerlink" title="4.2 示例"></a>4.2 示例</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.outer</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: red solid <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 开启BFC */</span></span></span><br><span class="line"><span class="css">             <span class="comment">/* float: left; */</span></span></span><br><span class="line"><span class="css">             <span class="comment">/* display: inline-block; */</span></span></span><br><span class="line"><span class="css">             <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.inner</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/* 高度塌陷的问题 */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-3-解决方法"><a href="#4-3-解决方法" class="headerlink" title="4.3 解决方法"></a>4.3 解决方法</h2><h3 id="4-3-1-方法一：clear"><a href="#4-3-1-方法一：clear" class="headerlink" title="4.3.1 方法一：clear"></a>4.3.1 方法一：clear</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">            <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="css">                由于box1的浮动,导致box3位置上移</span></span></span><br><span class="line"><span class="comment"><span class="css">                    也就是box3收到了box1浮动的影响,位置发生了变化</span></span></span><br><span class="line"><span class="comment"><span class="css">                </span></span></span><br><span class="line"><span class="comment"><span class="css">                如果我们不希望某个元素因为其他元素浮动的影响而改变位置,</span></span></span><br><span class="line"><span class="comment"><span class="css">                    可以通过clear属性来清楚浮动元素对当前元素所产生的影响</span></span></span><br><span class="line"><span class="comment"><span class="css">                </span></span></span><br><span class="line"><span class="comment"><span class="css">                clear</span></span></span><br><span class="line"><span class="comment"><span class="css">                    作用:清除浮动元素对当前元素所产生的影响</span></span></span><br><span class="line"><span class="comment"><span class="css">                    可选值</span></span></span><br><span class="line"><span class="comment"><span class="css">                        left:清除左侧浮动元素对当前元素的影响</span></span></span><br><span class="line"><span class="comment"><span class="css">                        right:清除左侧浮动元素对当前元素的影响</span></span></span><br><span class="line"><span class="comment"><span class="css">                        both:清除两侧影响最大的那侧</span></span></span><br><span class="line"><span class="comment"><span class="css">                    </span></span></span><br><span class="line"><span class="comment"><span class="css">                    原理:</span></span></span><br><span class="line"><span class="comment"><span class="css">                        设置清除浮动以后,浏览器会自动为元素添加一个上外边距,</span></span></span><br><span class="line"><span class="comment"><span class="css">                            以使其位置不受其他元素的影响</span></span></span><br><span class="line"><span class="comment"><span class="css">                        </span></span></span><br><span class="line"><span class="comment"><span class="css">             */</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-2-方法二：伪类"><a href="#4-3-2-方法二：伪类" class="headerlink" title="4.3.2 方法二：伪类"></a>4.3.2 方法二：伪类</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* 解决外边距重叠,父元素会继承第一个子元素的外边距 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* .box1::before&#123;</span></span></span><br><span class="line"><span class="comment"><span class="css">            content: &#x27;&#x27;;</span></span></span><br><span class="line"><span class="comment"><span class="css">            display: table;</span></span></span><br><span class="line"><span class="comment"><span class="css">        &#125; */</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* clearfix可以同时解决高度塌陷和外边距重叠的问题,</span></span></span><br><span class="line"><span class="comment"><span class="css">            当遇到这些问题时,直接使用clearfix这个类即可 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::before</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="css">            <span class="attribute">clear</span>: both;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1 clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="五、定位"><a href="#五、定位" class="headerlink" title="五、定位"></a>五、定位</h1><h2 id="5-1-概念"><a href="#5-1-概念" class="headerlink" title="5.1 概念"></a>5.1 概念</h2><ul>
<li>定位是一种更加高级的布局手段</li>
<li>通过定位可以将元素摆放到页面的任意位置</li>
<li>使用position来设置定位<ul>
<li>static  默认值，元素是静止的，没有开启定位</li>
<li>ralative    开启元素的相对定位</li>
<li>absolute    开启元素的绝对定位</li>
<li>fixed   开启元素的固定定位</li>
<li>sticky  开启元素的粘滞定位</li>
</ul>
</li>
</ul>
<h2 id="5-2-相对定位"><a href="#5-2-相对定位" class="headerlink" title="5.2 相对定位"></a>5.2 相对定位</h2><h3 id="5-2-1-概念"><a href="#5-2-1-概念" class="headerlink" title="5.2.1 概念"></a>5.2.1 概念</h3><ul>
<li>当元素的position属性值设置为relative时，则开启了元素的相对定位</li>
</ul>
<h3 id="5-2-2-特点"><a href="#5-2-2-特点" class="headerlink" title="5.2.2 特点"></a>5.2.2 特点</h3><ol>
<li>元素开启相对定位以后，如果不设置偏移量，元素不会发生任何的变化</li>
<li>相对定位是参照于元素在文档流中的位置进行定位</li>
<li>相对定位会提升元素的层级</li>
<li>相对定位不会使元素脱离文档流</li>
<li>相对定位不会改变元素的性质，块还是块，行内还是行内</li>
</ol>
<h2 id="5-3-偏移量"><a href="#5-3-偏移量" class="headerlink" title="5.3 偏移量"></a>5.3 偏移量</h2><ul>
<li>当元素开启了定位以后，可以通过偏移量来设置元素的位置</li>
<li>top：定位元素和定位位置上边的距离</li>
<li>bottom：定位元素和定位位置下边的距离<ul>
<li>定位元素垂直方向的位置由top和bottom两个属性来控制，通常情况下只会使用其中之一</li>
<li>top值越大，定位元素越向下移动</li>
<li>bottom值越大，定位元素越向上移动</li>
</ul>
</li>
<li>left：定位元素和定位位置左边的距离</li>
<li>right：定位元素和定位位置右边的距离<ul>
<li>定位元素水平方向的位置由left和right两个属性来控制，通常情况下只会使用其中之一</li>
<li>left值越大，定位元素越向右移动</li>
<li>right值越大，定位元素越向左移动</li>
</ul>
</li>
</ul>
<h2 id="5-4-绝对定位"><a href="#5-4-绝对定位" class="headerlink" title="5.4 绝对定位"></a>5.4 绝对定位</h2><h3 id="5-4-1-概念"><a href="#5-4-1-概念" class="headerlink" title="5.4.1 概念"></a>5.4.1 概念</h3><ul>
<li>当元素的position属性值设置威absolute时，则开启了元素的绝对定位</li>
</ul>
<h3 id="5-4-2-特点"><a href="#5-4-2-特点" class="headerlink" title="5.4.2 特点"></a>5.4.2 特点</h3><ol>
<li>开启绝对定位后，如果不设置偏移量，元素的位置不会发生变化</li>
<li>开启绝对定位后，元素会从文档流中脱离</li>
<li>绝对定位会改变元素的性质，行内变成块，块的宽高被内容撑开</li>
<li>绝对定位会使元素提升一个层级</li>
<li>绝对定位元素是相对于其包含块进行定位的</li>
</ol>
<h3 id="5-4-3-绝对定位元素的布局"><a href="#5-4-3-绝对定位元素的布局" class="headerlink" title="5.4.3 绝对定位元素的布局"></a>5.4.3 绝对定位元素的布局</h3><ul>
<li>水平布局：<ul>
<li>left + margin-left + border-left + padding-left + width + padding-right + border-right + margin-right + right= 父元素内容区宽度</li>
</ul>
</li>
<li>当我们开启了绝对定位后，水平方向的布局等式就需要添加 left 和 right 两个值</li>
<li>此时规则和之前一样，只是多添加了两个值<ul>
<li>当发生过渡约束，</li>
<li>如果9个值中没有auto，则自动调整right值，以使等式成立</li>
<li>如果由auto，则自动调整auto值，以使等式成立</li>
</ul>
</li>
<li>可设置auto的值<ul>
<li>margin width left right</li>
<li>因为left 和 right的值默认是auto，所以如果不知道left和right，则等式满足时，会自动调整这两个值</li>
</ul>
</li>
<li>垂直方向布局的等式也必须满足：<ul>
<li>top + margin-top/bottom + padding-top/bottom +border-top/bottom + bottom = 包含块的高度</li>
</ul>
</li>
</ul>
<h2 id="5-5-包含块（containing-block）"><a href="#5-5-包含块（containing-block）" class="headerlink" title="5.5 包含块（containing block）"></a>5.5 包含块（containing block）</h2><ul>
<li>正常情况下，包含块就是离当前元素最近的祖先块元素<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>绝对定位的包含块<ul>
<li>包含快就是离它最近的开启了定位的祖先元素</li>
<li>如果所有的祖先元素都没有开启定位，则相对于根元素进行定位：html（根元素、初始包含块）</li>
</ul>
</li>
</ul>
<h2 id="5-6-固定定位"><a href="#5-6-固定定位" class="headerlink" title="5.6 固定定位"></a>5.6 固定定位</h2><h3 id="5-6-1-概念"><a href="#5-6-1-概念" class="headerlink" title="5.6.1 概念"></a>5.6.1 概念</h3><ul>
<li>将元素的position属性设置为fixed，则开启了元素的固定定位</li>
<li>固定定位也是一种绝对定位，所以固定定位的大部分特点都和绝对定位一样<ul>
<li>唯一不同的是固定定位永远参照于浏览器的视口进行定位</li>
<li>固定定位的元素不会随网页的滚动条滚动</li>
</ul>
</li>
</ul>
<h2 id="5-7-粘滞定位"><a href="#5-7-粘滞定位" class="headerlink" title="5.7 粘滞定位"></a>5.7 粘滞定位</h2><h3 id="5-7-1-概念"><a href="#5-7-1-概念" class="headerlink" title="5.7 1 概念"></a>5.7 1 概念</h3><ul>
<li>当元素的position属性设置为sticky时，则开启了元素的粘滞定位</li>
<li>粘滞定位和相对定位的特点基本一致<ul>
<li>不同的是粘滞定位可以在元素到达某个位置时将其固定</li>
</ul>
</li>
</ul>
<h2 id="5-8-元素的层级"><a href="#5-8-元素的层级" class="headerlink" title="5.8 元素的层级"></a>5.8 元素的层级</h2><ul>
<li>对于开启了定位元素，可以通过z-index属性来指定元素的层级</li>
<li>z-index需要一个整数作为参数，值越大的元素层级越高，元素的层级越高越优先显示</li>
<li>如果元素层级一样，优先显示靠下的元素</li>
<li>祖先元素的层级再高也不会盖住后代元素</li>
</ul>
]]></content>
      <categories>
        <category>前端</category>
        <category>H5C3</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>HTML5</tag>
        <tag>CSS3</tag>
      </tags>
  </entry>
  <entry>
    <title>Java算法大全一</title>
    <url>/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、两数之和"><a href="#一、两数之和" class="headerlink" title="一、两数之和"></a>一、两数之和</h1><h2 id="1-1-题目"><a href="#1-1-题目" class="headerlink" title="1.1 题目"></a>1.1 题目</h2><ul>
<li>给定一个整数数组 <code>nums</code> 和一个整数目标值 <code>target</code>，请你在该数组中找出 <strong>和为目标值</strong> <em>target</em>  的那 <strong>两个</strong> 整数，并返回它们的数组下标。</li>
<li>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。</li>
<li>你可以按任意顺序返回答案。</li>
</ul>
<h2 id="1-2-示例"><a href="#1-2-示例" class="headerlink" title="1.2 示例"></a>1.2 示例</h2><h3 id="1-2-1-示例1"><a href="#1-2-1-示例1" class="headerlink" title="1.2.1 示例1"></a>1.2.1 示例1</h3><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">输入：nums = <span class="comment">[2,7,11,15]</span>, target = 9</span><br><span class="line">输出：<span class="comment">[0,1]</span></span><br><span class="line">解释：因为 nums<span class="comment">[0]</span> + nums<span class="comment">[1]</span> == 9 ，返回 <span class="comment">[0, 1]</span> 。</span><br></pre></td></tr></table></figure>
<h3 id="1-2-2-示例2"><a href="#1-2-2-示例2" class="headerlink" title="1.2.2 示例2"></a>1.2.2 示例2</h3><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">输入：nums = <span class="comment">[3,2,4]</span>, target = 6</span><br><span class="line">输出：<span class="comment">[1,2]</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-3-示例3"><a href="#1-2-3-示例3" class="headerlink" title="1.2.3 示例3"></a>1.2.3 示例3</h3><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">输入：nums = <span class="comment">[3,3]</span>, target = 6</span><br><span class="line">输出：<span class="comment">[0,1]</span></span><br></pre></td></tr></table></figure>
<h2 id="1-3-提示"><a href="#1-3-提示" class="headerlink" title="1.3 提示"></a>1.3 提示</h2><ul>
<li>$2&lt;=nums.length&lt;=10^4$</li>
<li>$-10^9&lt;=nums[i]&lt;=10^9$</li>
<li>$-10^9&lt;=target&lt;=10^9$</li>
<li><strong>只会存在一个有效答案</strong></li>
<li><strong>进阶</strong>：你可以想出一个时间复杂度小于 $O(n^2)$ 的算法吗？</li>
</ul>
<h2 id="1-4-题解"><a href="#1-4-题解" class="headerlink" title="1.4 题解"></a>1.4 题解</h2><h3 id="1-4-1-解法一：哈希表"><a href="#1-4-1-解法一：哈希表" class="headerlink" title="1.4.1 解法一：哈希表"></a>1.4.1 解法一：哈希表</h3><ul>
<li>设定从值到数组坐标的Map映射，根据键来查找坐标</li>
<li>顺序遍历数组，对于当前坐标i<ul>
<li>如果map中包含了键值：target - nums[i]对应的坐标，表明已经查找到了最终结果，将{target - nums[i], i}返回作为结果即可</li>
<li>如果map中没有包含键值：target - nums[i]对应的坐标，则将{num[i], i}添加到map中</li>
</ul>
</li>
</ul>
<h4 id="（1）关键步骤1"><a href="#（1）关键步骤1" class="headerlink" title="（1）关键步骤1"></a>（1）关键步骤1</h4><img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/5.png" class="" title="image5">
<h4 id="（2）关键步骤2"><a href="#（2）关键步骤2" class="headerlink" title="（2）关键步骤2"></a>（2）关键步骤2</h4><img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/6.png" class="" title="image6">
<h4 id="（3）实现"><a href="#（3）实现" class="headerlink" title="（3）实现"></a>（3）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; hashtable = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hashtable.containsKey(target - nums[i])) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;hashtable.get(target - nums[i]), i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            hashtable.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>时间复杂度$O(n)$</li>
<li>空间复杂度$O(n)$</li>
</ul>
<h1 id="二、两数相加"><a href="#二、两数相加" class="headerlink" title="二、两数相加"></a>二、两数相加</h1><h2 id="2-1-题目"><a href="#2-1-题目" class="headerlink" title="2.1 题目"></a>2.1 题目</h2><ul>
<li>给你两个<strong>非空</strong>的链表，表示两个非负的整数。它们每位数字都是按照<strong>逆序</strong>的方式存储的，并且每个节点只能存储 一位 数字。</li>
<li>请你将两个数相加，并以相同形式返回一个表示和的链表。</li>
<li>你可以假设除了数字 0 之外，这两个数都不会以 0 开头。</li>
</ul>
<h2 id="2-2-示例"><a href="#2-2-示例" class="headerlink" title="2.2 示例"></a>2.2 示例</h2><h3 id="2-2-1-示例1"><a href="#2-2-1-示例1" class="headerlink" title="2.2.1 示例1"></a>2.2.1 示例1</h3><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">输入：l1 = <span class="comment">[2,4,3]</span>, l2 = <span class="comment">[5,6,4]</span></span><br><span class="line">输出：<span class="comment">[7,0,8]</span></span><br><span class="line">解释：342 + 465 = 807.</span><br></pre></td></tr></table></figure>
<h3 id="2-2-2-示例2"><a href="#2-2-2-示例2" class="headerlink" title="2.2.2 示例2"></a>2.2.2 示例2</h3><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">输入：l1 = <span class="comment">[0]</span>, l2 = <span class="comment">[0]</span></span><br><span class="line">输出：<span class="comment">[0]</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-3-示例3"><a href="#2-2-3-示例3" class="headerlink" title="2.2.3 示例3"></a>2.2.3 示例3</h3><figure class="highlight dns"><table><tr><td class="code"><pre><span class="line">输入：l1 = [<span class="number">9,9,9,9</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>], l2 = [<span class="number">9,9,9,9</span>]</span><br><span class="line">输出：[<span class="number">8,9,9,9</span>,<span class="number">0,0,0,1</span>]</span><br></pre></td></tr></table></figure>
<h2 id="2-3-提示"><a href="#2-3-提示" class="headerlink" title="2.3 提示"></a>2.3 提示</h2><ul>
<li>每个链表中的节点数在范围 <code>[1, 100]</code> 内</li>
<li><code>0 &lt;= Node.val &lt;= 9</code></li>
<li>题目数据保证列表表示的数字不含前导零</li>
</ul>
<h2 id="2-4-题解"><a href="#2-4-题解" class="headerlink" title="2.4 题解"></a>2.4 题解</h2><h3 id="2-4-1-解法一：模拟"><a href="#2-4-1-解法一：模拟" class="headerlink" title="2.4.1 解法一：模拟"></a>2.4.1 解法一：模拟</h3><h4 id="（1）思路"><a href="#（1）思路" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>使用<strong>尾插法</strong>，逐步对两个数进行计算，使用<strong>carry</strong>保存两个数相加之后得到的<strong>进位</strong>，初始为0。每次进行相加操作时，也要把carry加上，因为每个计算的数字在链表中是逆序保存每个数字的，所以计算起来直接顺序遍历两个链表即可，比较方便。</p>
<p>遍历完两个链表后，还需要判断进位carry是否为&gt;0，如果大于0，则新建一个节点进行保存最后的进位</p>
<p>此算法有三个个关键计算步骤，两数之和：$sum=n1+n2+carry$，当前位置的值：$n3=sum\%10$，当前进位$carry=sum/10$</p>
<h4 id="（2）步骤"><a href="#（2）步骤" class="headerlink" title="（2）步骤"></a>（2）步骤</h4><img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/7.png" class="" title="sum">
<h4 id="（3）实现-1"><a href="#（3）实现-1" class="headerlink" title="（3）实现"></a>（3）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode() &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val) &#123; this.val = val; &#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int val, ListNode next) &#123; this.val = val; this.next = next; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">        ListNode head = <span class="keyword">null</span>, tail = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="keyword">null</span> || l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> n1 = l1 != <span class="keyword">null</span> ? l1.val : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> n2 = l2 != <span class="keyword">null</span> ? l2.val : <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> sum = n1 + n2 + carry;</span><br><span class="line">            <span class="keyword">if</span> (head == <span class="keyword">null</span>) &#123;</span><br><span class="line">                head = tail = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tail.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">                tail = tail.next;</span><br><span class="line">            &#125;</span><br><span class="line">            carry = sum / <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (l1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                l1 = l1.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                l2 = l2.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (carry &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            tail.next = <span class="keyword">new</span> ListNode(carry);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、无重复最长子串"><a href="#三、无重复最长子串" class="headerlink" title="三、无重复最长子串"></a>三、无重复最长子串</h1><h2 id="3-1-题目"><a href="#3-1-题目" class="headerlink" title="3.1 题目"></a>3.1 题目</h2><p>给定一个字符串 s ，请你找出其中不含有重复字符的 <strong>最长子串</strong> 的长度</p>
<h2 id="3-2-示例"><a href="#3-2-示例" class="headerlink" title="3.2 示例"></a>3.2 示例</h2><h3 id="3-2-1-示例1"><a href="#3-2-1-示例1" class="headerlink" title="3.2.1 示例1"></a>3.2.1 示例1</h3><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">输入: s = &quot;abcabcbb&quot;</span></span><br><span class="line"><span class="section">输出: 3 </span></span><br><span class="line"><span class="section">解释: 因为无重复字符的最长子串是 &quot;abc&quot;，所以其长度为 3。</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-2-示例2"><a href="#3-2-2-示例2" class="headerlink" title="3.2.2 示例2"></a>3.2.2 示例2</h3><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">输入: s = &quot;bbbbb&quot;</span></span><br><span class="line"><span class="section">输出: 1</span></span><br><span class="line"><span class="section">解释: 因为无重复字符的最长子串是 &quot;b&quot;，所以其长度为 1。</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-3-示例1"><a href="#3-2-3-示例1" class="headerlink" title="3.2.3 示例1"></a>3.2.3 示例1</h3><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">输入: s = &quot;pwwkew&quot;</span></span><br><span class="line"><span class="section">输出: 3</span></span><br><span class="line"><span class="section">解释: 因为无重复字符的最长子串是 &quot;wke&quot;，所以其长度为 3。</span></span><br><span class="line">     请注意，你的答案必须是 子串 的长度，<span class="string">&quot;pwke&quot;</span> 是一个子序列，不是子串。</span><br></pre></td></tr></table></figure>
<h2 id="3-3-提示"><a href="#3-3-提示" class="headerlink" title="3.3 提示"></a>3.3 提示</h2><ul>
<li>$0 &lt;= s.length &lt;= 5 * 10^4$</li>
<li>s 由英文字母、数字、符号和空格组成</li>
</ul>
<h2 id="3-4-题解"><a href="#3-4-题解" class="headerlink" title="3.4 题解"></a>3.4 题解</h2><h3 id="3-4-1-解法一：滑动窗口"><a href="#3-4-1-解法一：滑动窗口" class="headerlink" title="3.4.1 解法一：滑动窗口"></a>3.4.1 解法一：滑动窗口</h3><h4 id="（1）思路-1"><a href="#（1）思路-1" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>设定初始窗口大小，<strong>窗口中的字符必须是不重复的</strong>（集合）。</p>
<p>从字符串起始位置开始遍历，如果窗口内<strong>不包含</strong>下一个字符，则窗口大小+1，把下一个字符包含进来；如果窗口内已经<strong>包含</strong>了下一个字符，则去除窗口的头一个元素，<strong>不必重置窗口大小</strong>，直接进行下一个字符的判断</p>
<p>使用一个值专门来计算无重复字符串的最大长度，并返回结果</p>
<h4 id="（2）步骤-1"><a href="#（2）步骤-1" class="headerlink" title="（2）步骤"></a>（2）步骤</h4><img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/8.png" class="" title="str">
<h4 id="（3）实现-2"><a href="#（3）实现-2" class="headerlink" title="（3）实现"></a>（3）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 哈希集合，记录每个字符是否出现过</span></span><br><span class="line">        Set&lt;Character&gt; occ = <span class="keyword">new</span> HashSet&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="comment">// 右指针，初始值为 -1，相当于我们在字符串的左边界的左侧，还没有开始移动</span></span><br><span class="line">        <span class="keyword">int</span> rk = -<span class="number">1</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 左指针向右移动一格，移除一个字符</span></span><br><span class="line">                occ.remove(s.charAt(i - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (rk + <span class="number">1</span> &lt; n &amp;&amp; !occ.contains(s.charAt(rk + <span class="number">1</span>))) &#123;</span><br><span class="line">                <span class="comment">// 不断地移动右指针</span></span><br><span class="line">                occ.add(s.charAt(rk + <span class="number">1</span>));</span><br><span class="line">                ++rk;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 第 i 到 rk 个字符是一个极长的无重复字符子串</span></span><br><span class="line">            ans = Math.max(ans, rk - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-复杂度"><a href="#4-复杂度" class="headerlink" title="(4) 复杂度"></a>(4) 复杂度</h4><ul>
<li>时间复杂度：$O(N)$</li>
<li>空间复杂度：$O(|\sum|)$，$|\sum|$表示字符串s中的字符集大小</li>
</ul>
<h1 id="四、寻找两个正序数组的中位数"><a href="#四、寻找两个正序数组的中位数" class="headerlink" title="四、寻找两个正序数组的中位数"></a>四、寻找两个正序数组的中位数</h1><h2 id="4-1-题目"><a href="#4-1-题目" class="headerlink" title="4.1 题目"></a>4.1 题目</h2><p>给定两个大小分别为 m 和 n 的正序（从小到大）数组 nums1 和 nums2。请你找出并返回这两个正序数组的 中位数 。</p>
<p>算法的时间复杂度应该为 $O(log (m+n)) $。</p>
<h2 id="4-2-示例"><a href="#4-2-示例" class="headerlink" title="4.2 示例"></a>4.2 示例</h2><h3 id="4-2-1-示例1"><a href="#4-2-1-示例1" class="headerlink" title="4.2.1 示例1"></a>4.2.1 示例1</h3><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">输入：nums1 = <span class="comment">[1,3]</span>, nums2 = <span class="comment">[2]</span></span><br><span class="line">输出：2.00000</span><br><span class="line">解释：合并数组 = <span class="comment">[1,2,3]</span> ，中位数 2</span><br></pre></td></tr></table></figure>
<h3 id="4-2-2-示例2"><a href="#4-2-2-示例2" class="headerlink" title="4.2.2 示例2"></a>4.2.2 示例2</h3><figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">输入：<span class="symbol">nums1</span> = [<span class="number">1</span>,<span class="number">2</span>], <span class="symbol">nums2</span> = [<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">输出：<span class="number">2.50000</span></span><br><span class="line">解释：合并数组 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>] ，中位数 <span class="comment">(2 + 3)</span> / <span class="number">2</span> = <span class="number">2.5</span></span><br></pre></td></tr></table></figure>
<h2 id="4-3-提示"><a href="#4-3-提示" class="headerlink" title="4.3 提示"></a>4.3 提示</h2><ul>
<li>$nums1.length == m$</li>
<li>$nums2.length == n$</li>
<li>$0 &lt;= m &lt;= 1000$</li>
<li>$0 &lt;= n &lt;= 1000$</li>
<li>$1 &lt;= m + n &lt;= 2000$</li>
<li>$-10^6 &lt;= nums1[i], nums2[i] &lt;= 10^6$</li>
</ul>
<h2 id="4-4-题解"><a href="#4-4-题解" class="headerlink" title="4.4 题解"></a>4.4 题解</h2><h3 id="4-4-1-解法一：二分查找"><a href="#4-4-1-解法一：二分查找" class="headerlink" title="4.4.1 解法一：二分查找"></a>4.4.1 解法一：二分查找</h3><h4 id="（1）思路-2"><a href="#（1）思路-2" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>根据题目我们可以得到两个条件，一个是<strong>数组长度</strong>，一个是<strong>数组有序</strong>，有了这两个条件可以理解二分查找的操作。</p>
<p>对于中位数的位置，总的数组个数如果为奇数，那么中位数的位置为$(m+n)/2+1$；总的数组个数如果为偶数，那么中位数为$(m+n)/2$和$(m+n)/2+1$的平均值</p>
<p>现在数组长度是已知的，那么中位数的位置也是已知的，假设中位数的位置是k，两个数组分别为<strong>A和B</strong>，根据二分查找的思想，对于一个数组我们每次都会查找第$k/2$位置的数。但是这道题<strong>有两个数组</strong>，如果同时取$k/2$位置的数进行比较，即$A[k/2],B[k/2]$，我们取其中的较小值，比如$A[k/2]$，那么最多会有$k/2+k/2=k$个元素，比$A[k/2]$小，那么在排除这些元素时，就会把计算中位数时的某个位置的元素给错误的排除掉，所以每次比较都选取$k/2-1$位置上的数</p>
<p>不同的比较情况如下：</p>
<ul>
<li><p>如果$A[k/2-1]&lt;=B[k/2-1]$，则最多有$k-2$个数比$A[k/2-1]$小，而这些数（包括$A[k/2-1]$）不可能处在中位数的位置上，因此可以排除掉这些元素，排除后更新k值$k=k-k/2$</p>
</li>
<li><p>如果$A[k/2-1]&gt;B[k/2-1]$，与以上逻辑相反</p>
</li>
</ul>
<p>对于特殊情况：</p>
<ul>
<li>$k/2-1$下标越界，我们可以选取对应数组中的最后一个元素，在这种情况下，我们必须<strong>根据排除掉的元素的个数减少k值</strong>，而不是$k=k-k/2$</li>
<li>如果其中一个数组为空，则直接根据非空的数组进行计算即可</li>
<li>正常计算到后面，如果$k=1$，那么只要返回两个数组比较元素的最小值即可</li>
</ul>
<h4 id="（2）步骤-2"><a href="#（2）步骤-2" class="headerlink" title="（2）步骤"></a>（2）步骤</h4><img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/9.png" class="" title="img">
<h4 id="（3）实现-3"><a href="#（3）实现-3" class="headerlink" title="（3）实现"></a>（3）实现</h4><ul>
<li>算法实现时对k值的更新是直接减去排除的元素的个数，而不是$k=k-k/2$，效果应该都一样，可能是不想那么麻烦吧</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> length1 = nums1.length, length2 = nums2.length;</span><br><span class="line">        <span class="keyword">int</span> totalLength = length1 + length2;</span><br><span class="line">        <span class="keyword">if</span> (totalLength % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> midIndex = totalLength / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">double</span> median = getKthElement(nums1, nums2, midIndex + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span> median;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> midIndex1 = totalLength / <span class="number">2</span> - <span class="number">1</span>, midIndex2 = totalLength / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">double</span> median = (getKthElement(nums1, nums2, midIndex1 + <span class="number">1</span>) + getKthElement(nums1, nums2, midIndex2 + <span class="number">1</span>)) / <span class="number">2.0</span>;</span><br><span class="line">            <span class="keyword">return</span> median;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getKthElement</span><span class="params">(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/* 主要思路：要找到第 k (k&gt;1) 小的元素，那么就取 pivot1 = nums1[k/2-1] 和 pivot2 = nums2[k/2-1] 进行比较</span></span><br><span class="line"><span class="comment">         * 这里的 &quot;/&quot; 表示整除</span></span><br><span class="line"><span class="comment">         * nums1 中小于等于 pivot1 的元素有 nums1[0 .. k/2-2] 共计 k/2-1 个</span></span><br><span class="line"><span class="comment">         * nums2 中小于等于 pivot2 的元素有 nums2[0 .. k/2-2] 共计 k/2-1 个</span></span><br><span class="line"><span class="comment">         * 取 pivot = min(pivot1, pivot2)，两个数组中小于等于 pivot 的元素共计不会超过 (k/2-1) + (k/2-1) &lt;= k-2 个</span></span><br><span class="line"><span class="comment">         * 这样 pivot 本身最大也只能是第 k-1 小的元素</span></span><br><span class="line"><span class="comment">         * 如果 pivot = pivot1，那么 nums1[0 .. k/2-1] 都不可能是第 k 小的元素。把这些元素全部 &quot;删除&quot;，剩下的作为新的 nums1 数组</span></span><br><span class="line"><span class="comment">         * 如果 pivot = pivot2，那么 nums2[0 .. k/2-1] 都不可能是第 k 小的元素。把这些元素全部 &quot;删除&quot;，剩下的作为新的 nums2 数组</span></span><br><span class="line"><span class="comment">         * 由于我们 &quot;删除&quot; 了一些元素（这些元素都比第 k 小的元素要小），因此需要修改 k 的值，减去删除的数的个数</span></span><br><span class="line"><span class="comment">         * index1和index2分别指向两个数组排除元素后的起始位置</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> length1 = nums1.length, length2 = nums2.length;</span><br><span class="line">        <span class="keyword">int</span> index1 = <span class="number">0</span>, index2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> kthElement = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// 边界情况</span></span><br><span class="line">            <span class="keyword">if</span> (index1 == length1) &#123;</span><br><span class="line">                <span class="keyword">return</span> nums2[index2 + k - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (index2 == length2) &#123;</span><br><span class="line">                <span class="keyword">return</span> nums1[index1 + k - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (k == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Math.min(nums1[index1], nums2[index2]);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 正常情况</span></span><br><span class="line">            <span class="keyword">int</span> half = k / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> newIndex1 = Math.min(index1 + half, length1) - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> newIndex2 = Math.min(index2 + half, length2) - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> pivot1 = nums1[newIndex1], pivot2 = nums2[newIndex2];</span><br><span class="line">            <span class="keyword">if</span> (pivot1 &lt;= pivot2) &#123;</span><br><span class="line">                k -= (newIndex1 - index1 + <span class="number">1</span>);</span><br><span class="line">                index1 = newIndex1 + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                k -= (newIndex2 - index2 + <span class="number">1</span>);</span><br><span class="line">                index2 = newIndex2 + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（4）复杂度"><a href="#（4）复杂度" class="headerlink" title="（4）复杂度"></a>（4）复杂度</h4><ul>
<li>时间复杂度：$O(log(m+n))$</li>
<li>空间复杂度：$O(1)$</li>
</ul>
<h1 id="五、最长回文子串"><a href="#五、最长回文子串" class="headerlink" title="五、最长回文子串"></a>五、最长回文子串</h1><h2 id="5-1-题目"><a href="#5-1-题目" class="headerlink" title="5.1 题目"></a>5.1 题目</h2><p>给你一个字符串 <code>s</code>，找到 <code>s</code> 中最长的回文子串。</p>
<h2 id="5-2-示例"><a href="#5-2-示例" class="headerlink" title="5.2 示例"></a>5.2 示例</h2><h3 id="5-2-1-示例1"><a href="#5-2-1-示例1" class="headerlink" title="5.2.1 示例1"></a>5.2.1 示例1</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">输入：<span class="attr">s</span> = <span class="string">&quot;babad&quot;</span></span><br><span class="line">输出：<span class="string">&quot;bab&quot;</span></span><br><span class="line">解释：<span class="string">&quot;aba&quot;</span> 同样是符合题意的答案。</span><br></pre></td></tr></table></figure>
<h3 id="5-2-2-示例2"><a href="#5-2-2-示例2" class="headerlink" title="5.2.2 示例2"></a>5.2.2 示例2</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">输入：<span class="attr">s</span> = <span class="string">&quot;cbbd&quot;</span></span><br><span class="line">输出：<span class="string">&quot;bb&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-3-提示"><a href="#5-3-提示" class="headerlink" title="5.3 提示"></a>5.3 提示</h2><ul>
<li>$1 &lt;= s.length &lt;= 1000$</li>
<li>s 仅由数字和英文字母组成</li>
</ul>
<h2 id="5-4-题解"><a href="#5-4-题解" class="headerlink" title="5.4 题解"></a>5.4 题解</h2><h3 id="5-4-1-解法一：动态规划"><a href="#5-4-1-解法一：动态规划" class="headerlink" title="5.4.1 解法一：动态规划"></a>5.4.1 解法一：动态规划</h3><h4 id="（1）思路-3"><a href="#（1）思路-3" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>对于动态规划的算法一般需要构建状态转移方程，即下一个状态跟当前状态的关系是怎样的，这需要我们形式化的表示出来，另外还需要对实际问题进行状态的建模</p>
<p>对于此题，我们试分析题意，对于一个回文串，假设为“abcba”，我们去除掉头尾元素，那么“bcb”同样满足回文串的格式。也就是说<strong>一个回文串去掉头尾元素后得到的子串仍然是一个回文串</strong></p>
<p>有了这个条件，那么我们就可以进一步分析，我们以$P(i,j)$表示字符串$s$中第i到第j个字符组成的字符串是否为回文串，是则为true。根据之前所分析的情况，如果$s[i,j]$为回文串，那么$s[i+1,j-1]$仍然为一个回文串，即$P(i,j)=P(i+1,j-1)=true$</p>
<p>那么我们从相反的角度再来分析一下，也就是说，如果$s[i+1,j-1]$是一个回文串，且处在$s[i+1,j-1]$范围外的左侧元素$s[i]$和右侧元素$s[j]$，满足$s[i]==s[j]$这个等式的话，我们就可以说$s[i,j]$也是一个回文串，公式如下：</p>
<p>$P(i,j)=P(i+1,j-1)\land(s[i]==s[j])$</p>
<p>上述公式就是我们的<strong>状态转移公式</strong>，这是我们是根据题意一步步推导出来的最终公式。公式所表达的意思是，$P(i,j)$的状态值由$P(i+1,j-1)$和$s[i]==s[j]$共同决定，只要有一个不满足，那么$s[i,j]$就不能被称为回文串。</p>
<h4 id="（2）步骤-3"><a href="#（2）步骤-3" class="headerlink" title="（2）步骤"></a>（2）步骤</h4><p>以下步骤解释的是，先遍历长度，再根据长度移动窗口进行判断是否为回文串</p>
<p>每次遍历的结果窗口中的字符串是回文串，那么就更行<strong>最大的回文串长度</strong>和<strong>起始的字符下标</strong>，这样就可以根据这两个值来获取到最长回文子串</p>
<img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/10.png" class="" width="10">
<h4 id="（3）实现-4"><a href="#（3）实现-4" class="headerlink" title="（3）实现"></a>（3）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = s.length();</span><br><span class="line">        <span class="keyword">if</span> (len &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// maxLen为记录最长的回文串长度</span></span><br><span class="line">        <span class="keyword">int</span> maxLen = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// begin为最长回文串的起始下 标</span></span><br><span class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// dp[i][j] 表示 s[i..j] 是否是回文串</span></span><br><span class="line">        <span class="keyword">boolean</span>[][] dp = <span class="keyword">new</span> <span class="keyword">boolean</span>[len][len];</span><br><span class="line">        <span class="comment">// 初始化：所有长度为 1 的子串都是回文串</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            dp[i][i] = <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        <span class="comment">// 递推开始</span></span><br><span class="line">        <span class="comment">// 先枚举子串长度</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> L = <span class="number">2</span>; L &lt;= len; L++) &#123;</span><br><span class="line">            <span class="comment">// 枚举左边界，左边界的上限设置可以宽松一些</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="comment">// 由 L 和 i 可以确定右边界，即 j - i + 1 = L 得</span></span><br><span class="line">                <span class="keyword">int</span> j = L + i - <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// 如果右边界越界，就可以退出当前循环</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt;= len) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (charArray[i] != charArray[j]) &#123;</span><br><span class="line">                    dp[i][j] = <span class="keyword">false</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j - i &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                        dp[i][j] = <span class="keyword">true</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        dp[i][j] = dp[i + <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 只要 dp[i][j]== true 成立，就表示子串 s[i..j]是回文，此时记录回文长度和起始位置</span></span><br><span class="line">                <span class="keyword">if</span> (dp[i][j] &amp;&amp; j - i + <span class="number">1</span> &gt; maxLen) &#123;</span><br><span class="line">                    maxLen = j - i + <span class="number">1</span>;</span><br><span class="line">                    begin = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.substring(begin, begin + maxLen);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（4）复杂度分析"><a href="#（4）复杂度分析" class="headerlink" title="（4）复杂度分析"></a>（4）复杂度分析</h4><ul>
<li>时间复杂度：$O(n^2)$</li>
<li>空间复杂度：$O(n^2)$</li>
</ul>
<h1 id="六、Z字形变换"><a href="#六、Z字形变换" class="headerlink" title="六、Z字形变换"></a>六、Z字形变换</h1><h2 id="6-1-题目"><a href="#6-1-题目" class="headerlink" title="6.1 题目"></a>6.1 题目</h2><p>将一个给定字符串 s 根据给定的行数 numRows ，以从上往下、从左到右进行 Z 字形排列。</p>
<p>比如输入字符串为 “PAYPALISHIRING” 行数为 3 时，排列如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">P</span>   <span class="selector-tag">A</span>   H   N</span><br><span class="line"><span class="selector-tag">A</span> <span class="selector-tag">P</span> L S <span class="selector-tag">I</span> <span class="selector-tag">I</span> G</span><br><span class="line">Y   <span class="selector-tag">I</span>   R之后，你的输出需要从左往右逐行读取，产生出一个新的字符串，比如：&quot;PAHNAPLSIIGYIR&quot;。</span><br></pre></td></tr></table></figure>
<p>请你实现这个将字符串进行指定行数变换的函数：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">string <span class="title">convert</span><span class="params">(string s, <span class="keyword">int</span> numRows)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="6-2-示例"><a href="#6-2-示例" class="headerlink" title="6.2 示例"></a>6.2 示例</h2><h3 id="6-2-1-示例1"><a href="#6-2-1-示例1" class="headerlink" title="6.2.1 示例1"></a>6.2.1 示例1</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">输入：<span class="attr">s</span> = <span class="string">&quot;PAYPALISHIRING&quot;</span>, <span class="attr">numRows</span> = <span class="number">3</span></span><br><span class="line">输出：<span class="string">&quot;PAHNAPLSIIGYIR&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-2-2-示例2"><a href="#6-2-2-示例2" class="headerlink" title="6.2.2 示例2"></a>6.2.2 示例2</h3><figure class="highlight mathematica"><table><tr><td class="code"><pre><span class="line">输入：<span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;PAYPALISHIRING&quot;</span><span class="operator">,</span> <span class="variable">numRows</span> <span class="operator">=</span> <span class="number">4</span></span><br><span class="line">输出：<span class="string">&quot;PINALSIGYAHRPI&quot;</span></span><br><span class="line">解释：</span><br><span class="line"><span class="variable">P</span>     <span class="built_in">I</span>    <span class="built_in">N</span></span><br><span class="line"><span class="variable">A</span>   <span class="variable">L</span> <span class="variable">S</span>  <span class="built_in">I</span> <span class="variable">G</span></span><br><span class="line"><span class="variable">Y</span> <span class="variable">A</span>   <span class="variable">H</span> <span class="variable">R</span></span><br><span class="line"><span class="variable">P</span>     <span class="built_in">I</span></span><br></pre></td></tr></table></figure>
<h3 id="6-2-3-示例3"><a href="#6-2-3-示例3" class="headerlink" title="6.2.3 示例3"></a>6.2.3 示例3</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">输入：<span class="attr">s</span> = <span class="string">&quot;A&quot;</span>, <span class="attr">numRows</span> = <span class="number">1</span></span><br><span class="line">输出：<span class="string">&quot;A&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-3-提示"><a href="#6-3-提示" class="headerlink" title="6.3 提示"></a>6.3 提示</h2><ul>
<li>$1 &lt;= s.length &lt;= 1000$</li>
<li>s 由英文字母（小写和大写）、<code>&#39;,&#39;</code> 和 <code>&#39;.&#39;</code> 组成</li>
<li>$1 &lt;= numRows &lt;= 1000$</li>
</ul>
<h2 id="6-4-题解"><a href="#6-4-题解" class="headerlink" title="6.4 题解"></a>6.4 题解</h2><h3 id="6-4-1-解法一：二维矩阵模拟"><a href="#6-4-1-解法一：二维矩阵模拟" class="headerlink" title="6.4.1 解法一：二维矩阵模拟"></a>6.4.1 解法一：二维矩阵模拟</h3><h4 id="（1）思路-4"><a href="#（1）思路-4" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>这种解法比较简单粗暴，直接计算出包含Z字形的二维矩阵，只需要我们计算出行数和列数，则Z字形的创建就比较方便了</p>
<p>我们先来分析Z字形的规律，如下图所示：</p>
<img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/11.png" class="" width="11">
<p>图中表达的意思是Z字形以一个方格的内容为一个周期进行循环，形式化的表示是，当前字符会每隔$2 \cdot numRows-2$个字符进入到循环周期中，即字符串s中的第i个字符对应到下一个循环的字符应该是$i+2 \cdot numRows-2$，这对我们计算列数会很有用。</p>
<p>我们可以直接以$t=2 \cdot numRows-2$个字符为一个周期数，字符串$s$的长度记为$n$，那么总的周期数为$[\tfrac{n}{t}]$，而一个周期的列数为$r-2+1=r-1$，其中$r$就是$numRows$的值，那么总的列数就应该为$[\tfrac{n}{t}] \cdot (r-1)$</p>
<p>综上所述，得到的二维矩阵的行数为$r=numRows$，列数为$c=[\tfrac{n+t-1}{t}] \cdot (r-1)$</p>
<p>对于列数的计算需要注意：由于$[\tfrac{n}{t}]$是取整操作，如果字符串过长会超过计算的周期数，必须再加上一个周期数的列数，才能保证遍历时下标不会超出二维矩阵的列数范围，所以周期数的计算为我们这里写的$[\tfrac{n+t-1}{t}]$</p>
<h4 id="（2）实现"><a href="#（2）实现" class="headerlink" title="（2）实现"></a>（2）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String s, <span class="keyword">int</span> numRows)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length(), r = numRows;</span><br><span class="line">        <span class="comment">// 特殊情况：只要求完全在一列或一行显示</span></span><br><span class="line">        <span class="keyword">if</span> (r == <span class="number">1</span> || r &gt;= n) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> t = r * <span class="number">2</span> - <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> c = (n + t - <span class="number">1</span>) / t * (r - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">char</span>[][] mat = <span class="keyword">new</span> <span class="keyword">char</span>[r][c];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, x = <span class="number">0</span>, y = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            mat[x][y] = s.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (i % t &lt; r - <span class="number">1</span>) &#123;</span><br><span class="line">                ++x; <span class="comment">// 向下移动</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                --x;</span><br><span class="line">                ++y; <span class="comment">// 向右上移动</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuffer ans = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span>[] row : mat) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> ch : row) &#123;</span><br><span class="line">                <span class="keyword">if</span> (ch != <span class="number">0</span>) &#123;</span><br><span class="line">                    ans.append(ch);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（3）复杂度分析"><a href="#（3）复杂度分析" class="headerlink" title="（3）复杂度分析"></a>（3）复杂度分析</h4><ul>
<li>时间复杂度：$O(r \cdot n)$</li>
<li>空间复杂度：$O(r \cdot n)$</li>
</ul>
<h1 id="七、整数反转"><a href="#七、整数反转" class="headerlink" title="七、整数反转"></a>七、整数反转</h1><h2 id="7-1-题目"><a href="#7-1-题目" class="headerlink" title="7.1 题目"></a>7.1 题目</h2><p>给你一个 32 位的有符号整数 x ，返回将 x 中的数字部分反转后的结果。</p>
<p>如果反转后整数超过 32 位的有符号整数的范围 $[−2^{31},  2^{31} − 1]$ ，就返回 0。</p>
<p><strong>假设环境不允许存储 64 位整数（有符号或无符号）。</strong></p>
<h2 id="7-2-示例"><a href="#7-2-示例" class="headerlink" title="7.2 示例"></a>7.2 示例</h2><h3 id="7-2-1-示例1"><a href="#7-2-1-示例1" class="headerlink" title="7.2.1 示例1"></a>7.2.1 示例1</h3><figure class="highlight fix"><table><tr><td class="code"><pre><span class="line"><span class="attr">输入：x </span>=<span class="string"> 123</span></span><br><span class="line"><span class="string">输出：321</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-2-示例2"><a href="#7-2-2-示例2" class="headerlink" title="7.2.2 示例2"></a>7.2.2 示例2</h3><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">输入：x = <span class="string">-123</span></span><br><span class="line">输出：<span class="string">-321</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-3-示例3"><a href="#7-2-3-示例3" class="headerlink" title="7.2.3 示例3"></a>7.2.3 示例3</h3><figure class="highlight fix"><table><tr><td class="code"><pre><span class="line"><span class="attr">输入：x </span>=<span class="string"> 120</span></span><br><span class="line"><span class="string">输出：21</span></span><br></pre></td></tr></table></figure>
<h3 id="7-2-4-示例4"><a href="#7-2-4-示例4" class="headerlink" title="7.2.4 示例4"></a>7.2.4 示例4</h3><figure class="highlight fix"><table><tr><td class="code"><pre><span class="line"><span class="attr">输入：x </span>=<span class="string"> 0</span></span><br><span class="line"><span class="string">输出：0</span></span><br></pre></td></tr></table></figure>
<h2 id="7-3-提示"><a href="#7-3-提示" class="headerlink" title="7.3 提示"></a>7.3 提示</h2><ul>
<li>$-2^{31} &lt;= x &lt;= 2^{31} - 1$</li>
</ul>
<h2 id="7-4-题解"><a href="#7-4-题解" class="headerlink" title="7.4 题解"></a>7.4 题解</h2><h3 id="7-4-1-解法一：数学"><a href="#7-4-1-解法一：数学" class="headerlink" title="7.4.1 解法一：数学"></a>7.4.1 解法一：数学</h3><h4 id="（1）思路-5"><a href="#（1）思路-5" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>这道题直接按照数学上的计算过程来模拟即可</p>
<p>初始化一个整数$res=0$，逐位对输入的数字进行反转，假设对于一个数$x=123$，那么它的个位数为$digit = x\%10=3$，去掉个位数后的数字为$x = x/10 = 12$，之后更新$res = res \cdot 10 + digit$，直到$x$的值为$0$，即可得到我们最终反转的结果。</p>
<p>了解了反转数字的求解过程，接下来我们就需要考虑一个特殊情况，就是反转的数字可能会超过<strong>int整型</strong>的表示范围，对于这道题的一般理解的$res$范围如下：</p>
<p>$Integer.MIN_VALUE&lt;=res \cdot 10+digit&lt;=Integer.MAX_VALUE$</p>
<p>但是如果$res \cdot 10+digit$计算后超出了int的表示范围，那么后面的判断都会出错，所以我们就要单独处理这种情况。将上述等式做个等价转换如下（先考虑正数）：</p>
<p>$res \cdot 10+digit&lt;=\tfrac{Integer.MAX_VALUE}{10} \cdot 10+7$</p>
<p>那么就有：</p>
<p>$(res-\tfrac{Integer.MAX_VALUE}{10})  \cdot 10+digit&lt;=7$</p>
<p>需要注意的是我们这里输入的<strong>参数x</strong>也是一个<strong>int类型</strong>，因此在x的位数和<strong>Integer.MAX_VALUE</strong>一致时，<strong>参数x</strong>的最高位只能是1或者2，即$digit&lt;=2$，因为int的表示范围为$[-2^{31},2^{31}-1]=[-2147483648,2147483647]$</p>
<p>所以我们在计算$res$时，只需要判断$digit!=0$且满足以下两种情况即可直接判断出反转的数字超出了范围：</p>
<p>$res &gt; [\tfrac{Integer.MAX_VALUE}{10}]$</p>
<p>$res &lt; [\tfrac{Integer.MIN_VALUE}{10}]$</p>
<h4 id="（2）实现-1"><a href="#（2）实现-1" class="headerlink" title="（2）实现"></a>（2）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> rev = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (rev &lt; Integer.MIN_VALUE / <span class="number">10</span> || rev &gt; Integer.MAX_VALUE / <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> digit = x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">            rev = rev * <span class="number">10</span> + digit;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（3）复杂度分析-1"><a href="#（3）复杂度分析-1" class="headerlink" title="（3）复杂度分析"></a>（3）复杂度分析</h4><ul>
<li>时间复杂度：$O(logx)$，即参数x的位数</li>
<li>空间复杂度：$O(1)$</li>
</ul>
<h1 id="八、字符串转换整数（atoi）"><a href="#八、字符串转换整数（atoi）" class="headerlink" title="八、字符串转换整数（atoi）"></a>八、字符串转换整数（atoi）</h1><h2 id="8-1-题目"><a href="#8-1-题目" class="headerlink" title="8.1 题目"></a>8.1 题目</h2><p>请你来实现一个 myAtoi(string s) 函数，使其能将字符串转换成一个 32 位有符号整数（类似 C/C++ 中的 atoi 函数）。</p>
<p>函数 myAtoi(string s) 的算法如下：</p>
<ol>
<li>读入字符串并丢弃无用的前导空格</li>
<li>检查下一个字符（假设还未到字符末尾）为正还是负号，读取该字符（如果有）。 确定最终结果是负数还是正数。 如果两者都不存在，则假定结果为正。</li>
<li>读入下一个字符，直到到达下一个非数字字符或到达输入的结尾。字符串的其余部分将被忽略。</li>
<li>将前面步骤读入的这些数字转换为整数（即，”123” -&gt; 123， “0032” -&gt; 32）。如果没有读入数字，则整数为 0 。必要时更改符号（从步骤 2 开始）。</li>
<li>如果整数数超过 32 位有符号整数范围 $[−2^{31},  2^{31} − 1]$ ，需要截断这个整数，使其保持在这个范围内。具体来说，小于  $−2^{31}$ 的整数应该被固定为 $−2^{31}$ ，大于 $2^{31} − 1$ 的整数应该被固定为 $2^{31}$。</li>
<li>返回整数作为最终结果。</li>
</ol>
<p><strong>注意：</strong></p>
<ul>
<li>本题中的空白字符只包括空格字符 <code>&#39; &#39;</code> 。</li>
<li>除前导空格或数字后的其余字符串外，<strong>请勿忽略</strong> 任何其他字符。</li>
</ul>
<h2 id="8-2-示例"><a href="#8-2-示例" class="headerlink" title="8.2 示例"></a>8.2 示例</h2><h3 id="8-2-1-示例1"><a href="#8-2-1-示例1" class="headerlink" title="8.2.1 示例1"></a>8.2.1 示例1</h3><figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;42&quot;</span></span><br><span class="line">输出：<span class="number">42</span></span><br><span class="line">解释：加粗的字符串为已经读入的字符，插入符号是当前读取的字符。</span><br><span class="line">第 <span class="number">1</span> 步：<span class="string">&quot;42&quot;</span>（当前没有读入字符，因为没有前导空格）</span><br><span class="line">         ^</span><br><span class="line">第 <span class="number">2</span> 步：<span class="string">&quot;42&quot;</span>（当前没有读入字符，因为这里不存在 <span class="string">&#x27;-&#x27;</span> 或者 <span class="string">&#x27;+&#x27;</span>）</span><br><span class="line">         ^</span><br><span class="line">第 <span class="number">3</span> 步：<span class="string">&quot;42&quot;</span>（读入 <span class="string">&quot;42&quot;</span>）</span><br><span class="line">           ^</span><br><span class="line">解析得到整数 <span class="number">42</span> 。</span><br><span class="line">由于 <span class="string">&quot;42&quot;</span> 在范围 [<span class="number">-231</span>, <span class="number">231</span> - <span class="number">1</span>] 内，最终结果为 <span class="number">42</span> 。</span><br></pre></td></tr></table></figure>
<h3 id="8-2-2-示例2"><a href="#8-2-2-示例2" class="headerlink" title="8.2.2 示例2"></a>8.2.2 示例2</h3><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">输入：s = &quot;   <span class="string">-42</span>&quot;</span><br><span class="line">输出：<span class="string">-42</span></span><br><span class="line">解释：</span><br><span class="line">第 1 步：&quot;   <span class="string">-42</span>&quot;（读入前导空格，但忽视掉）</span><br><span class="line">            ^</span><br><span class="line">第 2 步：&quot;   <span class="string">-42</span>&quot;（读入 &#x27;-&#x27; 字符，所以结果应该是负数）</span><br><span class="line">             ^</span><br><span class="line">第 3 步：&quot;   <span class="string">-42</span>&quot;（读入 &quot;42&quot;）</span><br><span class="line">               ^</span><br><span class="line">解析得到整数 <span class="string">-42</span> 。</span><br><span class="line">由于 &quot;<span class="string">-42</span>&quot; 在范围 [<span class="string">-231</span>, 231 - 1] 内，最终结果为 <span class="string">-42</span> 。</span><br></pre></td></tr></table></figure>
<h3 id="8-2-3-示例3"><a href="#8-2-3-示例3" class="headerlink" title="8.2.3 示例3"></a>8.2.3 示例3</h3><figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;4193 with words&quot;</span></span><br><span class="line">输出：<span class="number">4193</span></span><br><span class="line">解释：</span><br><span class="line">第 <span class="number">1</span> 步：<span class="string">&quot;4193 with words&quot;</span>（当前没有读入字符，因为没有前导空格）</span><br><span class="line">         ^</span><br><span class="line">第 <span class="number">2</span> 步：<span class="string">&quot;4193 with words&quot;</span>（当前没有读入字符，因为这里不存在 <span class="string">&#x27;-&#x27;</span> 或者 <span class="string">&#x27;+&#x27;</span>）</span><br><span class="line">         ^</span><br><span class="line">第 <span class="number">3</span> 步：<span class="string">&quot;4193 with words&quot;</span>（读入 <span class="string">&quot;4193&quot;</span>；由于下一个字符不是一个数字，所以读入停止）</span><br><span class="line">             ^</span><br><span class="line">解析得到整数 <span class="number">4193</span> 。</span><br><span class="line">由于 <span class="string">&quot;4193&quot;</span> 在范围 [<span class="number">-231</span>, <span class="number">231</span> - <span class="number">1</span>] 内，最终结果为 <span class="number">4193</span> 。</span><br></pre></td></tr></table></figure>
<h2 id="8-3-提示"><a href="#8-3-提示" class="headerlink" title="8.3 提示"></a>8.3 提示</h2><ul>
<li><code>0 &lt;= s.length &lt;= 200</code></li>
<li><code>s</code> 由英文字母（大写和小写）、数字（<code>0-9</code>）、<code>&#39; &#39;</code>、<code>&#39;+&#39;</code>、<code>&#39;-&#39;</code> 和 <code>&#39;.&#39;</code> 组成</li>
</ul>
<h2 id="8-4-题解"><a href="#8-4-题解" class="headerlink" title="8.4 题解"></a>8.4 题解</h2><h3 id="8-4-1-方法一：状态机"><a href="#8-4-1-方法一：状态机" class="headerlink" title="8.4.1 方法一：状态机"></a>8.4.1 方法一：状态机</h3><h4 id="（1）思路-6"><a href="#（1）思路-6" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>这题使用的方法是有限状态机的思想，遍历每个字符，并根据字符调整状态机的状态，以下是状态调整的规则：</p>
<img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/12.png" class="" width="12">
<p>表格形式如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:center">‘’</th>
<th style="text-align:center">+/-</th>
<th style="text-align:center">number</th>
<th style="text-align:center">other</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">start</td>
<td style="text-align:center">start</td>
<td style="text-align:center">signed</td>
<td style="text-align:center">in_number</td>
<td style="text-align:center">end</td>
</tr>
<tr>
<td style="text-align:left">signed</td>
<td style="text-align:center">end</td>
<td style="text-align:center">end</td>
<td style="text-align:center">in_number</td>
<td style="text-align:center">end</td>
</tr>
<tr>
<td style="text-align:left">in_number</td>
<td style="text-align:center">end</td>
<td style="text-align:center">end</td>
<td style="text-align:center">in_number</td>
<td style="text-align:center">end</td>
</tr>
<tr>
<td style="text-align:left">end</td>
<td style="text-align:center">end</td>
<td style="text-align:center">end</td>
<td style="text-align:center">end</td>
<td style="text-align:center">end</td>
</tr>
</tbody>
</table>
</div>
<p>总结起来就是，设定四个状态start，signed，in_number，end，每个状态的含义如下：</p>
<p><strong>start：开始状态</strong></p>
<p><strong>signed：符号判定状态</strong></p>
<p><strong>in_number：数字整合状态</strong></p>
<p><strong>end：结束操作状态</strong></p>
<p>对于此题需要注意以下一些特殊情况：</p>
<p>”      123   abc123“：返回值为123，也就是说如果判定后面有了其他字符，即便后面还有数字也不会添加到返回值中</p>
<p>”      abc   123“：这里空格后的第一个字符是非数字的，那么这样就不必继续判断下去了</p>
<p>理解了上述两种特殊情况，对有限状态机的转换就能更清晰一点了</p>
<h4 id="（2）实现-2"><a href="#（2）实现-2" class="headerlink" title="（2）实现"></a>（2）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">myAtoi</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        Automaton automaton = <span class="keyword">new</span> Automaton();</span><br><span class="line">        <span class="keyword">int</span> length = str.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; ++i) &#123;</span><br><span class="line">            automaton.get(str.charAt(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) (automaton.sign * automaton.ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Automaton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> String state = <span class="string">&quot;start&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String[]&gt; table = <span class="keyword">new</span> HashMap&lt;String, String[]&gt;() &#123;&#123;</span><br><span class="line">        put(<span class="string">&quot;start&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;start&quot;</span>, <span class="string">&quot;signed&quot;</span>, <span class="string">&quot;in_number&quot;</span>, <span class="string">&quot;end&quot;</span>&#125;);</span><br><span class="line">        put(<span class="string">&quot;signed&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;end&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;in_number&quot;</span>, <span class="string">&quot;end&quot;</span>&#125;);</span><br><span class="line">        put(<span class="string">&quot;in_number&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;end&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;in_number&quot;</span>, <span class="string">&quot;end&quot;</span>&#125;);</span><br><span class="line">        put(<span class="string">&quot;end&quot;</span>, <span class="keyword">new</span> String[]&#123;<span class="string">&quot;end&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;end&quot;</span>, <span class="string">&quot;end&quot;</span>&#125;);</span><br><span class="line">    &#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        state = table.get(state)[get_col(c)];</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;in_number&quot;</span>.equals(state)) &#123;</span><br><span class="line">            ans = ans * <span class="number">10</span> + c - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">            ans = sign == <span class="number">1</span> ? Math.min(ans, (<span class="keyword">long</span>) Integer.MAX_VALUE) : Math.min(ans, -(<span class="keyword">long</span>) Integer.MIN_VALUE);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;signed&quot;</span>.equals(state)) &#123;</span><br><span class="line">            sign = c == <span class="string">&#x27;+&#x27;</span> ? <span class="number">1</span> : -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">get_col</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27; &#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">&#x27;+&#x27;</span> || c == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (Character.isDigit(c)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="九、回文数"><a href="#九、回文数" class="headerlink" title="九、回文数"></a>九、回文数</h1><h2 id="9-1-题目"><a href="#9-1-题目" class="headerlink" title="9.1 题目"></a>9.1 题目</h2><p>给你一个整数 x ，如果 x 是一个回文整数，返回 true ；否则，返回 false 。</p>
<p>回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</p>
<ul>
<li>例如，121 是回文，而 123 不是。</li>
</ul>
<h2 id="9-2-示例"><a href="#9-2-示例" class="headerlink" title="9.2 示例"></a>9.2 示例</h2><h3 id="9-2-1-示例1"><a href="#9-2-1-示例1" class="headerlink" title="9.2.1 示例1"></a>9.2.1 示例1</h3><figure class="highlight llvm"><table><tr><td class="code"><pre><span class="line">输入：<span class="keyword">x</span> <span class="operator">=</span> <span class="number">121</span></span><br><span class="line">输出：<span class="keyword">true</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-2-示例2"><a href="#9-2-2-示例2" class="headerlink" title="9.2.2 示例2"></a>9.2.2 示例2</h3><figure class="highlight llvm"><table><tr><td class="code"><pre><span class="line">输入：<span class="keyword">x</span> <span class="operator">=</span> <span class="number">-121</span></span><br><span class="line">输出：<span class="keyword">false</span></span><br><span class="line">解释：从左向右读<span class="punctuation">,</span> 为 <span class="number">-121</span> 。 从右向左读<span class="punctuation">,</span> 为 <span class="number">121</span>- 。因此它不是一个回文数。</span><br></pre></td></tr></table></figure>
<h3 id="9-2-3-示例3"><a href="#9-2-3-示例3" class="headerlink" title="9.2.3 示例3"></a>9.2.3 示例3</h3><figure class="highlight llvm"><table><tr><td class="code"><pre><span class="line">输入：<span class="keyword">x</span> <span class="operator">=</span> <span class="number">10</span></span><br><span class="line">输出：<span class="keyword">false</span></span><br><span class="line">解释：从右向左读<span class="punctuation">,</span> 为 <span class="number">01</span> 。因此它不是一个回文数。</span><br></pre></td></tr></table></figure>
<h2 id="9-3-提示"><a href="#9-3-提示" class="headerlink" title="9.3 提示"></a>9.3 提示</h2><ul>
<li>$-2^{31} &lt;= x &lt;= 2^{31} - 1$</li>
</ul>
<h2 id="9-4-题解"><a href="#9-4-题解" class="headerlink" title="9.4 题解"></a>9.4 题解</h2><h3 id="9-4-1-方法一：直接反转"><a href="#9-4-1-方法一：直接反转" class="headerlink" title="9.4.1 方法一：直接反转"></a>9.4.1 方法一：直接反转</h3><h4 id="（1）思路-7"><a href="#（1）思路-7" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>这种思路的解法非常容易理解，就是将数字整个反转过来，再比较反转后的数字与原来的数字是否相同</p>
<p>关于数字反转的操作也不复杂，就是不停的取输入数字的个位数，并将其作为反转数字的个位数即可，反转数字的计算类似于尾插法。</p>
<p>如果想减少时间复杂度，那么反转数字就应该计算到原数字的一半的位置即可。</p>
<h4 id="（2）实现-3"><a href="#（2）实现-3" class="headerlink" title="（2）实现"></a>（2）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">int</span> a = x;</span><br><span class="line">        <span class="keyword">int</span> inverse=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(a!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> digit = a%<span class="number">10</span>;</span><br><span class="line">            a=a/<span class="number">10</span>;</span><br><span class="line">            inverse = inverse * <span class="number">10</span> + digit;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> inverse == x ? <span class="keyword">true</span>:<span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="9-4-2-方法二：反转一半"><a href="#9-4-2-方法二：反转一半" class="headerlink" title="9.4.2 方法二：反转一半"></a>9.4.2 方法二：反转一半</h3><h4 id="（1）思路-8"><a href="#（1）思路-8" class="headerlink" title="（1）思路"></a>（1）思路</h4><h4 id="（2）实现-4"><a href="#（2）实现-4" class="headerlink" title="（2）实现"></a>（2）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 特殊情况：</span></span><br><span class="line">        <span class="comment">// 如上所述，当 x &lt; 0 时，x 不是回文数。</span></span><br><span class="line">        <span class="comment">// 同样地，如果数字的最后一位是 0，为了使该数字为回文，</span></span><br><span class="line">        <span class="comment">// 则其第一位数字也应该是 0</span></span><br><span class="line">        <span class="comment">// 只有 0 满足这一属性</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> revertedNumber = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; revertedNumber) &#123;</span><br><span class="line">            revertedNumber = revertedNumber * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">            x /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 当数字长度为奇数时，我们可以通过 revertedNumber/10 去除处于中位的数字。</span></span><br><span class="line">        <span class="comment">// 例如，当输入为 12321 时，在 while 循环的末尾我们可以得到 x = 12，revertedNumber = 123，</span></span><br><span class="line">        <span class="comment">// 由于处于中位的数字不影响回文（它总是与自己相等），所以我们可以简单地将其去除。</span></span><br><span class="line">        <span class="keyword">return</span> x == revertedNumber || x == revertedNumber / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十、正则表达式匹配"><a href="#十、正则表达式匹配" class="headerlink" title="十、正则表达式匹配"></a>十、正则表达式匹配</h1><h2 id="10-1-题目"><a href="#10-1-题目" class="headerlink" title="10.1 题目"></a>10.1 题目</h2><p>给你一个字符串 s 和一个字符规律 p，请你来实现一个支持 ‘.’ 和 ‘*’ 的正则表达式匹配。</p>
<ul>
<li>‘.’ 匹配任意单个字符</li>
<li>‘*’ 匹配零个或多个前面的那一个元素</li>
</ul>
<p>所谓匹配，是要涵盖<strong>整个</strong>字符串s的，而不是部分字符串。</p>
<h2 id="10-2-示例"><a href="#10-2-示例" class="headerlink" title="10.2 示例"></a>10.2 示例</h2><h3 id="10-2-1-示例1"><a href="#10-2-1-示例1" class="headerlink" title="10.2.1 示例1"></a>10.2.1 示例1</h3><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">输入：<span class="attr">s</span> = <span class="string">&quot;aa&quot;</span>, <span class="attr">p</span> = <span class="string">&quot;a&quot;</span></span><br><span class="line">输出：<span class="literal">false</span></span><br><span class="line">解释：<span class="string">&quot;a&quot;</span> 无法匹配 <span class="string">&quot;aa&quot;</span> 整个字符串。</span><br></pre></td></tr></table></figure>
<h3 id="10-2-2-示例2"><a href="#10-2-2-示例2" class="headerlink" title="10.2.2 示例2"></a>10.2.2 示例2</h3><figure class="highlight smalltalk"><table><tr><td class="code"><pre><span class="line">输入：s = <span class="comment">&quot;aa&quot;</span>, p = <span class="comment">&quot;a*&quot;</span></span><br><span class="line">输出：<span class="keyword">true</span></span><br><span class="line">解释：因为 <span class="string">&#x27;*&#x27;</span> 代表可以匹配零个或多个前面的那一个元素, 在这里前面的元素就是 <span class="string">&#x27;a&#x27;</span>。因此，字符串 <span class="comment">&quot;aa&quot;</span> 可被视为 <span class="string">&#x27;a&#x27;</span> 重复了一次。</span><br></pre></td></tr></table></figure>
<h3 id="10-2-3-示例3"><a href="#10-2-3-示例3" class="headerlink" title="10.2.3 示例3"></a>10.2.3 示例3</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">输入：s = <span class="string">&quot;ab&quot;</span>, p = <span class="string">&quot;.*&quot;</span></span><br><span class="line">输出：<span class="literal">true</span></span><br><span class="line">解释：<span class="string">&quot;.*&quot;</span> 表示可匹配零个或多个（<span class="string">&#x27;*&#x27;</span>）任意字符（<span class="string">&#x27;.&#x27;</span>）。</span><br></pre></td></tr></table></figure>
<h2 id="10-3-提示"><a href="#10-3-提示" class="headerlink" title="10.3 提示"></a>10.3 提示</h2><ul>
<li>1 &lt;= s.length &lt;= 20</li>
<li>1 &lt;= p.length &lt;= 30</li>
<li>s 只包含从 a-z 的小写字母。</li>
<li>p 只包含从 a-z 的小写字母，以及字符 . 和 *。</li>
<li>保证每次出现字符 * 时，前面都匹配到有效的字符</li>
</ul>
<h2 id="10-4-题解"><a href="#10-4-题解" class="headerlink" title="10.4 题解"></a>10.4 题解</h2><h3 id="10-4-1-方法一：动态规划"><a href="#10-4-1-方法一：动态规划" class="headerlink" title="10.4.1 方法一：动态规划"></a>10.4.1 方法一：动态规划</h3><h4 id="（1）思路-9"><a href="#（1）思路-9" class="headerlink" title="（1）思路"></a>（1）思路</h4><p>这里的题解思路是维护一个二维bool数组$f(m,n)$，用来存放原字符串$s$的第$i-1$个字符和模式串$p$的第$j-1$个字符的匹配结果</p>
<p>状态转移方程：</p>
<p>$f[i][j]=\begin{cases} if(p[j] \neq ‘\ast’)=\begin{cases} f[i-1][j-1], &amp; matches(s[i],p[j]) \\ false, &amp; othervies \end{cases} \\ otherwise = \begin{cases} f[i-1][j]orf[i][j-2], &amp; matches(s[i],p[j-1]) \\ f[i][j-2], &amp; otherwise \end{cases} \end{cases}$</p>
<p>这个状态转移方程确实挺复杂，理解起来不是很容易，我们先拆分来看</p>
<p>对于第一种情况，即$p[j] \neq ‘\ast’$这中情况，我们只需要比较$s[i]$和$p[j]$即可，如果它俩相等了，说明他俩对结果的影响不大了，$f[i][j]$只和前一个状态$f[i-1][j-1]$有关。如果它俩不相等，那么$f[i][j]$肯定是$false$</p>
<p>那么第二种情况，即$p[j]=’\ast’$的情况，因为$\ast$是对前一个字符匹配任意多次，所以我们应该比较的是$s[i]$和$p[j-1]$对应的字符，如果它俩相等了，那它们就不会影响当前状态的结果，那么$f[i][j]$只和前一个状态有关，这里写的是$f[i-1][j]$和$f[i][j-2]$</p>
<p>$f[i-1][j]$表示的是$s[i-1]$和$p[j]$比较的结果</p>
<p>$f[i][j-2]$表示的是$s[i]$和$p[j-2]$比较的结果，之所以是$j-2$是因为，匹配结果无关后，$\ast$和前一个字符所占的两个位置不会影响结果，因此前一个状态应该是要排除这两个字符的</p>
<h4 id="（2）步骤-4"><a href="#（2）步骤-4" class="headerlink" title="（2）步骤"></a>（2）步骤</h4><img src="/2022/03/08/Java%E7%AE%97%E6%B3%95%E5%A4%A7%E5%85%A8%E4%B8%80/13.png" class="" title="13a">
<h4 id="（3）实现-5"><a href="#（3）实现-5" class="headerlink" title="（3）实现"></a>（3）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isMatch</span><span class="params">(String s, String p)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = s.length();</span><br><span class="line">        <span class="keyword">int</span> n = p.length();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span>[][] f = <span class="keyword">new</span> <span class="keyword">boolean</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p.charAt(j - <span class="number">1</span>) == <span class="string">&#x27;*&#x27;</span>) &#123;</span><br><span class="line">                    f[i][j] = f[i][j - <span class="number">2</span>];</span><br><span class="line">                    <span class="keyword">if</span> (matches(s, p, i, j - <span class="number">1</span>)) &#123;</span><br><span class="line">                        f[i][j] = f[i][j] || f[i - <span class="number">1</span>][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (matches(s, p, i, j)) &#123;</span><br><span class="line">                        f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[m][n];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(String s, String p, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p.charAt(j - <span class="number">1</span>) == <span class="string">&#x27;.&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s.charAt(i - <span class="number">1</span>) == p.charAt(j - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>计算机基础</category>
        <category>算法</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Java进阶大全一</title>
    <url>/2022/03/02/Java%E8%BF%9B%E9%98%B6%E5%A4%A7%E5%85%A8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、容器"><a href="#一、容器" class="headerlink" title="一、容器"></a>一、容器</h1><h2 id="1-1-介绍"><a href="#1-1-介绍" class="headerlink" title="1.1 介绍"></a>1.1 介绍</h2><ul>
<li>数组本身是一种容器，劣势是不灵活，长度固定，方法有限，只能存储有序、可重复的数据</li>
<li>容器：在Java当中，如果有一个类专门用来存放其它类的对象，这个类就叫做容器，或者就叫做集合，集合就是将若干性质相同或相近的类对象组合在一起而形成的一个整体</li>
</ul>
<img src="/2022/03/02/Java%E8%BF%9B%E9%98%B6%E5%A4%A7%E5%85%A8%E4%B8%80/Java%E5%AE%B9%E5%99%A8.png" class="" title="image">
<ul>
<li>从上面的集合框架图可以看到，Java 集合框架主要包括两种类型的容器，一种是集合（Collection），存储一个元素集合，另一种是图（Map），存储键/值对映射。Collection 接口又有 3 种子类型，List、Set 和 Queue，再下面是一些抽象类，最后是具体实现类，常用的有 ArrayList、LinkedList、HashSet、LinkedHashSet、HashMap、LinkedHashMap 等等</li>
</ul>
<h2 id="1-2-接口方法"><a href="#1-2-接口方法" class="headerlink" title="1.2 接口方法"></a>1.2 接口方法</h2><h3 id="1-2-1-Collection"><a href="#1-2-1-Collection" class="headerlink" title="1.2.1 Collection"></a>1.2.1 Collection</h3><p>以下方法都是见名知意，就不做解释了</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>size():int</td>
</tr>
<tr>
<td>isEmpty():boolean</td>
</tr>
<tr>
<td>contains(Object):</td>
</tr>
<tr>
<td>iterator():iterator\<E\></td>
</tr>
<tr>
<td>toArray():Object[]</td>
</tr>
<tr>
<td>add(E):boolean</td>
</tr>
<tr>
<td>remove(Object):boolean</td>
</tr>
<tr>
<td>containsAll(Collection&lt;?&gt;):boolean</td>
</tr>
<tr>
<td>addAll(Collection&lt;? extends E&gt;):boolean</td>
</tr>
<tr>
<td>removeAll(Collection&lt;?&gt;):boolean</td>
</tr>
<tr>
<td>clear():void</td>
</tr>
</tbody>
</table>
</div>
<h3 id="1-2-2-Map"><a href="#1-2-2-Map" class="headerlink" title="1.2.2 Map"></a>1.2.2 Map<K,V></h3><ul>
<li>以下方法都是见名知意，就不做解释了</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>size():int</td>
</tr>
<tr>
<td>isEmpty():boolean</td>
</tr>
<tr>
<td>containsKey(Object):boolean</td>
</tr>
<tr>
<td>containsValue(Object):boolean</td>
</tr>
<tr>
<td>get(Object):V</td>
</tr>
<tr>
<td>put(K,V):V</td>
</tr>
<tr>
<td>remove(Object):V</td>
</tr>
<tr>
<td>putAll(Map&lt;? extends K,?extends V&gt;):void</td>
</tr>
<tr>
<td>clear():void</td>
</tr>
<tr>
<td>ketSet():Set\<K\></td>
</tr>
<tr>
<td>values():Collection\<V\></td>
</tr>
<tr>
<td>equals(Object):boolean</td>
</tr>
</tbody>
</table>
</div>
<h1 id="二、泛型"><a href="#二、泛型" class="headerlink" title="二、泛型"></a>二、泛型</h1><h2 id="2-1-基础"><a href="#2-1-基础" class="headerlink" title="2.1 基础"></a>2.1 基础</h2><ul>
<li>将数据类型作为参数，进行变量的声明</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// &lt;&gt;,可以用T,E,V表示，代表需要接受的数据类型的参数</span></span><br><span class="line"><span class="comment">// 可以通过MyCollect&lt;String&gt; mc=new MyCollection&lt;String&gt;();创建对象</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCollect</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    Object[] objs = <span class="keyword">new</span> Object[<span class="number">5</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(E e,<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">        objs[index] = e;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (E)objs[index];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-2-泛型方法"><a href="#2-2-泛型方法" class="headerlink" title="2.2 泛型方法"></a>2.2 泛型方法</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericMethodTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="comment">// 泛型方法 printArray                         </span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> &lt; E &gt; <span class="function"><span class="keyword">void</span> <span class="title">printArray</span><span class="params">( E[] inputArray )</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="comment">// 输出数组元素            </span></span><br><span class="line">         <span class="keyword">for</span> ( E element : inputArray )&#123;        </span><br><span class="line">            System.out.printf( <span class="string">&quot;%s &quot;</span>, element );</span><br><span class="line">         &#125;</span><br><span class="line">         System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String args[] )</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 创建不同类型数组： Integer, Double 和 Character</span></span><br><span class="line">        Integer[] intArray = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line">        Double[] doubleArray = &#123; <span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">4.4</span> &#125;;</span><br><span class="line">        Character[] charArray = &#123; <span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;L&#x27;</span>, <span class="string">&#x27;O&#x27;</span> &#125;;</span><br><span class="line"> </span><br><span class="line">        System.out.println( <span class="string">&quot;整型数组元素为:&quot;</span> );</span><br><span class="line">        printArray( intArray  ); <span class="comment">// 传递一个整型数组</span></span><br><span class="line"> </span><br><span class="line">        System.out.println( <span class="string">&quot;\n双精度型数组元素为:&quot;</span> );</span><br><span class="line">        printArray( doubleArray ); <span class="comment">// 传递一个双精度型数组</span></span><br><span class="line"> </span><br><span class="line">        System.out.println( <span class="string">&quot;\n字符型数组元素为:&quot;</span> );</span><br><span class="line">        printArray( charArray ); <span class="comment">// 传递一个字符型数组</span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">整型数组元素为:</span></span><br><span class="line"><span class="comment">1 2 3 4 5 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">双精度型数组元素为:</span></span><br><span class="line"><span class="comment">1.1 2.2 3.3 4.4 </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">字符型数组元素为:</span></span><br><span class="line"><span class="comment">H E L L O </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-1-有界的类型参数"><a href="#2-2-1-有界的类型参数" class="headerlink" title="2.2.1 有界的类型参数"></a>2.2.1 有界的类型参数</h3><ul>
<li><p>可能有时候，你会想限制那些被允许传递到一个类型参数的类型种类范围。例如，一个操作数字的方法可能只希望接受Number或者Number子类的实例。这就是有界类型参数的目的。</p>
</li>
<li><p>要声明一个有界的类型参数，首先列出类型参数的名称，后跟extends关键字，最后紧跟它的上界。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaximumTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="comment">// 比较三个值并返回最大值</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&lt;T&gt;&gt; <span class="function">T <span class="title">maximum</span><span class="params">(T x, T y, T z)</span></span></span><br><span class="line"><span class="function">   </span>&#123;                     </span><br><span class="line">      T max = x; <span class="comment">// 假设x是初始最大值</span></span><br><span class="line">      <span class="keyword">if</span> ( y.compareTo( max ) &gt; <span class="number">0</span> )&#123;</span><br><span class="line">         max = y; <span class="comment">//y 更大</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> ( z.compareTo( max ) &gt; <span class="number">0</span> )&#123;</span><br><span class="line">         max = z; <span class="comment">// 现在 z 更大           </span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> max; <span class="comment">// 返回最大对象</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String args[] )</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      System.out.printf( <span class="string">&quot;%d, %d 和 %d 中最大的数为 %d\n\n&quot;</span>,</span><br><span class="line">                   <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, maximum( <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> ) );</span><br><span class="line"> </span><br><span class="line">      System.out.printf( <span class="string">&quot;%.1f, %.1f 和 %.1f 中最大的数为 %.1f\n\n&quot;</span>,</span><br><span class="line">                   <span class="number">6.6</span>, <span class="number">8.8</span>, <span class="number">7.7</span>, maximum( <span class="number">6.6</span>, <span class="number">8.8</span>, <span class="number">7.7</span> ) );</span><br><span class="line"> </span><br><span class="line">      System.out.printf( <span class="string">&quot;%s, %s 和 %s 中最大的数为 %s\n&quot;</span>,<span class="string">&quot;pear&quot;</span>,</span><br><span class="line">         <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, maximum( <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span> ) );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">3, 4 和 5 中最大的数为 5</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">6.6, 8.8 和 7.7 中最大的数为 8.8</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">pear, apple 和 orange 中最大的数为 pear</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2-3-泛型类"><a href="#2-3-泛型类" class="headerlink" title="2.3 泛型类"></a>2.3 泛型类</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Box</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">   </span><br><span class="line">  <span class="keyword">private</span> T t;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.t = t;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Box&lt;Integer&gt; integerBox = <span class="keyword">new</span> Box&lt;Integer&gt;();</span><br><span class="line">    Box&lt;String&gt; stringBox = <span class="keyword">new</span> Box&lt;String&gt;();</span><br><span class="line"> </span><br><span class="line">    integerBox.add(<span class="keyword">new</span> Integer(<span class="number">10</span>));</span><br><span class="line">    stringBox.add(<span class="keyword">new</span> String(<span class="string">&quot;菜鸟教程&quot;</span>));</span><br><span class="line"> </span><br><span class="line">    System.out.printf(<span class="string">&quot;整型值为 :%d\n\n&quot;</span>, integerBox.get());</span><br><span class="line">    System.out.printf(<span class="string">&quot;字符串为 :%s\n&quot;</span>, stringBox.get());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">整型值为 :10</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">字符串为 :菜鸟教程</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="2-4-类通配符"><a href="#2-4-类通配符" class="headerlink" title="2.4 类通配符"></a>2.4 类通配符</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericTest</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; name = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        List&lt;Integer&gt; age = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        List&lt;Number&gt; number = <span class="keyword">new</span> ArrayList&lt;Number&gt;();</span><br><span class="line">        </span><br><span class="line">        name.add(<span class="string">&quot;icon&quot;</span>);</span><br><span class="line">        age.add(<span class="number">18</span>);</span><br><span class="line">        number.add(<span class="number">314</span>);</span><br><span class="line"> </span><br><span class="line">        getData(name);</span><br><span class="line">        getData(age);</span><br><span class="line">        getData(number);</span><br><span class="line">       </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getData</span><span class="params">(List&lt;?&gt; data)</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;data :&quot;</span> + data.get(<span class="number">0</span>));</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">data :icon</span></span><br><span class="line"><span class="comment">data :18</span></span><br><span class="line"><span class="comment">data :314</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>类型通配符上限通过形如List来定义，如此定义就是通配符泛型值接受Number及其下层子类类型。</li>
<li><p>在(//1)处会出现错误，因为getUperNumber()方法中的参数已经限定了参数泛型上限为Number，所以泛型为String是不在这个范围之内，所以会报错</p>
</li>
<li><p>类型通配符下限通过形如 List&lt;? super Number&gt;来定义，表示类型只能接受Number及其三层父类类型，如 Object 类型的实例。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericTest</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; name = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        List&lt;Integer&gt; age = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        List&lt;Number&gt; number = <span class="keyword">new</span> ArrayList&lt;Number&gt;();</span><br><span class="line">        </span><br><span class="line">        name.add(<span class="string">&quot;icon&quot;</span>);</span><br><span class="line">        age.add(<span class="number">18</span>);</span><br><span class="line">        number.add(<span class="number">314</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">//getUperNumber(name);//1</span></span><br><span class="line">        getUperNumber(age);<span class="comment">//2</span></span><br><span class="line">        getUperNumber(number);<span class="comment">//3</span></span><br><span class="line">       </span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getData</span><span class="params">(List&lt;?&gt; data)</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;data :&quot;</span> + data.get(<span class="number">0</span>));</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getUperNumber</span><span class="params">(List&lt;? extends Number&gt; data)</span> </span>&#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;data :&quot;</span> + data.get(<span class="number">0</span>));</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">data :18</span></span><br><span class="line"><span class="comment">data :314</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="三、注解"><a href="#三、注解" class="headerlink" title="三、注解"></a>三、注解</h1><h2 id="3-1-注解的定义"><a href="#3-1-注解的定义" class="headerlink" title="3.1 注解的定义"></a>3.1 注解的定义</h2><ul>
<li>注解（Annotation），也叫元数据。一种代码级别的说明。它是JDK1.5及以后版本引入的一个特性，与类、接口、枚举是在同一个层次。它可以声明在包、类、字段、方法、局部变量、方法参数等的前面，用来对这些元素进行说明，注释。</li>
</ul>
<h2 id="3-2-注解的作用"><a href="#3-2-注解的作用" class="headerlink" title="3.2 注解的作用"></a>3.2 注解的作用</h2><ul>
<li>生成文档。这是最常见的，也是java 最早提供的注解。常用的有@see @param @return 等；</li>
<li>在编译时进行格式检查。如@Override放在方法前，如果你这个方法并不是覆盖了超类方法，则编译时就能检查出；</li>
<li>跟踪代码依赖性，实现替代配置文件功能。比较常见的是spring 2.5 开始的基于注解配置。作用就是减少配置。现在的框架基本都使用了这种配置来减少配置文件的数量；</li>
<li>在反射的 Class, Method, Field 等函数中，有许多于 Annotation 相关的接口。可以在反射中解析并使用 Annotation。</li>
</ul>
<h2 id="3-3-注解类的写法"><a href="#3-3-注解类的写法" class="headerlink" title="3.3 注解类的写法"></a>3.3 注解类的写法</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> @<span class="keyword">interface</span> <span class="symbol">MyTestAnnotation</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>作用在类上<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="meta">@MyTestAnnotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="meta">@MyTestAnnotation</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="function"><span class="title">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>)</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-4-元注解"><a href="#3-4-元注解" class="headerlink" title="3.4 元注解"></a>3.4 元注解</h2><ul>
<li>元注解：作用在注解上的 注解，方便实现注解想要的功能</li>
<li>元注解有五种<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@Retention</span></span><br><span class="line"><span class="variable">@Target</span></span><br><span class="line"><span class="variable">@Document</span></span><br><span class="line"><span class="variable">@Inherited</span></span><br><span class="line"><span class="variable">@Repeatable</span></span><br></pre></td></tr></table></figure>
<h3 id="3-4-1-Retention"><a href="#3-4-1-Retention" class="headerlink" title="3.4.1 @Retention"></a>3.4.1 @Retention</h3></li>
<li>Retention：有保留保持的意思，表示注解存在的阶段是保留在源码(编译期)，字节码(类加载)，或者运行期(jvm中运行)，使用RetentionPolicy来表示注解的保留时期</li>
<li>一般使用RetentionPolicy.RUNTIME<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.SOURCE) <span class="comment">// 尽存在于源码中，class字节码中不存在</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.CLASS) <span class="comment">// class字节码文件中存在，运行时无法获得</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME) <span class="comment">// 在class字节码文件中存在，运行时可通过反射获得</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-4-2-Target"><a href="#3-4-2-Target" class="headerlink" title="3.4.2 @Target"></a>3.4.2 @Target</h3><ul>
<li>Target：目标的意思，表示设置注解作用的目标范围；通过ElementType表达作用类型</li>
<li>一般使用ElementType.TYPE<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@Target</span>(ElementType.TYPE) <span class="comment">// 作用于接口、枚举、注解</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.FIELD) <span class="comment">// 作用于属性字段、枚举的常量</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.METHOD) <span class="comment">// 作用于方法</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.PARAMETER) <span class="comment">// 作用于方法参数</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.CONSTRUCTOR) <span class="comment">// 作用于构造函数</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.LOCAL_VALUABLE) <span class="comment">// 作用于局部变量</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.ANNOTATION_TYPE) <span class="comment">// 作用于注解</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.PACKAGE) <span class="comment">// 作用于包</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.TYPE_PARAMETER) <span class="comment">// 作用于类型泛型，及泛型类、泛型方法、泛型接口</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.TYPE_USE) <span class="comment">// 可以标注任意类型，除了class</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-4-3-Documented"><a href="#3-4-3-Documented" class="headerlink" title="3.4.3 @Documented"></a>3.4.3 @Documented</h3><ul>
<li>Document是文档的意思，作用是将注解中的元素包含到Javadoc中去</li>
</ul>
<h3 id="3-4-4-Inherited"><a href="#3-4-4-Inherited" class="headerlink" title="3.4.4 @Inherited"></a>3.4.4 @Inherited</h3><ul>
<li>Inherited是继承的意思</li>
<li>一个被该注解 修饰的类，如果其子类没有被其他注释修饰，则它的子类也继承了父类的注解</li>
<li>示例<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Retention(RetentPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyTestAnnotation&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyTestAnnotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="comment">// 获取Son的class对象</span></span><br><span class="line">        Class sonClass = Son.class;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取Son类上的注解MyTestAnnotation</span></span><br><span class="line">        MyTestAnnotation annotation = sonClass.getAnnotation(MyTestAnnotation.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-4-5-Repeatable"><a href="#3-4-5-Repeatable" class="headerlink" title="3.4.5 @Repeatable"></a>3.4.5 @Repeatable</h3></li>
<li>Repeatable的英文意思是可重复的。顾名思义说明被这个元注解修饰的注解可以同时作用一个对象多次，但是每次作用注解又可以代表不同的含义。<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> People &#123;</span><br><span class="line">    Game[] value() ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repeatable(People.class)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Game &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Game(value = &quot;LOL&quot;)</span></span><br><span class="line"><span class="meta">@Game(value = &quot;PUBG&quot;)</span></span><br><span class="line"><span class="meta">@Game(value = &quot;NFS&quot;)</span></span><br><span class="line"><span class="meta">@Game(value = &quot;Dirt4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PlayGame</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>通过上面的例子，你可能会有一个疑问，游戏注解中括号的变量是啥，其实这和游戏注解中定义的属性对应。接下来我们继续学习注解的属性。</li>
</ul>
<h2 id="3-5-注解的属性"><a href="#3-5-注解的属性" class="headerlink" title="3.5 注解的属性"></a>3.5 注解的属性</h2><ul>
<li>通过上一小节@Repeatable注解的例子，我们说到注解的属性。注解的属性其实和类中定义的变量有异曲同工之处，只是注解中的变量都是成员变量（属性），并且注解中是没有方法的，只有成员变量，变量名就是使用注解括号中对应的参数名，变量返回值注解括号中对应参数类型。相信这会你应该会对上面的例子有一个更深的认识。而@Repeatable注解中的变量则类型则是对应Annotation（接口）的泛型Class</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.ANNOTATION_TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Repeatable &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Indicates the containing annotation type for the</span></span><br><span class="line"><span class="comment">     * repeatable annotation type.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> the containing annotation type</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Class&lt;? extends Annotation&gt; value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-6-注解的本质"><a href="#3-6-注解的本质" class="headerlink" title="3.6 注解的本质"></a>3.6 注解的本质</h2><ul>
<li>注解的本质就是一个Annotation接口<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Annotation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;? extends Annotation&gt; annotationType();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>通过以上源码，我们知道注解本身就是Annotation接口的子接口，也就是说注解中其实是可以有属性和方法，但是接口中的属性都是static final的，对于注解来说没什么意义，而我们定义接口的方法就相当于注解的属性，也就对应了前面说的为什么注解只有属性成员变量，其实他就是接口的方法，这就是为什么成员变量会有括号，不同于接口我们可以在注解的括号中给成员变量赋值。</li>
</ul>
<h2 id="3-7-注解属性类型"><a href="#3-7-注解属性类型" class="headerlink" title="3.7 注解属性类型"></a>3.7 注解属性类型</h2><h3 id="3-7-1-注解属性类型可以有以下列出的类型"><a href="#3-7-1-注解属性类型可以有以下列出的类型" class="headerlink" title="3.7.1 注解属性类型可以有以下列出的类型"></a>3.7.1 注解属性类型可以有以下列出的类型</h3><ol>
<li>基本数据类型</li>
<li>String</li>
<li>枚举类型</li>
<li>注解类型</li>
<li>Class类型</li>
<li>以上类型的一维数组类型</li>
</ol>
<h2 id="3-8-注解成员变量赋值"><a href="#3-8-注解成员变量赋值" class="headerlink" title="3.8 注解成员变量赋值"></a>3.8 注解成员变量赋值</h2><ul>
<li>如果注解又多个属性，则可以在注解括号中用“，”号隔开分别给对应的属性赋值，如下例子，注解在父类中赋值属性<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyTestAnnotation &#123;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> &quot;mao&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> <span class="keyword">default</span> 18</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyTestAnnotation(name = &quot;father&quot;,age = 50)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-9-获取注解属性"><a href="#3-9-获取注解属性" class="headerlink" title="3.9 获取注解属性"></a>3.9 获取注解属性</h2><ul>
<li>前面我们说了很多注解如何定义，放在哪，现在我们可以开始学习注解属性的提取了，这才是使用注解的关键，获取属性的值才是使用注解的目的。</li>
<li><p>如果获取注解属性，当然是反射啦，主要有三个基本的方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAnnotationPresent</span><span class="params">(Class&lt;? extends Annotation&gt; annotationClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> GenericDeclaration.<span class="keyword">super</span>.isAnnotationPresent(annotationClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span>  A <span class="title">getAnnotation</span><span class="params">(Class annotationClass)</span> </span>&#123;</span><br><span class="line">        Objects.requireNonNull(annotationClass);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (A) annotationData().annotations.get(annotationClass);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">public</span> Annotation[] getAnnotations() &#123;</span><br><span class="line">        <span class="keyword">return</span> AnnotationParser.toArray(annotationData().annotations);</span><br><span class="line">    &#125;    </span><br></pre></td></tr></table></figure>
</li>
<li><p>下面结合前面的例子，我们来获取一下注解属性，在获取之前我们自定义的注解必须使用元注解@Retention(RetentionPolicy.RUNTIME)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取类注解属性</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Class fatherClass = Father.class;</span><br><span class="line">        <span class="keyword">boolean</span> annotationPresent = fatherClass.isAnnotationPresent(MyTestAnnotation.class);</span><br><span class="line">        <span class="keyword">if</span>(annotationPresent)&#123;</span><br><span class="line">            MyTestAnnotation annotation = fatherClass.getAnnotation(MyTestAnnotation.class);</span><br><span class="line">            System.out.println(annotation.name());</span><br><span class="line">            System.out.println(annotation.age());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 获取方法注解属性</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Field age = fatherClass.getDeclaredField(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">            <span class="keyword">boolean</span> annotationPresent1 = age.isAnnotationPresent(Age.class);</span><br><span class="line">            <span class="keyword">if</span>(annotationPresent1)&#123;</span><br><span class="line">                Age annotation = age.getAnnotation(Age.class);</span><br><span class="line">                System.out.println(annotation.value());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Method play = PlayGame.class.getDeclaredMethod(<span class="string">&quot;play&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (play!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                People annotation2 = play.getAnnotation(People.class);</span><br><span class="line">                Game[] value = annotation2.value();</span><br><span class="line">                <span class="keyword">for</span> (Game game : value) &#123;</span><br><span class="line">                    System.out.println(game.value());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-9-1-运行结果"><a href="#3-9-1-运行结果" class="headerlink" title="3.9.1 运行结果"></a>3.9.1 运行结果</h3><img src="/2022/03/02/Java%E8%BF%9B%E9%98%B6%E5%A4%A7%E5%85%A8%E4%B8%80/%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C.png" class="" title="image">
</li>
</ul>
<h2 id="3-10-注解的作用"><a href="#3-10-注解的作用" class="headerlink" title="3.10 注解的作用"></a>3.10 注解的作用</h2><ul>
<li>提供信息给编译器： 编译器可以利用注解来检测出错误或者警告信息，打印出日志。</li>
<li>编译阶段时的处理：软件工具可以用来利用注解信息来自动生成代码、文档或者做其它相应的自动处理。</li>
<li>运行时处理： 某些注解可以在程序运行的时候接受代码的提取，自动做相应的操作。</li>
<li>正如官方文档的那句话所说，注解能够提供元数据，转账例子中处理获取注解值的过程是我们开发者直接写的注解提取逻辑，处理提取和处理 Annotation 的代码统称为 APT（Annotation Processing Tool)。上面转账例子中的processAnnotationMoney方法就可以理解为APT工具类</li>
</ul>
<h1 id="四、IO"><a href="#四、IO" class="headerlink" title="四、IO"></a>四、IO</h1><h2 id="4-1-类结构"><a href="#4-1-类结构" class="headerlink" title="4.1 类结构"></a>4.1 类结构</h2><img src="/2022/03/02/Java%E8%BF%9B%E9%98%B6%E5%A4%A7%E5%85%A8%E4%B8%80/io.webp" class="" title="io">
<ul>
<li>节点流：可以直接从数据源或目的地读写数据的数据流</li>
<li>处理流(包装流)：对节点流操作的优化</li>
</ul>
<h2 id="4-2-操作文件"><a href="#4-2-操作文件" class="headerlink" title="4.2 操作文件"></a>4.2 操作文件</h2><h3 id="4-2-1-File类"><a href="#4-2-1-File类" class="headerlink" title="4.2.1 File类"></a>4.2.1 File类</h3><ul>
<li><p>作用：文件和目录名的抽象表示</p>
</li>
<li><p>四种构造方法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> File(File parent,String child);</span><br><span class="line"><span class="keyword">new</span> File(String pathname);</span><br><span class="line"><span class="keyword">new</span> File(String parent, String child);</span><br><span class="line"><span class="keyword">new</span> File(URI uri);</span><br></pre></td></tr></table></figure>
<ul>
<li>获取文件路径方法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String path=<span class="string">&quot;&quot;</span>; <span class="comment">//绝对或相对路径，相对路径是相对改项目文件</span></span><br><span class="line">File src=<span class="keyword">new</span> File(path);</span><br><span class="line">src.getName(); <span class="comment">//获取文件或目录的名称;返回String</span></span><br><span class="line">src.getPath(); <span class="comment">//获取构建的给定的路径;返回String</span></span><br><span class="line">src.getAbsolutePath(); <span class="comment">//获取绝对路径;返回String</span></span><br><span class="line">src.getParent(); <span class="comment">//获取构建的父级目录字符串;返回String，无返回null</span></span><br><span class="line">src.length(); <span class="comment">//返回文件大小，单位为K，目录或文件不存在返回0;返回long</span></span><br></pre></td></tr></table></figure>
<ul>
<li>获取文件状态方法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String path=<span class="string">&quot;&quot;</span>;</span><br><span class="line">File src=<span class="keyword">new</span> File(path);</span><br><span class="line">src.exists(); <span class="comment">//判断文件存在;返回boolean</span></span><br><span class="line">src.isFile(); <span class="comment">//判断是否为一个文件;返回boolean</span></span><br><span class="line">src.isDirectory(); <span class="comment">//判断是否为一个目录;返回boolean</span></span><br></pre></td></tr></table></figure>
<ul>
<li>其他操作：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String path=<span class="string">&quot;&quot;</span>;</span><br><span class="line">File src=<span class="keyword">new</span> File(path);</span><br><span class="line">src.createNewFile(); <span class="comment">//该文件不存在的情况下，创建一个空的新文件或文件夹;返回boolean</span></span><br><span class="line">src.delete() <span class="comment">//删除操作;返回boolean</span></span><br><span class="line">src.mkdir(); <span class="comment">//上级目录不存在则创建失败;返回boolean</span></span><br><span class="line">src.mkdirs(); <span class="comment">//上级目录可以不存在(recommend)</span></span><br><span class="line">src.list(); <span class="comment">//列出下级名称;返回String</span></span><br><span class="line">src.listFiles(); <span class="comment">//返回下级文件对象列表;返回File[]</span></span><br></pre></td></tr></table></figure>
<h3 id="4-2-2-文件编码"><a href="#4-2-2-文件编码" class="headerlink" title="4.2.2 文件编码"></a>4.2.2 文件编码</h3><ul>
<li>编码：字符—&gt;字节</li>
<li>解码：字节—&gt;字符</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>字符集</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ASCII</td>
<td>英文字符集</td>
</tr>
<tr>
<td>ISO-8859-1</td>
<td>包含中，日，拉丁字符</td>
</tr>
<tr>
<td>UTF-8</td>
<td>变长字符集(1-3个字节)</td>
</tr>
<tr>
<td>UTF-16BE</td>
<td>定长字符集(2个字节)，大端存储</td>
</tr>
<tr>
<td>UTF-16LE</td>
<td>定长字符集(2个字节)，小段存储</td>
</tr>
<tr>
<td>UTF-16</td>
<td>文件开头指定大端表示还是小段表示</td>
</tr>
<tr>
<td>GBK</td>
<td>中文字符集</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>编码函数</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String msg=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">byte</span>[] data = msg.getBytes(); <span class="comment">//默认为项目的编码方式</span></span><br><span class="line"><span class="keyword">byte</span>[] data = msg.getBytes(<span class="string">&quot;GBK&quot;</span>); <span class="comment">//指定编码方式</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>解码函数</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String msg=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">byte</span>[] data = msg.getBytes();</span><br><span class="line"></span><br><span class="line">msg = <span class="keyword">new</span> String(data,<span class="number">0</span>,data.length,<span class="string">&quot;utf-8&quot;</span>); <span class="comment">//通过构造器进行解码操作</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 第一个参数是数组引用</span></span><br><span class="line"><span class="comment">* 第二个是解码的起始位置</span></span><br><span class="line"><span class="comment">* 第三个是需要解码的字节数</span></span><br><span class="line"><span class="comment">* 第四个是按照什么方式解码</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>乱码原因</p>
<ul>
<li>给定的字节数不够，第三个参数</li>
<li>字符集不符合，第四个参数</li>
</ul>
</li>
</ul>
<h1 id="五、节点流"><a href="#五、节点流" class="headerlink" title="五、节点流"></a>五、节点流</h1><h2 id="5-1-读写操作"><a href="#5-1-读写操作" class="headerlink" title="5.1 读写操作"></a>5.1 读写操作</h2><ul>
<li>节点流可以对文件进行读写操作，一般的读写流程如下：<ul>
<li>创建源</li>
</ul>
<ol>
<li>选择流</li>
<li>操作</li>
<li>释放</li>
</ol>
</li>
</ul>
<ol>
<li>节点流分为<strong>字节流</strong>和<strong>字符流</strong></li>
</ol>
<h2 id="5-2-字节流"><a href="#5-2-字节流" class="headerlink" title="5.2 字节流"></a>5.2 字节流</h2><h3 id="5-2-1-输入流FileInputStream"><a href="#5-2-1-输入流FileInputStream" class="headerlink" title="5.2.1 输入流FileInputStream"></a>5.2.1 输入流FileInputStream</h3><h4 id="（1）read函数读取"><a href="#（1）read函数读取" class="headerlink" title="（1）read函数读取"></a>（1）read函数读取</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="keyword">int</span> temp;</span><br><span class="line"><span class="comment">// 创建源</span></span><br><span class="line">File file=<span class="keyword">new</span> File(<span class="string">&quot;abc.txt&quot;</span>); <span class="comment">// 内容为hello world</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 选择流</span></span><br><span class="line">FileInputStream input=<span class="keyword">null</span>;</span><br><span class="line">input=<span class="keyword">new</span> FileInputStream(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取操作，read()读到文件末尾返回-1</span></span><br><span class="line"><span class="keyword">while</span>((temp=input.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.print((<span class="keyword">char</span>)temp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭流</span></span><br><span class="line"><span class="keyword">if</span>(input!=<span class="keyword">null</span>)</span><br><span class="line">    input.close();</span><br></pre></td></tr></table></figure>
<h4 id="（2）分段读取"><a href="#（2）分段读取" class="headerlink" title="（2）分段读取"></a>（2）分段读取</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">input=<span class="keyword">new</span> FileInputStream(file);</span><br><span class="line"><span class="comment">// 读取操作，分段读取</span></span><br><span class="line"><span class="keyword">byte</span>[] flush = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>] <span class="comment">// 缓冲容器</span></span><br><span class="line"><span class="keyword">int</span> len=-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>((temp=input.read(flush))!=-<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 字节数组--&gt;字符串(解码)</span></span><br><span class="line">    String str=<span class="keyword">new</span> String(flush,<span class="number">0</span>,len);</span><br><span class="line">	System.out.print(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-2-输出流"><a href="#5-2-2-输出流" class="headerlink" title="5.2.2 输出流"></a>5.2.2 输出流</h3><ul>
<li>写文件分两类<ul>
<li>覆盖</li>
<li>追加</li>
</ul>
</li>
<li>注：要注意添加异常操作</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 若进行追加，new FileOutputStream(file,true);</span></span><br><span class="line"><span class="comment">// 第二个参数表示是否追加 </span></span><br><span class="line">OutputStream os=<span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">String msg=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">byte</span>[] data=msg.getBytes(); <span class="comment">//编码</span></span><br><span class="line">os.write(data,<span class="number">0</span>,data.length);</span><br><span class="line">os.flush();</span><br></pre></td></tr></table></figure>
<h3 id="5-2-3-文件拷贝"><a href="#5-2-3-文件拷贝" class="headerlink" title="5.2.3 文件拷贝"></a>5.2.3 文件拷贝</h3><ul>
<li>read(flush)返回读取字节的长度<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// in为我们定义的输入流</span></span><br><span class="line"><span class="keyword">byte</span>[] flush=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="keyword">int</span> len;</span><br><span class="line"><span class="keyword">while</span>((len=in.read(flush))!=-<span class="number">1</span>) &#123;</span><br><span class="line">	out.write(flush,<span class="number">0</span>,len);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="5-3-字符流"><a href="#5-3-字符流" class="headerlink" title="5.3 字符流"></a>5.3 字符流</h2><h3 id="5-3-1-文件字符输入流FileReader"><a href="#5-3-1-文件字符输入流FileReader" class="headerlink" title="5.3.1 文件字符输入流FileReader"></a>5.3.1 文件字符输入流FileReader</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Reader input=<span class="keyword">null</span>;</span><br><span class="line">input=<span class="keyword">new</span> FileReader(file);</span><br><span class="line"><span class="comment">//读取操作，分段读取</span></span><br><span class="line"><span class="keyword">char</span>[] flush = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>] <span class="comment">//缓冲容器</span></span><br><span class="line"><span class="keyword">int</span> len=-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>((temp=input.read(flush))!=-<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">//字符数组--&gt;字符串 无解码过程</span></span><br><span class="line">    String str=<span class="keyword">new</span> String(flush,<span class="number">0</span>,len);</span><br><span class="line">	System.out.print(str);</span><br><span class="line">&#125;</span><br><span class="line">input.close();</span><br></pre></td></tr></table></figure>
<h2 id="5-3-2-文件字符输出流FileWriter"><a href="#5-3-2-文件字符输出流FileWriter" class="headerlink" title="5.3.2 文件字符输出流FileWriter"></a>5.3.2 文件字符输出流FileWriter</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Writer output=<span class="keyword">null</span>;</span><br><span class="line">input=<span class="keyword">new</span> FileWriter(file);</span><br><span class="line">String msg=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">char</span>[] datas=msg.toCharArray(); <span class="comment">//字符串--&gt;字符数组</span></span><br><span class="line"></span><br><span class="line">output.write(datas,<span class="number">0</span>,datas.length);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">或者：</span></span><br><span class="line"><span class="comment">output.write(msg); 可以直接传入字符串</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">或者</span></span><br><span class="line"><span class="comment">output.append(msg);	可以进行多次追加</span></span><br><span class="line"><span class="comment">output.append(msg).append(msg);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">output.flush();</span><br><span class="line"></span><br><span class="line">input.close();</span><br></pre></td></tr></table></figure>
<h1 id="五、多线程"><a href="#五、多线程" class="headerlink" title="五、多线程"></a>五、多线程</h1><h2 id="5-1-基本概念"><a href="#5-1-基本概念" class="headerlink" title="5.1 基本概念"></a>5.1 基本概念</h2><h3 id="5-1-1-程序-进程-线程"><a href="#5-1-1-程序-进程-线程" class="headerlink" title="5.1.1 程序/进程/线程"></a>5.1.1 程序/进程/线程</h3><ul>
<li>程序Program</li>
<li>进程Process</li>
<li>线程Thread</li>
<li>并行</li>
<li>并发</li>
</ul>
<h3 id="5-1-2-线程的分类"><a href="#5-1-2-线程的分类" class="headerlink" title="5.1.2 线程的分类"></a>5.1.2 线程的分类</h3><ul>
<li>守护线程</li>
<li>用户线程</li>
</ul>
<h3 id="5-1-3-线程的生命周期"><a href="#5-1-3-线程的生命周期" class="headerlink" title="5.1.3 线程的生命周期"></a>5.1.3 线程的生命周期</h3><img src="/2022/03/02/Java%E8%BF%9B%E9%98%B6%E5%A4%A7%E5%85%A8%E4%B8%80/thread.png" class="" title="thread">
<h2 id="5-2-多线程创建方式"><a href="#5-2-多线程创建方式" class="headerlink" title="5.2 多线程创建方式"></a>5.2 多线程创建方式</h2><h3 id="5-2-1-方式一：继承Thread类"><a href="#5-2-1-方式一：继承Thread类" class="headerlink" title="5.2.1 方式一：继承Thread类"></a>5.2.1 方式一：继承Thread类</h3><ul>
<li>创建一个继承于Thread类的子类</li>
<li>重写Thread类的run方法，run()为线程执行的主要流程</li>
<li>创建子类对象</li>
<li>通过对象调用start()方法启动线程</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer num;</span><br><span class="line">    TestThread(Integer num)&#123;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.num++;</span><br><span class="line">            System.out.println(<span class="keyword">this</span>.num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        TestThread thread1 = <span class="keyword">new</span> TestThread(<span class="number">0</span>);</span><br><span class="line">        TestThread thread2 = <span class="keyword">new</span> TestThread(<span class="number">0</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-2-方式二：创建Thread匿名子类"><a href="#5-2-2-方式二：创建Thread匿名子类" class="headerlink" title="5.2.2 方式二：创建Thread匿名子类"></a>5.2.2 方式二：创建Thread匿名子类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;.start();</span><br></pre></td></tr></table></figure>
<ul>
<li>Thread类方法</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>start()</td>
<td>启动线程</td>
</tr>
<tr>
<td>run()</td>
<td></td>
</tr>
<tr>
<td>getName()：String</td>
<td></td>
</tr>
<tr>
<td>setName()</td>
<td></td>
</tr>
<tr>
<td>static currentThread()：Thread</td>
<td>返回当前线程，在Thread子类中就是this，通常用于主线程和Runnable实现类</td>
</tr>
<tr>
<td>yield()</td>
<td>线程让步</td>
</tr>
<tr>
<td>join()</td>
<td>当前线程阻塞，并调用调用此方法的线程，直到线程执行完毕才切换cpu</td>
</tr>
<tr>
<td>sleep(long millis)</td>
<td>单位：毫秒</td>
</tr>
<tr>
<td>stop()</td>
<td></td>
</tr>
<tr>
<td>isAlive()</td>
<td>判断当前的线程是否处于活动状态，即就绪态和运行态</td>
</tr>
</tbody>
</table>
</div>
<h3 id="5-2-3-方式三：实现Runnable接口"><a href="#5-2-3-方式三：实现Runnable接口" class="headerlink" title="5.2.3 方式三：实现Runnable接口"></a>5.2.3 方式三：实现Runnable接口</h3><ul>
<li>创建一个MyRunnable实现接口的Runnable</li>
<li>创建多个Thread线程对象，接收MyRunnable对象作为参数，启动线程调用MyRunnable实现的run方法</li>
<li>MyRunnable类的中的数据天然的就可以被多个线程共享，而以第一种方式实现多线程的话，则必须将成员变量定义为<strong>静态成员变量</strong>才能保证多线程的数据共享</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> num = <span class="number">100</span>;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>; x &lt; <span class="number">100</span>; x++) &#123;</span><br><span class="line">			<span class="comment">//因为Runnable中没有getName方法，故用Thread中方法获取当前线程对象来实现</span></span><br><span class="line">			System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + num);</span><br><span class="line">            num--;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">                <span class="comment">//在这里只需创造一个接口子类对象，后面直接用mr就行了</span></span><br><span class="line">		MyRunnable mr = <span class="keyword">new</span> MyRunnable();</span><br><span class="line">		</span><br><span class="line"><span class="comment">//		Thread t1 = new Thread(mr);</span></span><br><span class="line"><span class="comment">//		Thread t2 = new Thread(mr);</span></span><br><span class="line"><span class="comment">//		t1.setName(&quot;hello&quot;);</span></span><br><span class="line"><span class="comment">//		t2.setName(&quot;java&quot;);</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//上面这种方法不是很常用，可以用下面这个</span></span><br><span class="line">		Thread t1 = <span class="keyword">new</span> Thread(mr,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">		Thread t2 = <span class="keyword">new</span> Thread(mr,<span class="string">&quot;java&quot;</span>);</span><br><span class="line">		t1.start();</span><br><span class="line">		t2.start();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-4-两种方式的选择"><a href="#5-2-4-两种方式的选择" class="headerlink" title="5.2.4 两种方式的选择"></a>5.2.4 两种方式的选择</h3><ul>
<li>开发中优先选择实现Runnable接口的方式<ul>
<li>实现接口的方式没有类的单继承的局限</li>
<li>实现接口的方式更适合处理多个线程有共享数据的情况</li>
</ul>
</li>
</ul>
<h2 id="5-3-线程优先级"><a href="#5-3-线程优先级" class="headerlink" title="5.3 线程优先级"></a>5.3 线程优先级</h2><h3 id="5-3-1-线程等级"><a href="#5-3-1-线程等级" class="headerlink" title="5.3.1 线程等级"></a>5.3.1 线程等级</h3><ul>
<li>MAX_PRIORITY：10</li>
<li>MIN_PRIORITY：1</li>
<li>NORM_PRIORITY：5（默认优先级）</li>
<li>以上均为Thread类的常量</li>
</ul>
<h3 id="5-3-2-方法"><a href="#5-3-2-方法" class="headerlink" title="5.3.2 方法"></a>5.3.2 方法</h3><ul>
<li>getPriority()：返回线程优先值</li>
<li>setPriority(int newPriority)：改变线程优先级</li>
</ul>
<h3 id="5-3-3-说明"><a href="#5-3-3-说明" class="headerlink" title="5.3.3 说明"></a>5.3.3 说明</h3><ul>
<li>线程创建时继承父线程的优先级</li>
<li>低优先级只是获得调度的概率低，并非一定是在高优先级线程之后才被调用</li>
</ul>
<h2 id="5-4-线程安全"><a href="#5-4-线程安全" class="headerlink" title="5.4 线程安全"></a>5.4 线程安全</h2><h3 id="5-4-1-问题"><a href="#5-4-1-问题" class="headerlink" title="5.4.1 问题"></a>5.4.1 问题</h3><ul>
<li>数据被多线程共享时，会存在数据不同步的问题</li>
<li>解决办法：同步代码块</li>
</ul>
<h3 id="5-4-2-方式一：同步代码块"><a href="#5-4-2-方式一：同步代码块" class="headerlink" title="5.4.2 方式一：同步代码块"></a>5.4.2 方式一：同步代码块</h3><ul>
<li>同步代码块使用<strong>synchronized</strong>语句，object对象为线程进入同步代码块所需要的锁，这个锁必须是共用的，否则把锁写进run方法体中，线程仍然是不安全的</li>
<li>以上卫生间为例，只用使用了<strong>（同步监视器）锁</strong>的人把门锁上才能使用卫生间，在此期间，任何人不能使用这间卫生间</li>
<li>将操作共享变量的部分放到同步代码块中即可保证线程安全</li>
<li>缺点：操作同步代码块时，只能有一个线程，无法完成线程切换，相当于单线程，效率不高</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">final</span> Object object = <span class="keyword">new</span> Object();	<span class="comment">// 锁</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 同步代码块</span></span><br><span class="line">            <span class="comment">// 如果是以继承Thread的方式，则锁可以用“类名.class”来使用</span></span><br><span class="line">            <span class="keyword">synchronized</span> (object)&#123;	<span class="comment">// 或者锁用this更方便</span></span><br><span class="line">                <span class="keyword">if</span>(ticket&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">&quot;: &quot;</span>+ticket);</span><br><span class="line">                    ticket--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SyncTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyRunnable myRunnable = <span class="keyword">new</span> MyRunnable();</span><br><span class="line"></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(myRunnable,<span class="string">&quot;thread-1&quot;</span>);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(myRunnable,<span class="string">&quot;thread-2&quot;</span>);</span><br><span class="line">        Thread thread3 = <span class="keyword">new</span> Thread(myRunnable,<span class="string">&quot;thread-3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-3-方式二：同步方法"><a href="#5-4-3-方式二：同步方法" class="headerlink" title="5.4.3 方式二：同步方法"></a>5.4.3 方式二：同步方法</h3><ul>
<li>如果操作共享数据的代码完整的声明在一个方法中，我们可以将此方法声明为同步的</li>
<li>在方法的返回类型前加上<strong>synchronized</strong>即可将此方法声明为同步方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> ticket = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">			show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 同步监视器（锁）默认为this</span></span><br><span class="line">    <span class="comment">// 使用继承Thread类的方式，还必须把方法声明为static的才能保证线程安全，它的锁是之前提到的类对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(ticket&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;: &quot;</span>+ticket);</span><br><span class="line">            ticket--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SyncTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyRunnable myRunnable = <span class="keyword">new</span> MyRunnable();</span><br><span class="line"></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(myRunnable,<span class="string">&quot;thread-1&quot;</span>);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(myRunnable,<span class="string">&quot;thread-2&quot;</span>);</span><br><span class="line">        Thread thread3 = <span class="keyword">new</span> Thread(myRunnable,<span class="string">&quot;thread-3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-5-死锁"><a href="#5-5-死锁" class="headerlink" title="5.5 死锁"></a>5.5 死锁</h2><h3 id="5-5-1-概念"><a href="#5-5-1-概念" class="headerlink" title="5.5.1 概念"></a>5.5.1 概念</h3><h3 id="5-5-2-死锁模拟"><a href="#5-5-2-死锁模拟" class="headerlink" title="5.5.2 死锁模拟"></a>5.5.2 死锁模拟</h3><h1 id="六、网络编程"><a href="#六、网络编程" class="headerlink" title="六、网络编程"></a>六、网络编程</h1><h1 id="七、反射"><a href="#七、反射" class="headerlink" title="七、反射"></a>七、反射</h1><h2 id="7-1-概念"><a href="#7-1-概念" class="headerlink" title="7.1 概念"></a>7.1 概念</h2><ul>
<li>反射机制允许程序在执行期间借助反射Reflection API取得任何类的内部信息，并能直接操作任意对象的内部属性及方法</li>
</ul>
]]></content>
      <categories>
        <category>后端</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java容器</tag>
        <tag>Java泛型</tag>
        <tag>Java注解</tag>
      </tags>
  </entry>
  <entry>
    <title>Mybatis基础大全</title>
    <url>/2022/03/14/Mybatis%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、Mybatis"><a href="#一、Mybatis" class="headerlink" title="一、Mybatis"></a>一、Mybatis</h1><h2 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1 简介"></a>1.1 简介</h2><ul>
<li>优秀的持久层框架</li>
</ul>
<h2 id="1-2-持久层"><a href="#1-2-持久层" class="headerlink" title="1.2 持久层"></a>1.2 持久层</h2><ul>
<li>持久化：将程序的数据在持久状态和瞬时状态转化的过程</li>
<li>内存：断电即失</li>
</ul>
<h1 id="二、第一个案例"><a href="#二、第一个案例" class="headerlink" title="二、第一个案例"></a>二、第一个案例</h1><h2 id="2-1-导入依赖包与资源路径"><a href="#2-1-导入依赖包与资源路径" class="headerlink" title="2.1 导入依赖包与资源路径"></a>2.1 导入依赖包与资源路径</h2><h3 id="2-1-1-导入依赖包"><a href="#2-1-1-导入依赖包" class="headerlink" title="2.1.1 导入依赖包"></a>2.1.1 导入依赖包</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    mysql驱动    --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.27<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    mybatis    --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    junit    --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-1-2-配置maven资源路径"><a href="#2-1-2-配置maven资源路径" class="headerlink" title="2.1.2 配置maven资源路径"></a>2.1.2 配置maven资源路径</h3><ul>
<li>在pom文件中添加以下内容，防止项目运行时，代码层的xml文件由于不在默认的resource资源目录中，导致访问失败而报错，父/子模块的pom都可以添加进去</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  配置资源导出,防止dao层中的xml无法访问而报错  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-2-配置Mybatis-xml文件"><a href="#2-2-配置Mybatis-xml文件" class="headerlink" title="2.2 配置Mybatis.xml文件"></a>2.2 配置Mybatis.xml文件</h2><ul>
<li>在resource下创建Mybatis.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">由于hexo头信息无法复制，因此以注释的形式标注出来</span></span><br><span class="line"><span class="comment">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="comment">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="comment">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="line"><span class="comment">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--核心配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;com.mysql.cj.jdbc.Driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;root&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;FLzxSQC1998.Com&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/kuang/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3-编写代码"><a href="#2-3-编写代码" class="headerlink" title="2.3 编写代码"></a>2.3 编写代码</h2><h3 id="2-3-1-编写工具类"><a href="#2-3-1-编写工具类" class="headerlink" title="2.3.1 编写工具类"></a>2.3.1 编写工具类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提示作用域</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//            使用Mybatis第一步:获取SqlSessionFactory对象</span></span><br><span class="line">            String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有了工厂类SqlSessionFactory,就可以获取到SqlSession实例了</span></span><br><span class="line">    <span class="comment">// SqlSession完全包含了面向数据库执行sql命令所需要的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-1-添加实体类"><a href="#2-3-1-添加实体类" class="headerlink" title="2.3.1 添加实体类"></a>2.3.1 添加实体类</h3><ul>
<li>pojo层</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-2-编写接口"><a href="#2-3-2-编写接口" class="headerlink" title="2.3.2 编写接口"></a>2.3.2 编写接口</h3><ul>
<li>无需编写实现类，Mybatis会帮我们实现</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-Mapper配置文件"><a href="#2-4-Mapper配置文件" class="headerlink" title="2.4 Mapper配置文件"></a>2.4 Mapper配置文件</h2><ul>
<li>dao层下创建UserMapper.xml文件</li>
<li>注意这个mapper文件需要在mybatis-config进行配置，否则程序运行会因为找不到mapper文件而报错</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="comment">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="comment">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line"><span class="comment">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--绑定命名空间,绑定自己的dao层接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-获取结果"><a href="#2-5-获取结果" class="headerlink" title="2.5 获取结果"></a>2.5 获取结果</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserDao userDao = sqlSession.getMapper(UserDao.class);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = userDao.getUserList();</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、增删改查"><a href="#三、增删改查" class="headerlink" title="三、增删改查"></a>三、增删改查</h1><h2 id="3-1-namespace"><a href="#3-1-namespace" class="headerlink" title="3.1 namespace"></a>3.1 namespace</h2><ul>
<li>dao层命名统一为xxxMapper.xxx</li>
</ul>
<h2 id="3-2-Mapper配置文件解析"><a href="#3-2-Mapper配置文件解析" class="headerlink" title="3.2 Mapper配置文件解析"></a>3.2 Mapper配置文件解析</h2><ul>
<li>namespace：表示dao层定义的接口路径</li>
<li>id：表示接口中的方法名</li>
<li>resultType：Sql语句执行的返回值类型</li>
<li>parameterType：传入的参数类型</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--绑定命名空间,绑定自己的dao层接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--根据id查询用户--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where id= #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-3-CRUD"><a href="#3-3-CRUD" class="headerlink" title="3.3 CRUD"></a>3.3 CRUD</h2><h3 id="3-3-1-编写sql语句"><a href="#3-3-1-编写sql语句" class="headerlink" title="3.3.1 编写sql语句"></a>3.3.1 编写sql语句</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--根据id查询用户--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where id= #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--插入用户--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.user(id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--修改用户--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        update mybatis.user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--删除用户--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from mybatis.user where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-2-编写接口方法"><a href="#3-3-2-编写接口方法" class="headerlink" title="3.3.2 编写接口方法"></a>3.3.2 编写接口方法</h3><ul>
<li>在接口中定义对应方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 根据id查找用户</span></span><br><span class="line">    <span class="function">User <span class="title">getUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 插入用户</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 修改用户</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 删除用户</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-3-测试方法"><a href="#3-3-3-测试方法" class="headerlink" title="3.3.3 测试方法"></a>3.3.3 测试方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 查询测试</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    User user = userMapper.getUserById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入测试</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="keyword">int</span> res = userMapper.addUser(<span class="keyword">new</span> User(<span class="number">4</span>,<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;abc&quot;</span>));</span><br><span class="line">    <span class="keyword">if</span>(res &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;插入成功&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 提交事务，否则无法实现插入效果</span></span><br><span class="line">    sqlSession.commit()</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改测试</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    userMapper.updateUser(<span class="keyword">new</span> User(<span class="number">3</span>,<span class="string">&quot;abc&quot;</span>,<span class="string">&quot;abc&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提交事务，否则无法实现插入效果</span></span><br><span class="line">    sqlSession.commit()</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除测试</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    userMapper.deleteUser(<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 提交事务，否则无法实现插入效果</span></span><br><span class="line">    sqlSession.commit()</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="四、Map和模糊查询"><a href="#四、Map和模糊查询" class="headerlink" title="四、Map和模糊查询"></a>四、Map和模糊查询</h1><h2 id="4-1-Map实现CRUD"><a href="#4-1-Map实现CRUD" class="headerlink" title="4.1 Map实现CRUD"></a>4.1 Map实现CRUD</h2><h3 id="4-1-1-优势"><a href="#4-1-1-优势" class="headerlink" title="4.1.1 优势"></a>4.1.1 优势</h3><ul>
<li>相对于原来的传pojo对象的方式，map方式更为传参更为灵活</li>
</ul>
<h3 id="4-1-2-编写sql语句"><a href="#4-1-2-编写sql语句" class="headerlink" title="4.1.2 编写sql语句"></a>4.1.2 编写sql语句</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		插入用户，使用map对象进行插入,注意parameterType=&quot;map&quot;，传递参数为map类型</span></span><br><span class="line"><span class="comment">		values后的字段名可以自定义如userid等，map的键名必须跟这个自定的名字保持一致</span></span><br><span class="line"><span class="comment">            这样就可以在map中取得对应的值，完成数据的插入</span></span><br><span class="line"><span class="comment">		但表的列名字段必须和数据库表保持一致</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        insert into mybatis.user(id,name,pwd) values (#&#123;userid&#125;,#&#123;username&#125;,#&#123;password&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-1-3-编写接口方法"><a href="#4-1-3-编写接口方法" class="headerlink" title="4.1.3 编写接口方法"></a>4.1.3 编写接口方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Map方式插入用户</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-1-4-测试方法"><a href="#4-1-4-测试方法" class="headerlink" title="4.1.4 测试方法"></a>4.1.4 测试方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;userid&quot;</span>,<span class="number">5</span>);</span><br><span class="line">    map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123&quot;</span>);</span><br><span class="line">    userMapper.addUser(map);</span><br><span class="line">    </span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-模糊查询"><a href="#4-2-模糊查询" class="headerlink" title="4.2 模糊查询"></a>4.2 模糊查询</h2><h3 id="4-2-1-编写sql语句"><a href="#4-2-1-编写sql语句" class="headerlink" title="4.2.1 编写sql语句"></a>4.2.1 编写sql语句</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>&gt;</span> </span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		写成&quot;%&quot;#&#123;value&#125;&quot;%&quot;形式是为了防止sql注入的风险，推荐，这样只需要传递匹配字符就可以了</span></span><br><span class="line"><span class="comment">		如果写成#&#123;value&#125;就必须传参&quot;%xxx%&quot;,或者其他匹配符，否则报错，但不推荐这么写</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        select * from mybatis.user where name like &quot;%&quot;#&#123;value&#125;&quot;%&quot;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="五、环境配置"><a href="#五、环境配置" class="headerlink" title="五、环境配置"></a>五、环境配置</h1><h2 id="5-1-核心配置文件内容"><a href="#5-1-核心配置文件内容" class="headerlink" title="5.1 核心配置文件内容"></a>5.1 核心配置文件内容</h2><ul>
<li>配置标签的位置顺序依次往下，不能随便写在某个位置，否则会报错</li>
<li>properties（属性）</li>
<li>setting（设置）</li>
<li>typeAliases（类型别名）</li>
<li>typeHandlers（类型处理器）</li>
<li>objectFactory（对象工厂）</li>
<li>plugins（插件）</li>
<li>environments（环境配置）<ul>
<li>environment（环境变量）<ul>
<li>transactionManager（事务管理器）</li>
<li>dataSource（数据源）</li>
</ul>
</li>
</ul>
</li>
<li>databaseldProvider（数据库厂商标识）</li>
<li>mappers（映射器）</li>
</ul>
<h2 id="5-2-properties（属性）"><a href="#5-2-properties（属性）" class="headerlink" title="5.2 properties（属性）"></a>5.2 properties（属性）</h2><ul>
<li>新建properties配置文件</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">FLzxSQC1998.Com</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>在核心配置文件中引入外部配置文件，如db.properties<ul>
<li>需要注意的是，这个properties标签需要写在configuration标签下的第一个位置，因为configuration中的标签有顺序要求，否则会报错</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--也可以在properties中配置对应的属性，但默认会先从外部的配置文件开始读取--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--内部配置属性</span></span><br><span class="line"><span class="comment">&lt;properties resource=&quot;db.properties&quot;&gt;</span></span><br><span class="line"><span class="comment">  &lt;property name=&quot;username&quot; value=&quot;dev_user&quot;/&gt;</span></span><br><span class="line"><span class="comment">  &lt;property name=&quot;password&quot; value=&quot;F2Fa3!33TYyg&quot;/&gt;</span></span><br><span class="line"><span class="comment">&lt;/properties&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置时，使用$&#123;&#125;取到properties配置文件中对应的值--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-3-typeAliases（类型别名）"><a href="#5-3-typeAliases（类型别名）" class="headerlink" title="5.3 typeAliases（类型别名）"></a>5.3 typeAliases（类型别名）</h2><h3 id="5-3-1-自定义别名"><a href="#5-3-1-自定义别名" class="headerlink" title="5.3.1 自定义别名"></a>5.3.1 自定义别名</h3><ul>
<li>类型别名可为 Java 类型设置一个缩写名字。 它仅用于 XML 配置，意在降低冗余的全限定类名书写。</li>
<li>设置完简化后的别命，在使用时可以直接使用，比如在sql语句配置文件的returnType就可以直接使用别名，使配置更加简洁清晰</li>
<li>当这样配置时，<strong>别名</strong>可以用在任何使用<strong>它</strong>的地方，<strong>这种方式一般在实体类较少的情况下使用</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Author&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Author&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Blog&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Blog&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Comment&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Comment&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Post&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Section&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Section&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Tag&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Tag&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-2-扫描包生成别名"><a href="#5-3-2-扫描包生成别名" class="headerlink" title="5.3.2 扫描包生成别名"></a>5.3.2 扫描包生成别名</h3><ul>
<li>也可以指定一个包名，MyBatis 会在包名下面搜索需要的 Java Bean</li>
<li>这种可以在实体类比较多的时候使用</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	设置包后，会自动为对应的类设置别命，别名即为类名</span></span><br><span class="line"><span class="comment">	这种情况，设置的别名为首字母小写的类名，比如domain.blog.Author 的别名为 author</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;domain.blog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3-3-注解别名"><a href="#5-3-3-注解别名" class="headerlink" title="5.3.3 注解别名"></a>5.3.3 注解别名</h3><ul>
<li>还可以使用注解设置别名</li>
<li>在使用<strong>扫描包生成别名</strong>时，如果非要改成自定义的，可以在对应类上加上注解</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-4-基本类型的别名"><a href="#5-3-4-基本类型的别名" class="headerlink" title="5.3.4 基本类型的别名"></a>5.3.4 基本类型的别名</h3><ul>
<li>基本类型前加下划线：如int别名：_int</li>
<li>包装类型首字母小写：如Integer别名：int</li>
</ul>
<h2 id="5-4-setting（设置）"><a href="#5-4-setting（设置）" class="headerlink" title="5.4 setting（设置）"></a>5.4 setting（设置）</h2><h2 id="5-5-其他配置"><a href="#5-5-其他配置" class="headerlink" title="5.5 其他配置"></a>5.5 其他配置</h2><h2 id="5-6-mappers（映射器）"><a href="#5-6-mappers（映射器）" class="headerlink" title="5.6 mappers（映射器）"></a>5.6 mappers（映射器）</h2><ul>
<li>在核心配置文件中配置mapper配置文件所在路径</li>
<li>方式一：使用mapper文件绑定【推荐】</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用相对于类路径的资源引用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>方式二：使用class绑定</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用映射器接口实现类的完全限定类名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.BlogMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.PostMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用除方式一外的其他方式时的注意点：<ul>
<li>接口和他的Mapper配置文件必须同名</li>
<li>接口和他的Mapper配置文件必须在同一包下</li>
</ul>
</li>
</ul>
<h1 id="六、生命周期和作用域"><a href="#六、生命周期和作用域" class="headerlink" title="六、生命周期和作用域"></a>六、生命周期和作用域</h1><h2 id="6-1-SqlSessionFactoryBuilder"><a href="#6-1-SqlSessionFactoryBuilder" class="headerlink" title="6.1 SqlSessionFactoryBuilder"></a>6.1 SqlSessionFactoryBuilder</h2><ul>
<li>这个类可以被实例化、使用和丢弃，一旦创建了 SqlSessionFactory，就不再需要它了</li>
</ul>
<h2 id="6-2-SqlSessionFactory"><a href="#6-2-SqlSessionFactory" class="headerlink" title="6.2 SqlSessionFactory"></a>6.2 SqlSessionFactory</h2><ul>
<li>SqlSessionFactory 一旦被创建就应该在应用的运行期间一直存在，没有任何理由丢弃它或重新创建另一个实例</li>
<li>类似数据库连接池</li>
</ul>
<h2 id="6-3-SqlSession"><a href="#6-3-SqlSession" class="headerlink" title="6.3 SqlSession"></a>6.3 SqlSession</h2><ul>
<li>每个线程都应该有它自己的 SqlSession 实例。SqlSession 的实例不是线程安全的，因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域</li>
<li>连接到连接池的一个请求</li>
<li>绝对不能将 SqlSession 实例的引用放在一个类的静态域，甚至一个类的实例变量也不行。 也绝不能将 SqlSession 实例的引用放在任何类型的托管作用域中</li>
<li>每次收到 HTTP 请求，就可以打开一个 SqlSession，返回一个响应后，就关闭它</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  <span class="comment">// 你的应用逻辑代码</span></span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    session.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="6-4-获取映射实例"><a href="#6-4-获取映射实例" class="headerlink" title="6.4 获取映射实例"></a>6.4 获取映射实例</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (SqlSession session = sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  BlogMapper mapper = session.getMapper(BlogMapper.class);</span><br><span class="line">  <span class="comment">// 你的应用逻辑代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2022/03/14/Mybatis%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/life.png" class="" title="life">
<h1 id="七、ResultMap结果集映射"><a href="#七、ResultMap结果集映射" class="headerlink" title="七、ResultMap结果集映射"></a>七、ResultMap结果集映射</h1><h2 id="7-1-简介"><a href="#7-1-简介" class="headerlink" title="7.1 简介"></a>7.1 简介</h2><ul>
<li>解决实体类属性名和数据库表字段名不一致的问题</li>
</ul>
<h2 id="7-2-结果映射"><a href="#7-2-结果映射" class="headerlink" title="7.2 结果映射"></a>7.2 结果映射</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	结果映射标签</span></span><br><span class="line"><span class="comment">	property对应了实体类属性，column对应表字段</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_name&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hashed_password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--这里的返回类型使用resultMap标注，值为resultMap标签的id--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class="line">  select user_id, user_name, hashed_password</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="八、日志"><a href="#八、日志" class="headerlink" title="八、日志"></a>八、日志</h1><h2 id="8-1-日志工厂"><a href="#8-1-日志工厂" class="headerlink" title="8.1 日志工厂"></a>8.1 日志工厂</h2><ul>
<li>如果一个数据库操作出现了异常，我们最好是能看到操作的sql语句是啥，方便我们排错</li>
<li>因此针对以上问题，我们可以使用日志的形式输出我们数据库操作的sql语句</li>
<li>Mybatis 通过使用内置的日志工厂提供日志功能。内置日志工厂将会把日志工作委托给下面的实现之一：<ul>
<li>SLF4J</li>
<li>LOG4J【掌握】</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING【掌握】</li>
<li>NO_LOGGING</li>
</ul>
</li>
</ul>
<h2 id="8-2-日志配置"><a href="#8-2-日志配置" class="headerlink" title="8.2 日志配置"></a>8.2 日志配置</h2><ul>
<li>需要在核心配置文件中进行配置</li>
<li>配置完后直接运行即可，就可以在控制台输出日志信息</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-3-Log4j"><a href="#8-3-Log4j" class="headerlink" title="8.3 Log4j"></a>8.3 Log4j</h2><h3 id="8-3-1-核心配置"><a href="#8-3-1-核心配置" class="headerlink" title="8.3.1 核心配置"></a>8.3.1 核心配置</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-2-导入Log4j"><a href="#8-3-2-导入Log4j" class="headerlink" title="8.3.2 导入Log4j"></a>8.3.2 导入Log4j</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-3-log4j配置文件"><a href="#8-3-3-log4j配置文件" class="headerlink" title="8.3.3 log4j配置文件"></a>8.3.3 log4j配置文件</h3><ul>
<li>在resources下创建log4j.properties配置文件</li>
<li>这里面可以配置许多日志的输出格式</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">### 设置###</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span> = <span class="string">debug,stdout,D,E</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### 输出信息到控制抬 ###</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span> = <span class="string">[%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### 输出DEBUG 级别以上的日志到=E://logs/error.log ###</span></span><br><span class="line"><span class="meta">log4j.appender.D</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.D.File</span> = <span class="string">E://logs/log.log</span></span><br><span class="line"><span class="meta">log4j.appender.D.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.D.Threshold</span> = <span class="string">DEBUG </span></span><br><span class="line"><span class="meta">log4j.appender.D.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.D.layout.ConversionPattern</span> = <span class="string">%-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">### 输出ERROR 级别以上的日志到=E://logs/error.log ###</span></span><br><span class="line"><span class="meta">log4j.appender.E</span> = <span class="string">org.apache.log4j.DailyRollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.E.File</span> =<span class="string">E://logs/error.log </span></span><br><span class="line"><span class="meta">log4j.appender.E.Append</span> = <span class="string">true</span></span><br><span class="line"><span class="meta">log4j.appender.E.Threshold</span> = <span class="string">ERROR </span></span><br><span class="line"><span class="meta">log4j.appender.E.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.E.layout.ConversionPattern</span> = <span class="string">%-d&#123;yyyy-MM-dd HH:mm:ss&#125;  [ %t:%r ] - [ %p ]  %m%n</span></span><br></pre></td></tr></table></figure>
<h3 id="8-3-4-Log4j的使用"><a href="#8-3-4-Log4j的使用" class="headerlink" title="8.3.4 Log4j的使用"></a>8.3.4 Log4j的使用</h3><ul>
<li><p>直接运行就可以在控制台输出日志</p>
</li>
<li><p>也可以编写语句</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 生成logger对象</span></span><br><span class="line">    <span class="keyword">static</span> Logger logger = Logger.getLogger(String.valueOf(UserDaoTest.class));</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLog4j</span><span class="params">()</span></span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;info：进入了testLog4j&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="九、分页实现"><a href="#九、分页实现" class="headerlink" title="九、分页实现"></a>九、分页实现</h1><h2 id="9-1-Limit分页"><a href="#9-1-Limit分页" class="headerlink" title="9.1 Limit分页"></a>9.1 Limit分页</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> LIMIT startIndex,pageSize;</span><br></pre></td></tr></table></figure>
<h2 id="9-2-Mybatis分页"><a href="#9-2-Mybatis分页" class="headerlink" title="9.2 Mybatis分页"></a>9.2 Mybatis分页</h2><h3 id="9-2-1-定义接口方法"><a href="#9-2-1-定义接口方法" class="headerlink" title="9.2.1 定义接口方法"></a>9.2.1 定义接口方法</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserByLimit</span><span class="params">(Map&lt;String,Integer&gt; map)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="9-2-1-mapper配置文件"><a href="#9-2-1-mapper配置文件" class="headerlink" title="9.2.1 mapper配置文件"></a>9.2.1 mapper配置文件</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLimit&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-3-测试"><a href="#9-2-3-测试" class="headerlink" title="9.2.3 测试"></a>9.2.3 测试</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    Map&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;startIndex&quot;</span>,<span class="number">0</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; users = userMapper.getUserByLimit(map);</span><br><span class="line">    <span class="keyword">for</span> (User user : users)&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十、注解开发"><a href="#十、注解开发" class="headerlink" title="十、注解开发"></a>十、注解开发</h1><ul>
<li>使用注解来映射简单语句会使代码显得更加简洁，但对于稍微复杂一点的语句，Java 注解不仅力不从心</li>
<li>本质：反射机制</li>
<li>底层：动态代理</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span></span>&#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="十一、Mybatis执行流程"><a href="#十一、Mybatis执行流程" class="headerlink" title="十一、Mybatis执行流程"></a>十一、Mybatis执行流程</h1><h1 id="十二、Lombok"><a href="#十二、Lombok" class="headerlink" title="十二、Lombok"></a>十二、Lombok</h1><h1 id="十三、复杂查询处理"><a href="#十三、复杂查询处理" class="headerlink" title="十三、复杂查询处理"></a>十三、复杂查询处理</h1><h2 id="13-1-数据库环境"><a href="#13-1-数据库环境" class="headerlink" title="13.1 数据库环境"></a>13.1 数据库环境</h2><ul>
<li>学生表：id、name、tid（外键）</li>
<li>教师表：id、name</li>
<li>一个教师教多个学生：一对多</li>
<li>多个学习选同一个老师：多对一</li>
<li>学生类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Teacher teacher;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>教师类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="13-1-多对一处理"><a href="#13-1-多对一处理" class="headerlink" title="13.1 多对一处理"></a>13.1 多对一处理</h2><h3 id="13-1-1-方式一：查询嵌套"><a href="#13-1-1-方式一：查询嵌套" class="headerlink" title="13.1.1 方式一：查询嵌套"></a>13.1.1 方式一：查询嵌套</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--绑定命名空间,绑定自己的dao层接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">        select * from student;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.kuang.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.kuang.pojo.Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.Teacher&quot;</span>&gt;</span></span><br><span class="line">        select * from teacher where id = #&#123;tid&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="13-1-2-方式二：结果嵌套"><a href="#13-1-2-方式二：结果嵌套" class="headerlink" title="13.1.2 方式二：结果嵌套"></a>13.1.2 方式二：结果嵌套</h3><ul>
<li>连表查询，不想方式二分成两个查询语句</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.StudentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">        select s.id sid,s.name sname,t.name tname</span><br><span class="line">        from student s,teacher t</span><br><span class="line">        where s.tid = t.id;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--这里的column应该是上面select语句定义的别名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.kuang.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.kuang.pojo.Teacher&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="13-1-3-结果"><a href="#13-1-3-结果" class="headerlink" title="13.1.3 结果"></a>13.1.3 结果</h3><ul>
<li>以上两种方式的结果输出相同</li>
</ul>
<img src="/2022/03/14/Mybatis%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/student.png" class="" title="stu">
<h2 id="13-2-一对多处理"><a href="#13-2-一对多处理" class="headerlink" title="13.2 一对多处理"></a>13.2 一对多处理</h2><h3 id="13-2-1-方式一：查询嵌套"><a href="#13-2-1-方式一：查询嵌套" class="headerlink" title="13.2.1 方式一：查询嵌套"></a>13.2.1 方式一：查询嵌套</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.TeacherMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent&quot;</span>&gt;</span></span><br><span class="line">        select s.id sid,s.name sname,t.name tname,t.id tid</span><br><span class="line">        from student s,teacher t</span><br><span class="line">        where s.tid = t.id and t.id = #&#123;tid&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.kuang.pojo.Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.kuang.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="13-2-2-方式二：结果嵌套"><a href="#13-2-2-方式二：结果嵌套" class="headerlink" title="13.2.2 方式二：结果嵌套"></a>13.2.2 方式二：结果嵌套</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.TeacherMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent&quot;</span>&gt;</span></span><br><span class="line">        select * from teacher where id = #&#123;tid&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.kuang.pojo.Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getStudents&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudents&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from student where tid = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="13-2-3-结果"><a href="#13-2-3-结果" class="headerlink" title="13.2.3 结果"></a>13.2.3 结果</h3><ul>
<li>以上两种方式结果相同</li>
</ul>
<img src="/2022/03/14/Mybatis%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/teacher.png" class="" title="tea">
<h2 id="13-3-小结"><a href="#13-3-小结" class="headerlink" title="13.3 小结"></a>13.3 小结</h2><ul>
<li>多对一：association（关联）</li>
<li>一对多：collection（集合），和上面都是在returnMap结果映射中使用</li>
<li>javaType：指定实体类中属性的类型</li>
<li>ofType：指定映射到List或集合中的pojo类型，泛型中约束的类型（一般在collection中会使用到）</li>
<li>在没有为pojo类起别名时，returnType直接使用类名会报错ClassNotFound，此时必须包的全类名</li>
<li>colume属性对应的是select语句指定的导出表的列名，如果有列的别名，就写别名</li>
<li>以上两种方式都可实现效果，视情况而定实现方式</li>
</ul>
<h1 id="十四、动态Sql"><a href="#十四、动态Sql" class="headerlink" title="十四、动态Sql"></a>十四、动态Sql</h1><h2 id="14-1-简介"><a href="#14-1-简介" class="headerlink" title="14.1 简介"></a>14.1 简介</h2><ul>
<li>对sql语句添加条件判断，根据条件判断生成不同的sql语句</li>
</ul>
<h2 id="14-2-动态sql标签"><a href="#14-2-动态sql标签" class="headerlink" title="14.2 动态sql标签"></a>14.2 动态sql标签</h2><ul>
<li>if</li>
<li>choose (when, otherwise)</li>
<li>trim (where, set)</li>
<li>foreach</li>
<li>sql</li>
</ul>
<h2 id="14-3-if"><a href="#14-3-if" class="headerlink" title="14.3 if"></a>14.3 if</h2><ul>
<li>if表示如果查询的map中存在这个字段，就拼接if中的语句，否则不进行拼接</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogWithTitleLike&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  WHERE state = ‘ACTIVE’</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>这种语句会存在一种缺陷，它只是机械的语句拼接</p>
</li>
<li><p>下面这种情况就可能拼接出：SELECT <em> FROM BLOG WHERE AND title like #{title}或者SELECT </em> FROM BLOG WHERE</p>
<ul>
<li>这就造成了sql语句的语法错误，无法完成查询，需要用到下面的where标签</li>
<li>where标签可以自动的去除一些字段，比如多余的AND或者符号“，”</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  WHERE</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">    state = #&#123;state&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">    AND author_name like #&#123;author.name&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="14-4-choose"><a href="#14-4-choose" class="headerlink" title="14.4 choose"></a>14.4 choose</h2><ul>
<li>choose类似于java中的switch，选择语句，满足其中一条则拼接对应的语句</li>
<li>如果都不满足则拼接otherwise中的语句</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE state = ‘ACTIVE’</span><br><span class="line">  <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      AND title like #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">      AND author_name like #&#123;author.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">      AND featured = 1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="14-5-trim（where、set）"><a href="#14-5-trim（where、set）" class="headerlink" title="14.5 trim（where、set）"></a>14.5 trim（where、set）</h2><h3 id="14-5-1-where"><a href="#14-5-1-where" class="headerlink" title="14.5.1 where"></a>14.5.1 where</h3><ul>
<li>将所有匹配条件放入到where标签中</li>
<li>解决了if标签的机械的语句拼接问题</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">         state = #&#123;state&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        AND title like #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">        AND author_name like #&#123;author.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="14-5-2-set"><a href="#14-5-2-set" class="headerlink" title="14.5.2 set"></a>14.5.2 set</h3><ul>
<li>完成update的操作标签</li>
<li>也是用if进行条件判断拼接sql语句</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateAuthorIfNecessary&quot;</span>&gt;</span></span><br><span class="line">  update Author</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username=#&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span>password=#&#123;password&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span>email=#&#123;email&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bio != null&quot;</span>&gt;</span>bio=#&#123;bio&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="14-5-3-trim"><a href="#14-5-3-trim" class="headerlink" title="14.5.3 trim"></a>14.5.3 trim</h2><ul>
<li>trim可以完成一些自定义的操作</li>
<li>比如自定where和set标签，意思就是trim可以替换where和set标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;WHERE&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;AND |OR &quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;SET&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="14-6-foreach"><a href="#14-6-foreach" class="headerlink" title="14.6 foreach"></a>14.6 foreach</h2><ul>
<li>这里是从POST表中查询需要的多条数据</li>
<li>这里的collection指定的是我们传入的列表，这里返回的就是列表中指定的id对应的数据</li>
<li>加入说list中的id列表为(1,2,3)，那么就将满足这些id的数据全部获取到：(id=1,name=…)、(id=2,name=…)、(id=3,name=…)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPostIn&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;domain.blog.Post&quot;</span>&gt;</span></span><br><span class="line">  SELECT *</span><br><span class="line">  FROM POST P</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">open</span>=<span class="string">&quot;ID in (&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">nullable</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">          #&#123;item&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="14-7-sql"><a href="#14-7-sql" class="headerlink" title="14.7 sql"></a>14.7 sql</h2><ul>
<li>用于封装动态sql语句</li>
<li>使用include标签引入外部sql标签的id</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">        state = #&#123;state&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        AND title like #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">        AND author_name like #&#123;author.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="十五、缓存"><a href="#十五、缓存" class="headerlink" title="十五、缓存"></a>十五、缓存</h1><h2 id="15-1-缓存介绍"><a href="#15-1-缓存介绍" class="headerlink" title="15.1 缓存介绍"></a>15.1 缓存介绍</h2><ul>
<li>多次重复查询会消耗服务器连接数据库的资源</li>
<li>缓存：存放一次查询的结果，下次查询就不用查数据库了</li>
<li>使用缓存的情况：经常查询且不经常改变的数据</li>
</ul>
<h2 id="15-2-一级缓存"><a href="#15-2-一级缓存" class="headerlink" title="15.2 一级缓存"></a>15.2 一级缓存</h2><h3 id="15-2-1-简介"><a href="#15-2-1-简介" class="headerlink" title="15.2.1 简介"></a>15.2.1 简介</h3><ul>
<li>一级缓存是默认开启的</li>
<li>只在一次SqlSession中有效，也就是SqlSession打开到关闭之间，进行查询就会存在缓存，下次查询相同数据就不会再执行一次sql语句，直接从缓存中抽取数据</li>
</ul>
<h3 id="15-2-2-缓存失效的情况"><a href="#15-2-2-缓存失效的情况" class="headerlink" title="15.2.2 缓存失效的情况"></a>15.2.2 缓存失效的情况</h3><ul>
<li>查询不同的内容</li>
<li>增删改操作会改变原来的数据，所以必定会刷新缓存</li>
<li>查询不同的Mapper.xml</li>
<li>手动清理缓存</li>
</ul>
<h2 id="15-3-二级缓存"><a href="#15-3-二级缓存" class="headerlink" title="15.3 二级缓存"></a>15.3 二级缓存</h2><h3 id="15-3-1-简介"><a href="#15-3-1-简介" class="headerlink" title="15.3.1 简介"></a>15.3.1 简介</h3><ul>
<li>二级缓存也叫全局缓存，这是由于一级缓存的作用域太低，所以诞生了二级缓存</li>
<li>基于namespace级别的缓存，一个名称空间对应一个二级缓存</li>
<li>工作机制<ul>
<li>一个会话查询一条数据，这个数据就会被放在当前会话的一级缓存中</li>
<li>如果当前会话关闭了，这个会话对应的一级缓存就没有了，现在需要的是，会话关闭时，一级缓存的数据可以保存到二级缓存中</li>
<li>新的会话查询，就可以从二级缓存中获取内容</li>
<li>不同的mapper查出的数据会放在自己对应的缓存（map）中</li>
</ul>
</li>
</ul>
<h3 id="15-3-2-开启二级缓存"><a href="#15-3-2-开启二级缓存" class="headerlink" title="15.3.2 开启二级缓存"></a>15.3.2 开启二级缓存</h3><ul>
<li>在核心配置文件添加以下标签，开启全局缓存</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--显示开启全局缓存，默认是开启的--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>配置完后还需要再需要使用二级缓存的Mapper配置文件下添加cache标签<ul>
<li>eviction为缓存策略</li>
<li>flushInterval为缓存刷新时间</li>
<li>size为最大数引用数</li>
<li>readOnly为是否只读</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;xxx&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--在当前mapper下开启二级缓存--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag">      <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">size</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--也可以直接使用cache标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">useCache</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    	...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用cache标签，不添加缓存策略时，需要将实体类实现序列化，如下</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="15-3-3-小结"><a href="#15-3-3-小结" class="headerlink" title="15.3.3 小结"></a>15.3.3 小结</h3><ul>
<li>只要开启了二级缓存，在同一个Mapper下就有效</li>
<li>所有的数据都会先放在一级缓存中<ul>
<li>只有当会话提交，或者关闭的时候，才会提交到二级缓存中</li>
</ul>
</li>
</ul>
<h2 id="15-4-缓存原理"><a href="#15-4-缓存原理" class="headerlink" title="15.4 缓存原理"></a>15.4 缓存原理</h2><ul>
<li>每个SqlSession从开启到关闭都会启动一个一级缓存</li>
<li>SqlSession关闭后一级缓存会升级为二级缓存</li>
<li>用户进行查询时会先看二级缓存是否存在查询的内容，再去一级缓存，缓存中没有要查找的对象时，就执行查询数据库的操作</li>
</ul>
<img src="/2022/03/14/Mybatis%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/cache.png" class="" title="cache">
<h2 id="15-5-自定义缓存"><a href="#15-5-自定义缓存" class="headerlink" title="15.5 自定义缓存"></a>15.5 自定义缓存</h2><h3 id="15-5-1-ehcache"><a href="#15-5-1-ehcache" class="headerlink" title="15.5.1 ehcache"></a>15.5.1 ehcache</h3><ul>
<li>EhCache 是一个纯Java的进程内缓存框架，具有快速、精干等特点，是Hibernate中默认的CacheProvider。</li>
</ul>
<h3 id="15-5-2-引入依赖"><a href="#15-5-2-引入依赖" class="headerlink" title="15.5.2 引入依赖"></a>15.5.2 引入依赖</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="15-5-3-cache配置"><a href="#15-5-3-cache配置" class="headerlink" title="15.5.3 cache配置"></a>15.5.3 cache配置</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;xxx&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="15-5-4-ehcache配置文件"><a href="#15-5-4-ehcache配置文件" class="headerlink" title="15.5.4 ehcache配置文件"></a>15.5.4 ehcache配置文件</h3>]]></content>
      <categories>
        <category>后端</category>
        <category>SSM框架</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>SSM</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql基础大全</title>
    <url>/2022/03/10/Mysql%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、MySql的语法规范"><a href="#一、MySql的语法规范" class="headerlink" title="一、MySql的语法规范"></a>一、MySql的语法规范</h1><ul>
<li>不区分大小写，但建议关键字大写，表名、列名小写</li>
<li>每条命令最好用分号结尾</li>
</ul>
<h1 id="二、注释"><a href="#二、注释" class="headerlink" title="二、注释"></a>二、注释</h1><ul>
<li>#注释文字（单行注释）</li>
<li>— 注释文字（单行注释）</li>
<li>/* 注释文字 */（多行注释）</li>
</ul>
<h1 id="三、查询"><a href="#三、查询" class="headerlink" title="三、查询"></a>三、查询</h1><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"># 分组查询推荐尽可能使用分组前筛选，即在<span class="keyword">group</span> <span class="keyword">by</span>前使用<span class="keyword">where</span></span><br><span class="line"><span class="keyword">SELECT</span> [字段名,...]</span><br><span class="line"><span class="keyword">FROM</span> [表名,...]</span><br><span class="line"><span class="keyword">WHERE</span> [条件]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> [字段名]</span><br><span class="line">    <span class="keyword">HAVING</span> [条件]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>
<h2 id="3-1-连接查询"><a href="#3-1-连接查询" class="headerlink" title="3.1 连接查询"></a>3.1 连接查询</h2><h3 id="3-1-1-内连接"><a href="#3-1-1-内连接" class="headerlink" title="3.1.1 内连接"></a>3.1.1 内连接</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    这属于sql99语法，作用等同于不加inner join时的查询</span></span><br><span class="line"><span class="comment">    不加inner join属于隐式连接，用inner join时，inner可以省略</span></span><br><span class="line"><span class="comment">    等值连接在WHERE子句中判断中写</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">SELECT</span>  [字段名,...]</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span> 别名<span class="number">1</span></span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名<span class="number">2</span> <span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">WHERE</span> [条件]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> [字段名]</span><br><span class="line">     <span class="keyword">HAVING</span> [条件]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>
<h3 id="3-1-2-外连接"><a href="#3-1-2-外连接" class="headerlink" title="3.1.2 外连接"></a>3.1.2 外连接</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  [字段名,...]</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span> 别名<span class="number">1</span></span><br><span class="line"><span class="keyword">left</span><span class="operator">/</span><span class="keyword">right</span><span class="operator">/</span><span class="keyword">full</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名<span class="number">2</span> <span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">WHERE</span> [条件]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> [字段名]</span><br><span class="line">    <span class="keyword">HAVING</span> [条件]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>
<h3 id="3-1-3-交叉连接（笛卡尔积）"><a href="#3-1-3-交叉连接（笛卡尔积）" class="headerlink" title="3.1.3 交叉连接（笛卡尔积）"></a>3.1.3 交叉连接（笛卡尔积）</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  [字段名,...]</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span> 别名<span class="number">1</span></span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> [条件]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> [字段名]</span><br><span class="line">    <span class="keyword">HAVING</span> [条件]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>
<h3 id="3-1-4-子查询"><a href="#3-1-4-子查询" class="headerlink" title="3.1.4 子查询"></a>3.1.4 子查询</h3><h3 id="3-1-5-分页查询"><a href="#3-1-5-分页查询" class="headerlink" title="3.1.5 分页查询"></a>3.1.5 分页查询</h3><ul>
<li>offset要显示条目的起始索引（起始索引从0开始）</li>
<li>size要显示的条目个数</li>
<li>网页的分页显示数据需要对数据库进行分页查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  [字段名,...]</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span> 别名<span class="number">1</span></span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> [条件]</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> [字段名]</span><br><span class="line">    <span class="keyword">HAVING</span> [条件]</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ASC</span><span class="operator">/</span><span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="keyword">offset</span>,size;</span><br></pre></td></tr></table></figure>
<h3 id="3-1-6-联合查询"><a href="#3-1-6-联合查询" class="headerlink" title="3.1.6 联合查询"></a>3.1.6 联合查询</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    适用于要查询的结果来自多个表，且多个表没有直接的连接关系，但查询的信息一致时可以使用联合查询，类似于数学的并集</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">查询语句<span class="number">1</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">查询语句<span class="number">2</span></span><br><span class="line"></span><br><span class="line"># 示例</span><br><span class="line"><span class="keyword">SELECT</span> id,cname,csex <span class="keyword">FROM</span> t_ca</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> t_id,tName,tGender <span class="keyword">FROM</span> <span class="keyword">WHERE</span> tGender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 加<span class="keyword">ALL</span>表示会包含重复的内容</span><br><span class="line"><span class="keyword">SELECT</span> id,cname,csex <span class="keyword">FROM</span> t_ca</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">SELECT</span> t_id,tName,tGender <span class="keyword">FROM</span> <span class="keyword">WHERE</span> tGender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-2-示例"><a href="#3-2-示例" class="headerlink" title="3.2 示例"></a>3.2 示例</h2><h3 id="3-2-1-查询前五条员工信息"><a href="#3-2-1-查询前五条员工信息" class="headerlink" title="3.2.1 查询前五条员工信息"></a>3.2.1 查询前五条员工信息</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees LIMIT <span class="number">0</span>,<span class="number">5</span>;  </span><br><span class="line">#或者</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees LIMIT <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-2-分页查询规律"><a href="#3-2-2-分页查询规律" class="headerlink" title="3.2.2 分页查询规律"></a>3.2.2 分页查询规律</h3><ul>
<li>page表示第几页，(page-1)*size表示每一页的起始查询位置</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询列表</span><br><span class="line"><span class="keyword">FROM</span> 表</span><br><span class="line">LIMIT (page<span class="number">-1</span>)<span class="operator">*</span>size,size;</span><br></pre></td></tr></table></figure>
<h1 id="四、增删改"><a href="#四、增删改" class="headerlink" title="四、增删改"></a>四、增删改</h1><h2 id="4-1-插入数据"><a href="#4-1-插入数据" class="headerlink" title="4.1 插入数据"></a>4.1 插入数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(元组值);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(列名序列) <span class="keyword">VALUES</span>(元组值);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(列名序列) <span class="keyword">VALUES</span>(元组值),(元组值),...;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">SET</span> 列名<span class="operator">=</span>值,列名<span class="operator">=</span>值,...    #用的少</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(列名序列) <span class="keyword">SELECT</span> 查询语句;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(列名序列) <span class="keyword">TABLE</span> 表名<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-删除数据"><a href="#4-2-删除数据" class="headerlink" title="4.2 删除数据"></a>4.2 删除数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 条件表达式</span><br></pre></td></tr></table></figure>
<h2 id="4-3-修改数据"><a href="#4-3-修改数据" class="headerlink" title="4.3 修改数据"></a>4.3 修改数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">UPDATE 表名 <span class="keyword">SET</span> 列名<span class="operator">=</span>值表达式,列名<span class="operator">=</span>值表达式,... <span class="keyword">WHERE</span> 条件表达式</span><br><span class="line">UPDATE 表名 <span class="keyword">SET</span> <span class="type">ROW</span><span class="operator">=</span>元组 <span class="keyword">WHERE</span> 条件表达式</span><br></pre></td></tr></table></figure>
<h1 id="五、视图"><a href="#五、视图" class="headerlink" title="五、视图"></a>五、视图</h1><h2 id="5-1-视图的创建"><a href="#5-1-视图的创建" class="headerlink" title="5.1 视图的创建"></a>5.1 视图的创建</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 视图名(列名序列) <span class="keyword">AS</span> <span class="keyword">SELECT</span>查询语句</span><br></pre></td></tr></table></figure>
<h2 id="5-2-视图的撤销"><a href="#5-2-视图的撤销" class="headerlink" title="5.2 视图的撤销"></a>5.2 视图的撤销</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> 视图名</span><br></pre></td></tr></table></figure>
<h1 id="六、Mysql数据类型"><a href="#六、Mysql数据类型" class="headerlink" title="六、Mysql数据类型"></a>六、Mysql数据类型</h1><h2 id="6-1-数值型"><a href="#6-1-数值型" class="headerlink" title="6.1 数值型"></a>6.1 数值型</h2><div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>范围（有符号）</th>
<th>范围（无符号）</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td>1 byte</td>
<td>(-128，127)</td>
<td>(0，255)</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>2 bytes</td>
<td>(-32 768，32 767)</td>
<td>(0，65 535)</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>3 bytes</td>
<td>(-8 388 608，8 388 607)</td>
<td>(0，16 777 215)</td>
</tr>
<tr>
<td>INT或INTEGER</td>
<td>4 bytes</td>
<td>(-2 147 483 648，2 147 483 647)</td>
<td>(0，4 294 967 295)</td>
</tr>
<tr>
<td>BIGINT</td>
<td>8 bytes</td>
<td></td>
<td></td>
</tr>
<tr>
<td>FLOAT</td>
<td>4 bytes</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DOUBLE</td>
<td>8 bytes</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DECIMAL</td>
<td>对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<h2 id="6-2-日期型"><a href="#6-2-日期型" class="headerlink" title="6.2 日期型"></a>6.2 日期型</h2><h2 id="6-3-字符型"><a href="#6-3-字符型" class="headerlink" title="6.3 字符型"></a>6.3 字符型</h2>]]></content>
      <categories>
        <category>后端</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue2基础大全一</title>
    <url>/2022/02/23/Vue2%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、基础"><a href="#一、基础" class="headerlink" title="一、基础"></a>一、基础</h1><h2 id="1-1-Hello案例"><a href="#1-1-Hello案例" class="headerlink" title="1.1 Hello案例"></a>1.1 Hello案例</h2><h2 id="1-2-数据绑定"><a href="#1-2-数据绑定" class="headerlink" title="1.2 数据绑定"></a>1.2 数据绑定</h2><ul>
<li>v-bind：单向绑定，数据只能从data流向页面</li>
<li>v-model：双向绑定，数据不仅能从data流向页面，还可以从页面流向data</li>
<li>单向绑定和双向绑定的区别：<ul>
<li>v-model一般应用再表单类元素上</li>
<li>v-model:value可以简写为v-model，因为v-model默认收集的就是value值</li>
</ul>
</li>
</ul>
<img src="/2022/02/23/Vue2%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/data.png" class="" title="data">
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 花括号里为表达式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    单向绑定：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-bind:value</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    双向绑定：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    Vue.config.productionTip = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>, <span class="comment">//根据标签id进行绑定</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="1-3-MVVM模型"><a href="#1-3-MVVM模型" class="headerlink" title="1.3 MVVM模型"></a>1.3 MVVM模型</h2><ul>
<li>M：模型，对应data中的数据</li>
<li>V：视图，页面模板</li>
<li>VM：视图模型，Vue实例，以后一般使用”vm“作为变量名接收Vue实例</li>
</ul>
<img src="/2022/02/23/Vue2%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/mvvm.png" class="" title="mvvm">
<h2 id="1-4-数据代理"><a href="#1-4-数据代理" class="headerlink" title="1.4 数据代理"></a>1.4 数据代理</h2><h3 id="1-4-1-object-defineProperty"><a href="#1-4-1-object-defineProperty" class="headerlink" title="1.4.1 object.defineProperty"></a>1.4.1 object.defineProperty</h3><ul>
<li>动态为对象绑定属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">18</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态为person对象绑定属性</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person,<span class="string">&#x27;age&#x27;</span>,&#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">18</span>	<span class="comment">// 设置属性值</span></span><br><span class="line">    <span class="attr">enumerable</span>:<span class="literal">true</span>, <span class="comment">// 控制属性是否可以枚举，默认为false</span></span><br><span class="line">    <span class="attr">writeable</span>:<span class="literal">true</span>,	<span class="comment">// 控制属性是否可以被修改，默认为false</span></span><br><span class="line">    <span class="attr">configurable</span>:<span class="literal">true</span>,	<span class="comment">// 控制属性是否可以被删除，默认为false</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 当动态修改number值时，age便会发生改变</span></span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;,</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// 当动态修改age属性值时，number就发生改变</span></span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        number = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="1-4-2-vue数据代理"><a href="#1-4-2-vue数据代理" class="headerlink" title="1.4.2 vue数据代理"></a>1.4.2 vue数据代理</h3><ul>
<li>Vue实例中的data对象中的属性就是使用到了object.defineProperty的getter和setter的操作</li>
<li>在控制台打印vue实例对象时，就可以看到代理的data数据</li>
</ul>
<img src="/2022/02/23/Vue2%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/vuedata.png" class="" title="vuedata">
<h2 id="1-5-事件处理"><a href="#1-5-事件处理" class="headerlink" title="1.5 事件处理"></a>1.5 事件处理</h2><h3 id="1-5-1-事件基本使用"><a href="#1-5-1-事件基本使用" class="headerlink" title="1.5.1 事件基本使用"></a>1.5.1 事件基本使用</h3><ul>
<li>使用v-on:xxx或@xxx绑定事件，其中xxx是事件名</li>
<li>事件的回调需要配置在methods对象中，最终会显示在vm上</li>
<li>methods中配置的函数，不需要箭头函数！否则this就不是vm了</li>
<li>methods中配置的函数，都是被Vue所管理的函数，this的指向是vm或组件实例对象</li>
<li>@click=”demo”和@click=”demo($event)”效果一样，但后者可以自定义传参</li>
</ul>
<h3 id="1-5-2-事件修饰符"><a href="#1-5-2-事件修饰符" class="headerlink" title="1.5.2 事件修饰符"></a>1.5.2 事件修饰符</h3>]]></content>
      <categories>
        <category>前端</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue2</tag>
        <tag>前后端分离</tag>
      </tags>
  </entry>
  <entry>
    <title>individual项目开发1-axios请求数据</title>
    <url>/2022/02/24/individual%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%911-axios%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>individual项目开发1-前后端数据请求实现</title>
    <url>/2022/02/25/individual%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%911-%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h1 id="一、前端工作"><a href="#一、前端工作" class="headerlink" title="一、前端工作"></a>一、前端工作</h1><h2 id="1-1-项目结构"><a href="#1-1-项目结构" class="headerlink" title="1.1 项目结构"></a>1.1 项目结构</h2><ul>
<li>在初始的项目结构的src目录下新建以下目录<ul>
<li>views：组合组件的页面</li>
<li>store/modules：供view层使用，封装数据以供view层显示</li>
<li>api：封装请求地址以及端口</li>
<li>utils：js工具包，提供常用的操作，比如创建axios请求</li>
</ul>
</li>
</ul>
<h3 id="1-1-1-utils层"><a href="#1-1-1-utils层" class="headerlink" title="1.1.1 utils层"></a>1.1.1 utils层</h3><ul>
<li>创建axios请求，命名为request.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span> <span class="comment">//引入 axios</span></span><br><span class="line"><span class="keyword">import</span> baseUrl <span class="keyword">from</span> <span class="string">&#x27;../api/baseUrl&#x27;</span> <span class="comment">//使用环境变量 + 模式的方式定义基础URL</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// 创建 axios 实例</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: baseUrl, <span class="comment">// api 的 base_url</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">15000</span>, <span class="comment">// 请求超时时间</span></span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>
<h3 id="1-1-2-api层"><a href="#1-1-2-api层" class="headerlink" title="1.1.2 api层"></a>1.1.2 api层</h3><ul>
<li>创建baseUrl.js，设置请求地址和端口</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> baseUrl = <span class="string">&quot;http://localhost:8080/&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> baseUrl;</span><br></pre></td></tr></table></figure>
<ul>
<li>创建login.js，调用util层，设置请求方法和请求参数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span> <span class="comment">//引入封装好的 axios 请求</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">userName, password</span>) </span>&#123; <span class="comment">//登录接口</span></span><br><span class="line">  <span class="keyword">return</span> request(&#123; <span class="comment">//使用封装好的 axios 进行网络请求</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/user/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="comment">//提交的数据</span></span><br><span class="line">      userName,</span><br><span class="line">      password</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-1-3-store层"><a href="#1-1-3-store层" class="headerlink" title="1.1.3 store层"></a>1.1.3 store层</h3><ul>
<li>在store/modules下创建user.js，调用api层请求方法，返回请求数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;login&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/login&#x27;</span><span class="comment">//引入登录 api 接口</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">// 登录</span></span><br><span class="line">    <span class="function"><span class="title">Login</span>(<span class="params">&#123; commit &#125;, userInfo</span>)</span> &#123; <span class="comment">//定义 Login 方法，在组件中使用 this.$store.dispatch(&quot;Login&quot;) 调用</span></span><br><span class="line">      <span class="keyword">const</span> userName = userInfo.userName.trim()</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123; <span class="comment">//封装一个 Promise</span></span><br><span class="line">        login(userName, userInfo.password).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123; <span class="comment">//使用 login 接口进行网络请求</span></span><br><span class="line">          commit(<span class="string">&#x27;increment&#x27;</span>) <span class="comment">//提交一个 mutation，通知状态改变</span></span><br><span class="line">          resolve(response) <span class="comment">//将结果封装进 Promise</span></span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          reject(error)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> user</span><br></pre></td></tr></table></figure>
<ul>
<li>在store下创建index.js，使用store封装modules模块下的数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">//引入 Vue</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span> <span class="comment">//引入 Vuex</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./modules/user&#x27;</span> <span class="comment">//引入 user module</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    user <span class="comment">//使用 user.js 中的 action</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    increment (state) &#123; </span><br><span class="line">      <span class="comment">// 变更状态</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>
<h3 id="1-1-4-views层"><a href="#1-1-4-views层" class="headerlink" title="1.1.4 views层"></a>1.1.4 views层</h3><ul>
<li>创建登录页Login.vue，调用store验证登录用户</li>
<li>可以创建Success.vue和Error.vue来进行页面跳转</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;login-container&quot;&gt;</span><br><span class="line">        &lt;el-form :model=&quot;ruleForm2&quot; :rules=&quot;rules2&quot;</span><br><span class="line">         status-icon</span><br><span class="line">         ref=&quot;ruleForm2&quot; </span><br><span class="line">         label-position=&quot;left&quot; </span><br><span class="line">         label-width=&quot;0px&quot; </span><br><span class="line">         class=&quot;demo-ruleForm login-page&quot;&gt;</span><br><span class="line">            &lt;h3 class=&quot;title&quot;&gt;系统登录&lt;/h3&gt;</span><br><span class="line">            &lt;el-form-item prop=&quot;userName&quot;&gt;</span><br><span class="line">                &lt;el-input type=&quot;text&quot; </span><br><span class="line">                    v-model=&quot;ruleForm2.userName&quot; </span><br><span class="line">                    auto-complete=&quot;off&quot; </span><br><span class="line">                    placeholder=&quot;用户名&quot;</span><br><span class="line">                &gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">                &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">                    &lt;el-input type=&quot;password&quot; </span><br><span class="line">                        v-model=&quot;ruleForm2.password&quot; </span><br><span class="line">                        auto-complete=&quot;off&quot; </span><br><span class="line">                        placeholder=&quot;密码&quot;</span><br><span class="line">                    &gt;&lt;/el-input&gt;</span><br><span class="line">                &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-checkbox </span><br><span class="line">                v-model=&quot;checked&quot;</span><br><span class="line">                class=&quot;rememberme&quot;</span><br><span class="line">            &gt;记住密码&lt;/el-checkbox&gt;</span><br><span class="line">            &lt;el-form-item style=&quot;width:100%;&quot;&gt;</span><br><span class="line">                &lt;el-button type=&quot;primary&quot; style=&quot;width:100%;&quot; @click=&quot;handleSubmit&quot; :loading=&quot;logining&quot;&gt;登录&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            logining: false,</span><br><span class="line">            ruleForm2: &#123;</span><br><span class="line">                userName: &#x27;&#x27;,</span><br><span class="line">                password: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            rules2: &#123;</span><br><span class="line">                userName: [&#123;required: true, message: &#x27;please enter your account&#x27;, trigger: &#x27;blur&#x27;&#125;],</span><br><span class="line">                password: [&#123;required: true, message: &#x27;enter your password&#x27;, trigger: &#x27;blur&#x27;&#125;]</span><br><span class="line">            &#125;,</span><br><span class="line">            checked: false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleSubmit(event)&#123;</span><br><span class="line">            this.$refs.ruleForm2.validate((valid) =&gt; &#123;</span><br><span class="line">                if(valid)&#123;</span><br><span class="line">                    this.logining = true;</span><br><span class="line">                    this.$store</span><br><span class="line">                        .dispatch(&quot;Login&quot;, this.ruleForm2)</span><br><span class="line">                        .then(response =&gt; &#123;</span><br><span class="line">                            this.loading = false;</span><br><span class="line">                            let code = response.data.code;</span><br><span class="line">                            if (code == 200) &#123;</span><br><span class="line">                                this.$router.push(&#123;</span><br><span class="line">                                path: &quot;/success&quot;,</span><br><span class="line">                                query: &#123; data: response.data.data &#125;</span><br><span class="line">                                &#125;);</span><br><span class="line">                            &#125; else &#123;</span><br><span class="line">                                this.$router.push(&#123;</span><br><span class="line">                                path: &quot;/error&quot;,</span><br><span class="line">                                query: &#123; message: response.data.msg &#125;</span><br><span class="line">                                &#125;);</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                        &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.login-container &#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.login-page &#123;</span><br><span class="line">    -webkit-border-radius: 5px;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">    margin: 180px auto;</span><br><span class="line">    width: 350px;</span><br><span class="line">    padding: 35px 35px 15px;</span><br><span class="line">    background: #fff;</span><br><span class="line">    border: 1px solid #eaeaea;</span><br><span class="line">    box-shadow: 0 0 25px #cac6c6;</span><br><span class="line">&#125;</span><br><span class="line">label.el-checkbox.rememberme &#123;</span><br><span class="line">    margin: 0px 0px 15px;</span><br><span class="line">    text-align: left;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h1 id="二、后端工作"><a href="#二、后端工作" class="headerlink" title="二、后端工作"></a>二、后端工作</h1><h2 id="2-1-跨域问题"><a href="#2-1-跨域问题" class="headerlink" title="2.1 跨域问题"></a>2.1 跨域问题</h2><ul>
<li>浏览器的跨域问题</li>
</ul>
<h2 id="2-2-Springboot解决跨域问题"><a href="#2-2-Springboot解决跨域问题" class="headerlink" title="2.2 Springboot解决跨域问题"></a>2.2 Springboot解决跨域问题</h2><ul>
<li>创建在config层下配置类CorsConfig，使用以下代码即可解决跨问问题</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//设置允许跨域的路径</span></span><br><span class="line">        registry.addMapping(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                <span class="comment">//设置允许跨域请求的域名</span></span><br><span class="line">                .allowedOriginPatterns(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                <span class="comment">//这里：是否允许证书 不再默认开启</span></span><br><span class="line">                .allowCredentials(<span class="keyword">true</span>)</span><br><span class="line">                <span class="comment">//设置允许的方法</span></span><br><span class="line">                .allowedMethods(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">                <span class="comment">//跨域允许时间</span></span><br><span class="line">                .maxAge(<span class="number">3600</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、项目启动"><a href="#三、项目启动" class="headerlink" title="三、项目启动"></a>三、项目启动</h1><ul>
<li>先启动Springboot</li>
<li>再启动Vue，在config/index.js中可以修改vue访问端口号，要避免和Springboot项目端口冲突的情况</li>
</ul>
]]></content>
      <categories>
        <category>项目开发</category>
        <category>individual项目开发</category>
      </categories>
      <tags>
        <tag>前后端分离</tag>
        <tag>个人项目</tag>
        <tag>vue</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>individual项目开发1-访问权限管理</title>
    <url>/2022/02/24/individual%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%911-%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h1 id="一、拦截器"><a href="#一、拦截器" class="headerlink" title="一、拦截器"></a>一、拦截器</h1><h2 id="1-1-定义拦截器"><a href="#1-1-定义拦截器" class="headerlink" title="1.1 定义拦截器"></a>1.1 定义拦截器</h2><ul>
<li>编写拦截器实现类，实现接口<strong>HandlerIntercepter</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span>  <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在请求处理之前进行调用（Controller方法调用之前）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;执行了TestInterceptor的preHandle方法&quot;);</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//统一拦截（查询当前session是否存在user）(这里user会在每次登陆成功后，写入session)</span></span><br><span class="line">            User user=(User)request.getSession().getAttribute(<span class="string">&quot;USER&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span>(user!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;你的登陆页地址&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;<span class="comment">//如果设置为false时，被请求时，拦截器执行到此处将不会继续操作</span></span><br><span class="line">                      <span class="comment">//如果设置为true时，请求将会继续执行后面的操作</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求处理之后进行调用，但是在视图被渲染之前（Controller方法调用之后）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> </span>&#123;</span><br><span class="line"><span class="comment">//         System.out.println(&quot;执行了TestInterceptor的postHandle方法&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在整个请求结束之后被调用，也就是在DispatcherServlet 渲染了对应的视图之后执行（主要是用于进行资源清理工作）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;执行了TestInterceptor的afterCompletion方法&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-拦截器配置"><a href="#1-2-拦截器配置" class="headerlink" title="1.2 拦截器配置"></a>1.2 拦截器配置</h2><ul>
<li>创建配置类，继承<strong>WebMvcConfigurer</strong>接口，必须添加<strong>@Configuration</strong>注解</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//注册TestInterceptor拦截器</span></span><br><span class="line">        InterceptorRegistration registration = registry.addInterceptor(<span class="keyword">new</span> AdminInterceptor());</span><br><span class="line">        registration.addPathPatterns(<span class="string">&quot;/**&quot;</span>);                      <span class="comment">//所有路径都被拦截</span></span><br><span class="line">        registration.excludePathPatterns(                         <span class="comment">//添加不拦截路径</span></span><br><span class="line">                                         <span class="string">&quot;你的登陆路径&quot;</span>,            <span class="comment">//登录</span></span><br><span class="line">                                         <span class="string">&quot;/**/*.html&quot;</span>,            <span class="comment">//html静态资源</span></span><br><span class="line">                                         <span class="string">&quot;/**/*.js&quot;</span>,              <span class="comment">//js静态资源</span></span><br><span class="line">                                         <span class="string">&quot;/**/*.css&quot;</span>,             <span class="comment">//css静态资源</span></span><br><span class="line">                                         <span class="string">&quot;/**/*.woff&quot;</span>,</span><br><span class="line">                                         <span class="string">&quot;/**/*.ttf&quot;</span></span><br><span class="line">                                         );    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>项目开发</category>
        <category>individual项目开发</category>
      </categories>
      <tags>
        <tag>前后端分离</tag>
        <tag>个人项目</tag>
        <tag>vue</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>JS基础大全</title>
    <url>/2022/02/22/js%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、JS基本操作"><a href="#一、JS基本操作" class="headerlink" title="一、JS基本操作"></a>一、JS基本操作</h1><h2 id="1-1-JS引入方式"><a href="#1-1-JS引入方式" class="headerlink" title="1.1 JS引入方式"></a>1.1 JS引入方式</h2><ul>
<li>第一种：内部标签<code>&lt;script&gt;&lt;/script&gt;</code></li>
<li>第二种：外部引入<code>&lt;script type=&quot;text/javascript&quot; src=&quot;./xxx.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<h2 id="1-2-JS的6种数据类型"><a href="#1-2-JS的6种数据类型" class="headerlink" title="1.2 JS的6种数据类型"></a>1.2 JS的6种数据类型</h2><ul>
<li>number</li>
<li>string</li>
<li>boolean</li>
<li>object</li>
<li>function  函数</li>
</ul>
<h2 id="1-3-JS特殊值"><a href="#1-3-JS特殊值" class="headerlink" title="1.3 JS特殊值"></a>1.3 JS特殊值</h2><ul>
<li>Null      空值</li>
<li>Undefine  未定义</li>
<li>NAN       非数值</li>
</ul>
<h2 id="1-4-JS数组"><a href="#1-4-JS数组" class="headerlink" title="1.4 JS数组"></a>1.4 JS数组</h2><ul>
<li>var 数组名 = [1,’abc’]</li>
</ul>
<h2 id="1-5-JS循环"><a href="#1-5-JS循环" class="headerlink" title="1.5 JS循环"></a>1.5 JS循环</h2><h3 id="1-5-1-for"><a href="#1-5-1-for" class="headerlink" title="1.5.1 for"></a>1.5.1 for</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(语句<span class="number">1</span>;语句<span class="number">2</span>;语句<span class="number">3</span>)&#123;</span><br><span class="line">    代码块</span><br><span class="line">&#125;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">for</span>(变量 <span class="keyword">in</span> 对象名/数组名)&#123;</span><br><span class="line">    代码块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-5-2-while"><a href="#1-5-2-while" class="headerlink" title="1.5.2 while"></a>1.5.2 while</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(条件)&#123;</span><br><span class="line">    代码块</span><br><span class="line">&#125;</span><br><span class="line">或</span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    代码块</span><br><span class="line">&#125;<span class="keyword">while</span>(条件);</span><br></pre></td></tr></table></figure>
<h2 id="1-6-JS函数定义方式"><a href="#1-6-JS函数定义方式" class="headerlink" title="1.6 JS函数定义方式"></a>1.6 JS函数定义方式</h2><ul>
<li>第一种：function 函数名(形参列表){函数体}</li>
<li>第二种：var 函数名 = function(形参列表){函数体}</li>
<li>函数不允许重载</li>
<li>arguments：存放形参的数组，可以在函数体中直接调用，形参列表可以不写</li>
</ul>
<h2 id="1-7-JS对象的定义"><a href="#1-7-JS对象的定义" class="headerlink" title="1.7 JS对象的定义"></a>1.7 JS对象的定义</h2><h3 id="1-7-1-第一种"><a href="#1-7-1-第一种" class="headerlink" title="1.7.1 第一种"></a>1.7.1 第一种</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">变量名.属性名 = 值</span><br><span class="line">变量名.函数名 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">this</span>关键字可以在函数体中使用</span><br></pre></td></tr></table></figure>
<h3 id="1-7-2-第二种"><a href="#1-7-2-第二种" class="headerlink" title="1.7.2 第二种"></a>1.7.2 第二种</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 对象名 = &#123;</span><br><span class="line">    属性名:值,</span><br><span class="line">    属性名:值,</span><br><span class="line">    函数名:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="1-7-3-对象的访问"><a href="#1-7-3-对象的访问" class="headerlink" title="1.7.3 对象的访问"></a>1.7.3 对象的访问</h3><ul>
<li>对象名.属性名/函数名()</li>
</ul>
<h2 id="1-8-JS入口函数"><a href="#1-8-JS入口函数" class="headerlink" title="1.8 JS入口函数"></a>1.8 JS入口函数</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 开始编写JS代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-9-JS数组"><a href="#1-9-JS数组" class="headerlink" title="1.9 JS数组"></a>1.9 JS数组</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建数组对象</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取不存在的索引，不会报错而会返回undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">//打印数组长度，length表示最大的索引</span></span><br><span class="line"><span class="comment">//length可以修改，长了填充空值，短了截断</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.length)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="二、JS函数"><a href="#二、JS函数" class="headerlink" title="二、JS函数"></a>二、JS函数</h1><h2 id="2-1-函数的声明"><a href="#2-1-函数的声明" class="headerlink" title="2.1 函数的声明"></a>2.1 函数的声明</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">形参列表</span>)</span>&#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-函数对象"><a href="#2-2-函数对象" class="headerlink" title="2.2 函数对象"></a>2.2 函数对象</h2><ul>
<li>在JS中，函数名就代表了函数对象</li>
</ul>
<h2 id="2-3-匿名函数"><a href="#2-3-匿名函数" class="headerlink" title="2.3 匿名函数"></a>2.3 匿名函数</h2><h3 id="2-3-1-语法"><a href="#2-3-1-语法" class="headerlink" title="2.3.1 语法"></a>2.3.1 语法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-立即执行函数"><a href="#2-4-立即执行函数" class="headerlink" title="2.4 立即执行函数"></a>2.4 立即执行函数</h2><h3 id="2-4-1-语法"><a href="#2-4-1-语法" class="headerlink" title="2.4.1 语法"></a>2.4.1 语法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">形参列表</span>)</span>&#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;)(实参列表)</span><br></pre></td></tr></table></figure>
<h3 id="2-4-2-特性"><a href="#2-4-2-特性" class="headerlink" title="2.4.2 特性"></a>2.4.2 特性</h3><ul>
<li>立即执行函数只执行一次</li>
</ul>
<h2 id="2-5-回调函数"><a href="#2-5-回调函数" class="headerlink" title="2.5 回调函数"></a>2.5 回调函数</h2><h3 id="2-5-1-概念"><a href="#2-5-1-概念" class="headerlink" title="2.5.1 概念"></a>2.5.1 概念</h3><ul>
<li>并非自己调用，而是由浏览器自动调用的函数</li>
<li>一般是作为函数的参数进行使用，可以通过匿名函数的写法进行传递，也可以直接传递函数名</li>
</ul>
<h3 id="2-5-2-语法"><a href="#2-5-2-语法" class="headerlink" title="2.5.2 语法"></a>2.5.2 语法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">注意到click方法中是一个函数而不是一个变量</span><br><span class="line"><span class="comment">//它就是回调函数</span></span><br><span class="line">$(<span class="string">&quot;#btn_1&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&quot;Btn 1 Clicked&quot;</span>);</span><br><span class="line">&#125;);  </span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">click</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 它就是回调函数</span></span><br><span class="line">    alert(<span class="string">&quot;Btn 1 Clicked&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">$(<span class="string">&quot;#btn_1&quot;</span>).click(click);  </span><br></pre></td></tr></table></figure>
<h1 id="三、JS对象"><a href="#三、JS对象" class="headerlink" title="三、JS对象"></a>三、JS对象</h1><h2 id="3-1-对象的分类"><a href="#3-1-对象的分类" class="headerlink" title="3.1 对象的分类"></a>3.1 对象的分类</h2><ul>
<li>内建对象</li>
<li>宿主对象</li>
<li>自定义对象</li>
</ul>
<h2 id="3-2-对象的定义"><a href="#3-2-对象的定义" class="headerlink" title="3.2 对象的定义"></a>3.2 对象的定义</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> 变量名 = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">变量名.属性名 = 值</span><br><span class="line">变量名.函数名 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="built_in">this</span>关键字可以在函数体中使用</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">var</span> 对象名 = &#123;</span><br><span class="line">        属性名:值,</span><br><span class="line">        属性名:值,</span><br><span class="line">        函数名:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="3-3-this关键字"><a href="#3-3-this关键字" class="headerlink" title="3.3 this关键字"></a>3.3 this关键字</h2><ol>
<li>当以函数的形式调用时，this是window</li>
<li>当以方法的形式调用时，谁调用方法，this就是谁</li>
<li>当以构造函数的形式调用时，this就是新创建的那个对象</li>
</ol>
<h2 id="3-4-构造函数"><a href="#3-4-构造函数" class="headerlink" title="3.4 构造函数"></a>3.4 构造函数</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,gender</span>)</span>&#123;</span><br><span class="line">    alert(<span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">this</span>.name = name;    <span class="comment">//添加属性name</span></span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">    <span class="built_in">this</span>.gender = gender;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> per = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure>
<h3 id="3-4-1-执行流程"><a href="#3-4-1-执行流程" class="headerlink" title="3.4.1 执行流程"></a>3.4.1 执行流程</h3><ol>
<li>立刻创建一个新的对象</li>
<li>将新建的对象设置为函数中的this，在构造函数中可以使用this来引用新建的对象</li>
<li>执行函数中的代码</li>
<li>将新建的对象作为返回值返回</li>
</ol>
<h2 id="3-5-原型对象"><a href="#3-5-原型对象" class="headerlink" title="3.5 原型对象"></a>3.5 原型对象</h2><img src="/2022/02/22/js%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/prototype.png" class="" title="image">
<ul>
<li>JS中万物皆对象</li>
<li>每个对象都具有<strong>proto</strong>，用于指向其构造函数的原型，这也保证了实例能够访问在构造函数原型中定义的属性和方法</li>
<li>方法是一个特殊的对象（可以把方法的声明当作构造函数），它同时具有<strong>proto</strong>指针，以及属性prototype</li>
</ul>
<h1 id="四、Dom操作"><a href="#四、Dom操作" class="headerlink" title="四、Dom操作"></a>四、Dom操作</h1><h2 id="4-1-操作元素节点"><a href="#4-1-操作元素节点" class="headerlink" title="4.1 操作元素节点"></a>4.1 操作元素节点</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th style="text-align:center">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">getElementById()</td>
<td style="text-align:center">通过id属性获取一个元素节点对象</td>
</tr>
<tr>
<td style="text-align:center">getElementsByTagName()</td>
<td style="text-align:center">通过标签名获取一组元素节点对象</td>
</tr>
<tr>
<td style="text-align:center">getElementsByName()</td>
<td style="text-align:center">通过name属性获取一组元素节点对象</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>获取到元素对象/对象数组后，这些对象包含以下属性<ul>
<li>对象名.innerHtml</li>
<li>对象名.id</li>
<li>对象名.name</li>
<li>对象名.value</li>
<li>对象名.className</li>
<li>对象名.时间名=function(){}</li>
</ul>
</li>
</ul>
<h1 id="五、JS事件"><a href="#五、JS事件" class="headerlink" title="五、JS事件"></a>五、JS事件</h1><h2 id="5-1-事件的概念"><a href="#5-1-事件的概念" class="headerlink" title="5.1 事件的概念"></a>5.1 事件的概念</h2><ul>
<li>电脑输入设备与页面进行交互的响应</li>
</ul>
<h2 id="5-2-常用的事件"><a href="#5-2-常用的事件" class="headerlink" title="5.2 常用的事件"></a>5.2 常用的事件</h2><ul>
<li>onload：加载完成事件，页面加载完成之后，常用于做页面js代码初始化操作</li>
<li>onclick：单击事件，常用于按钮点击的响应操作</li>
<li>onblur：失去焦点事件，常用于输入框失去焦点后验证其输入内容是否合法</li>
<li>onchange：内容发生改变事件，常用于下拉列表和输入框内容发生改变后操作</li>
<li>onsubmit：表单提交事件，常用于表单提交前，验证所有表单是否合法</li>
</ul>
<h2 id="5-3-事件的注册"><a href="#5-3-事件的注册" class="headerlink" title="5.3 事件的注册"></a>5.3 事件的注册</h2><h3 id="5-3-1-静态注册"><a href="#5-3-1-静态注册" class="headerlink" title="5.3.1 静态注册"></a>5.3.1 静态注册</h3><ul>
<li>通过html标签的事件属性直接赋予事件响应后的代码</li>
</ul>
<h3 id="5-3-2-动态注册"><a href="#5-3-2-动态注册" class="headerlink" title="5.3.2 动态注册"></a>5.3.2 动态注册</h3><ul>
<li>是指先通过js代码得到标签的dom对象，然后再通过：dom对象.事件名=function(){}这种形式赋予事件响应后的代码</li>
</ul>
<h3 id="5-3-3-步骤"><a href="#5-3-3-步骤" class="headerlink" title="5.3.3 步骤"></a>5.3.3 步骤</h3><ol>
<li>获取标签对象</li>
<li>标签对象.事件名=function(){}</li>
</ol>
<h2 id="5-4-事件对象event"><a href="#5-4-事件对象event" class="headerlink" title="5.4 事件对象event"></a>5.4 事件对象event</h2><ul>
<li>在给元素绑定事件时，写上函数参数event</li>
<li>使用此event可以在触发事件时达到某些效果</li>
<li>为兼容IE8，函数体中可以写上此语句：event = event||window.event;</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;box1&quot;</span>);</span><br><span class="line">box1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;     <span class="comment">//参数名一般写做event或e</span></span><br><span class="line">    <span class="keyword">if</span>(event.target.className == <span class="string">&quot;link&quot;</span>)&#123;   <span class="comment">//判断子元素中是否有a链接元素</span></span><br><span class="line">        alert(<span class="string">&quot;我是box1的单击事件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-5-事件的冒泡"><a href="#5-5-事件的冒泡" class="headerlink" title="5.5 事件的冒泡"></a>5.5 事件的冒泡</h2><ul>
<li>给覆盖在父元素上的子元素都绑定上事件，点击子元素时，会先触发子元素的事件，然后再触发父元素的事件</li>
<li>event.cancelBubble = true;可以用来取消父元素的冒泡</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> box1 = <span class="built_in">document</span>.getElementById(<span class="string">&quot;box1&quot;</span>);</span><br><span class="line">box1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//回调函数，无需自己调用</span></span><br><span class="line">    alert(<span class="string">&quot;我是div的单击响应函数&quot;</span>);</span><br><span class="line">    event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-6-事件的委派"><a href="#5-6-事件的委派" class="headerlink" title="5.6 事件的委派"></a>5.6 事件的委派</h2><ul>
<li>给各子元素共同的祖先元素绑定事件，这样后代元素上的事件触发时，则会统一触发祖先绑定的事件</li>
<li>这样做无需一个个给子元素单独绑定事件，比较方便</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementsById(<span class="string">&quot;ul&quot;</span>);</span></span><br><span class="line"><span class="javascript">    ul.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        alert(<span class="string">&quot;我是ul的单击事件&quot;</span>)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前端</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>乐理基础大全</title>
    <url>/2022/03/09/%E4%B9%90%E7%90%86%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、音的概念"><a href="#一、音的概念" class="headerlink" title="一、音的概念"></a>一、音的概念</h1><h2 id="1-1-音名-唱名"><a href="#1-1-音名-唱名" class="headerlink" title="1.1 音名/唱名"></a>1.1 音名/唱名</h2><ul>
<li>音名是对音的一种标记，而唱名则是我们平时哼出来的do/re/mi/fa/sol/la/ti</li>
<li>音名像是对音的一种抽象，而唱名则是具体的对音的表现，也就是说任何一个音名都可以表示为1，然后一次推导出其他音名，当然我这里说的是自然大调的情况，后面在做详细解释</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>音名</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>唱名</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
</tbody>
</table>
</div>
<h2 id="1-2-十二平均律"><a href="#1-2-十二平均律" class="headerlink" title="1.2 十二平均律"></a>1.2 十二平均律</h2><ul>
<li>按照乐理从古至今的发展，人们发现了<strong>十二平均律</strong>这样一套声音的规律</li>
<li>在物理学中，声音是由振动产生的，而物体不同震动的频率会给人不同的听觉效果，国际上规定440HZ作为<strong>标准音</strong>，即钢琴上的第49号键（A键）的震动频率</li>
<li>根据振动给人听感上的不同，人们以<strong>每隔半音</strong>（规定的频率大小）的形式来规定音与音的距离关系（音程），因此就有了十二平均律的概念</li>
<li>比如对于1、2、3、4、5、6、7、1来说，它们就满足<strong>“全全半全全全半”</strong>的音程关系</li>
</ul>
<h2 id="1-3-音程-音数"><a href="#1-3-音程-音数" class="headerlink" title="1.3 音程/音数"></a>1.3 音程/音数</h2><ul>
<li>音程：表示音与音之间的距离，主要说的还是<strong>振动频率</strong>的关系</li>
<li>音数：衡量音程的一种<strong>单位</strong>，记录音与音之间的半音数</li>
<li>具体的音程与音数关系有以下几种：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">音程</th>
<th style="text-align:center">音数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">纯一度</td>
<td style="text-align:center">$0$</td>
</tr>
<tr>
<td style="text-align:center">小二度</td>
<td style="text-align:center">$\tfrac{1}{2}$</td>
</tr>
<tr>
<td style="text-align:center">大二度</td>
<td style="text-align:center">$1$</td>
</tr>
<tr>
<td style="text-align:center">小三度</td>
<td style="text-align:center">$1\tfrac{1}{2}$</td>
</tr>
<tr>
<td style="text-align:center">大三度</td>
<td style="text-align:center">$2$</td>
</tr>
<tr>
<td style="text-align:center">纯四度</td>
<td style="text-align:center">$2\tfrac{1}{2}$</td>
</tr>
<tr>
<td style="text-align:center">增四度</td>
<td style="text-align:center">$3$</td>
</tr>
<tr>
<td style="text-align:center">纯五度</td>
<td style="text-align:center">$3\tfrac{1}{2}$</td>
</tr>
<tr>
<td style="text-align:center">减五度</td>
<td style="text-align:center">$3$</td>
</tr>
<tr>
<td style="text-align:center">小六度</td>
<td style="text-align:center">$4$</td>
</tr>
<tr>
<td style="text-align:center">大六度</td>
<td style="text-align:center">$4 \tfrac{1}{2}$</td>
</tr>
<tr>
<td style="text-align:center">小七度</td>
<td style="text-align:center">$5$</td>
</tr>
<tr>
<td style="text-align:center">大七度</td>
<td style="text-align:center">$5\tfrac{1}{2}$</td>
</tr>
<tr>
<td style="text-align:center">纯八度</td>
<td style="text-align:center">$6$</td>
</tr>
</tbody>
</table>
</div>
<h1 id="二、调式"><a href="#二、调式" class="headerlink" title="二、调式"></a>二、调式</h1><h2 id="2-1-大调式"><a href="#2-1-大调式" class="headerlink" title="2.1 大调式"></a>2.1 大调式</h2><h3 id="2-1-1-自然大调"><a href="#2-1-1-自然大调" class="headerlink" title="2.1.1 自然大调"></a>2.1.1 自然大调</h3><ul>
<li>满足<strong>“全全半全全全半”</strong>的关系</li>
<li>$1、2、3、4、5、6、7、\overline{1}$</li>
</ul>
<h3 id="2-1-2-和声大调"><a href="#2-1-2-和声大调" class="headerlink" title="2.1.2 和声大调"></a>2.1.2 和声大调</h3><ul>
<li>$1、2、3、4、5、{}^b6、7、\overline{1}$</li>
</ul>
<h3 id="2-1-3-旋律大调"><a href="#2-1-3-旋律大调" class="headerlink" title="2.1.3 旋律大调"></a>2.1.3 旋律大调</h3><ul>
<li>$1、2、3、4、5、{}^b6、{}^b7、1$</li>
</ul>
<h2 id="2-2-小调式"><a href="#2-2-小调式" class="headerlink" title="2.2 小调式"></a>2.2 小调式</h2><h3 id="2-2-1-自然小调"><a href="#2-2-1-自然小调" class="headerlink" title="2.2.1 自然小调"></a>2.2.1 自然小调</h3><ul>
<li>$6、7、\overline{1}、\overline{2}、\overline{3}、\overline{4}、\overline{5}、\overline{6}$</li>
</ul>
<h3 id="2-2-2-和声小调"><a href="#2-2-2-和声小调" class="headerlink" title="2.2.2 和声小调"></a>2.2.2 和声小调</h3><ul>
<li>$6、7、\overline{1}、\overline{2}、\overline{3}、\overline{4}、{}^井\overline{5}、\overline{6}$</li>
</ul>
<h3 id="2-2-3-旋律小调"><a href="#2-2-3-旋律小调" class="headerlink" title="2.2.3 旋律小调"></a>2.2.3 旋律小调</h3><ul>
<li>$6、7、\overline{1}、\overline{2}、\overline{3}、{}^井\overline{4}、{}^井\overline{5}、\overline{6}$</li>
</ul>
<h2 id="2-3-自然大调"><a href="#2-3-自然大调" class="headerlink" title="2.3 自然大调"></a>2.3 自然大调</h2><ul>
<li>以下对自然大调进行着重讲解，因为自然大调在流行音乐中较为常见</li>
<li>在吉他谱中，会在琴谱左上角标注C=1，这就规定了这首歌的<strong>调式为C调</strong><ul>
<li>同理，如果标注G=1，则这首歌的<strong>调式为G调</strong></li>
<li>根据半音的规律，我们就可以在自然大调中推导出<strong>十二种调式</strong>（十二平均律）</li>
<li>不同调式的给人的感觉是不同的，音名的构成也是不同的，下表就列出了不同调式的音的构成</li>
</ul>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">调</th>
<th style="text-align:center">音名</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">唱名</td>
<td style="text-align:center">1、2、3、4、5、6、7、1</td>
</tr>
<tr>
<td style="text-align:center">C</td>
<td style="text-align:center">C、D、E、F、G、A、B、C</td>
</tr>
<tr>
<td style="text-align:center">bD</td>
<td style="text-align:center">#C、#D、#E、#F、#G、#A、#B、#C</td>
</tr>
<tr>
<td style="text-align:center">D</td>
<td style="text-align:center">D、E、#F、G、A、B、#C、D</td>
</tr>
<tr>
<td style="text-align:center">bE</td>
<td style="text-align:center">bE、F、G、bA、bB、C、D、bE</td>
</tr>
<tr>
<td style="text-align:center">E</td>
<td style="text-align:center">E、#F、#G、A、B、#C、#D、E</td>
</tr>
<tr>
<td style="text-align:center">F</td>
<td style="text-align:center">F、G、A、bB、C、D、E、F</td>
</tr>
<tr>
<td style="text-align:center">bG</td>
<td style="text-align:center">bG、bA、bB、bC、bD、bE、F、bG</td>
</tr>
<tr>
<td style="text-align:center">G</td>
<td style="text-align:center">G、A、B、C、D、E、#F、G</td>
</tr>
<tr>
<td style="text-align:center">bA</td>
<td style="text-align:center">bA、bB、C、bD、bE、F、G、bA</td>
</tr>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">A、B、#C、D、E、#F、#G、A</td>
</tr>
<tr>
<td style="text-align:center">bB</td>
<td style="text-align:center">bB、C、D、bE、F、G、A、bB</td>
</tr>
<tr>
<td style="text-align:center">B</td>
<td style="text-align:center">B、#C、#D、E、#F、#G、#A、B</td>
</tr>
</tbody>
</table>
</div>
<h1 id="三、和弦"><a href="#三、和弦" class="headerlink" title="三、和弦"></a>三、和弦</h1><h2 id="3-1-和弦分类"><a href="#3-1-和弦分类" class="headerlink" title="3.1 和弦分类"></a>3.1 和弦分类</h2><h3 id="3-1-1-三度和弦"><a href="#3-1-1-三度和弦" class="headerlink" title="3.1.1 三度和弦"></a>3.1.1 三度和弦</h3><ul>
<li>三和弦（三个音）</li>
<li>五和弦（四个音）</li>
<li>九和弦（五个音）</li>
<li>十一和弦（六个音）</li>
<li>十三和弦（七个音）</li>
</ul>
<h3 id="3-1-2-非三度和弦"><a href="#3-1-2-非三度和弦" class="headerlink" title="3.1.2 非三度和弦"></a>3.1.2 非三度和弦</h3><ul>
<li>挂留和弦</li>
<li>强力和弦</li>
</ul>
<h2 id="3-2-三和弦"><a href="#3-2-三和弦" class="headerlink" title="3.2 三和弦"></a>3.2 三和弦</h2><h3 id="3-2-1-大三和弦"><a href="#3-2-1-大三和弦" class="headerlink" title="3.2.1 大三和弦"></a>3.2.1 大三和弦</h3><ul>
<li>大三度+小三度</li>
<li>如C调的C：1-3-5、F：4-6-1、G：5-7-2</li>
</ul>
<h3 id="3-2-2-小三和弦"><a href="#3-2-2-小三和弦" class="headerlink" title="3.2.2 小三和弦"></a>3.2.2 小三和弦</h3><ul>
<li>小三度+大三度</li>
<li>如C调的Dm：2-4-6、Em：3-5-7、Am：6-1-3</li>
</ul>
<h3 id="3-2-3-增三和弦"><a href="#3-2-3-增三和弦" class="headerlink" title="3.2.3 增三和弦"></a>3.2.3 增三和弦</h3><ul>
<li>大三度+大三度</li>
<li>Caug：1-3-#5</li>
</ul>
<h3 id="3-2-4-减三和弦"><a href="#3-2-4-减三和弦" class="headerlink" title="3.2.4 减三和弦"></a>3.2.4 减三和弦</h3><ul>
<li>小三度+小三度</li>
<li>Cdim：1-b3-b5</li>
</ul>
<h2 id="3-3-七和弦"><a href="#3-3-七和弦" class="headerlink" title="3.3 七和弦"></a>3.3 七和弦</h2><h3 id="3-3-1-大七和弦"><a href="#3-3-1-大七和弦" class="headerlink" title="3.3.1 大七和弦"></a>3.3.1 大七和弦</h3><ul>
<li>大三和弦+根音的大7度音</li>
<li>Cmaj7：1-3-5-7</li>
<li>Fmaj7：4-6-1-3</li>
</ul>
<h3 id="3-3-2-大小七和弦（属七和弦）"><a href="#3-3-2-大小七和弦（属七和弦）" class="headerlink" title="3.3.2 大小七和弦（属七和弦）"></a>3.3.2 大小七和弦（属七和弦）</h3><ul>
<li>大三和弦+根音的小7度音</li>
<li>C7：1-3-5-b7</li>
<li>G7：5-7-2-4</li>
</ul>
<h3 id="3-3-3-小小七和弦"><a href="#3-3-3-小小七和弦" class="headerlink" title="3.3.3 小小七和弦"></a>3.3.3 小小七和弦</h3><ul>
<li>小三和弦+根音的小7度音</li>
<li>Dm7：2-4-6-1</li>
<li>Em7：3-5-7-2</li>
<li>Am7：6-1-3-5</li>
</ul>
<h3 id="3-3-4-减小七和弦"><a href="#3-3-4-减小七和弦" class="headerlink" title="3.3.4 减小七和弦"></a>3.3.4 减小七和弦</h3><ul>
<li>减三+根音7度音</li>
<li>Bdim7：7-2-4-6</li>
</ul>
<h3 id="3-3-5-减减七和弦"><a href="#3-3-5-减减七和弦" class="headerlink" title="3.3.5 减减七和弦"></a>3.3.5 减减七和弦</h3><ul>
<li>减三+根音减7度音</li>
<li>Bm-5：7-2-4-b6</li>
</ul>
<h2 id="3-4-九和弦"><a href="#3-4-九和弦" class="headerlink" title="3.4 九和弦"></a>3.4 九和弦</h2><h3 id="3-4-1-属九和弦"><a href="#3-4-1-属九和弦" class="headerlink" title="3.4.1 属九和弦"></a>3.4.1 属九和弦</h3><ul>
<li>在属七和弦上加上根音的九度音</li>
<li>C9：1-3-5-b7-2</li>
</ul>
<h3 id="3-4-2-Add和弦"><a href="#3-4-2-Add和弦" class="headerlink" title="3.4.2 Add和弦"></a>3.4.2 Add和弦</h3><ul>
<li><p>三和弦基础上再添加的音符，后面的数字代表距离根音的度数</p>
</li>
<li><p>Cadd9：1-3-5-2（根音的9度音）</p>
</li>
</ul>
<h2 id="3-5-挂留和弦"><a href="#3-5-挂留和弦" class="headerlink" title="3.5 挂留和弦"></a>3.5 挂留和弦</h2><ul>
<li>Csus2：1-2-5（三度音转为二度音）</li>
<li>Csus4：1-4-5（三度音转为四度音）</li>
</ul>
<h1 id="四、节奏"><a href="#四、节奏" class="headerlink" title="四、节奏"></a>四、节奏</h1><h2 id="4-1-音符"><a href="#4-1-音符" class="headerlink" title="4.1 音符"></a>4.1 音符</h2><h3 id="4-1-1-音符分类"><a href="#4-1-1-音符分类" class="headerlink" title="4.1.1 音符分类"></a>4.1.1 音符分类</h3><ul>
<li>全音符</li>
<li>二分音符</li>
<li>四分音符</li>
<li>八分音符</li>
<li>十六分音符</li>
<li>三十二分音符</li>
<li>休止符</li>
<li>浮点音符：延长当前音符时值的一半</li>
</ul>
<img src="/2022/03/09/%E4%B9%90%E7%90%86%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/yinfu.jpeg" class="" title="yinfu">
<h3 id="4-1-2-音符关系"><a href="#4-1-2-音符关系" class="headerlink" title="4.1.2 音符关系"></a>4.1.2 音符关系</h3><ul>
<li>$全音符=2<em>二分音符=4</em>四分音符=8<em>八分音符=16</em>十六分音符$</li>
</ul>
<h2 id="4-2-节拍"><a href="#4-2-节拍" class="headerlink" title="4.2 节拍"></a>4.2 节拍</h2><ul>
<li><strong>bpm</strong>：每分钟节拍数</li>
<li>常见的节拍（从后往前读）：<ul>
<li>4/4：表示以四分音符为一拍，每小节四拍；强弱规律：<strong>强、弱、次强、弱</strong></li>
<li>3/8：表示以八分音符为一拍，每小节三拍；强弱规律：<strong>强、弱、弱</strong></li>
<li>6/8：强弱规律：<strong>强、弱、弱、次强、弱、弱</strong></li>
</ul>
</li>
</ul>
<h2 id="4-3-常见节奏"><a href="#4-3-常见节奏" class="headerlink" title="4.3 常见节奏"></a>4.3 常见节奏</h2><h3 id="4-3-1-弹奏节奏型"><a href="#4-3-1-弹奏节奏型" class="headerlink" title="4.3.1 弹奏节奏型"></a>4.3.1 弹奏节奏型</h3><h3 id="4-3-2-扫弦节奏型"><a href="#4-3-2-扫弦节奏型" class="headerlink" title="4.3.2 扫弦节奏型"></a>4.3.2 扫弦节奏型</h3><h2 id="五、吉他谱"><a href="#五、吉他谱" class="headerlink" title="五、吉他谱"></a>五、吉他谱</h2><h3 id="5-1-常见符号"><a href="#5-1-常见符号" class="headerlink" title="5.1 常见符号"></a>5.1 常见符号</h3>]]></content>
      <categories>
        <category>文化艺术</category>
        <category>乐理</category>
      </categories>
      <tags>
        <tag>乐理</tag>
        <tag>调式</tag>
        <tag>和弦</tag>
        <tag>和弦进行</tag>
        <tag>吉他音阶分布</tag>
      </tags>
  </entry>
  <entry>
    <title>前端组件实现-基于vis.js的节点展开</title>
    <url>/2022/03/12/%E5%89%8D%E7%AB%AF%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0-%E5%9F%BA%E4%BA%8Evis-js%E7%9A%84%E8%8A%82%E7%82%B9%E5%B1%95%E5%BC%80/</url>
    <content><![CDATA[<h1 id="一、数据准备"><a href="#一、数据准备" class="headerlink" title="一、数据准备"></a>一、数据准备</h1><h2 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h2><ul>
<li>id最好设置为数值型，方便后面的查找工作，需要通过id值查找其在staticNodes中的下标值</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置点和边的数据</span></span><br><span class="line"><span class="keyword">var</span> staticNodes = [</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">1</span>, <span class="attr">label</span>:<span class="string">&quot;高玥&quot;</span>, <span class="attr">group</span>:<span class="number">1</span>, <span class="attr">pid</span>:<span class="number">0</span>, <span class="attr">subids</span>:[<span class="number">2</span>,<span class="number">3</span>]&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">2</span>, <span class="attr">label</span>:<span class="string">&quot;篮球&quot;</span>, <span class="attr">group</span>:<span class="number">2</span>, <span class="attr">pid</span>:<span class="number">1</span>, <span class="attr">subids</span>:[<span class="number">4</span>]&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">3</span>, <span class="attr">label</span>:<span class="string">&quot;羽毛球&quot;</span>, <span class="attr">group</span>:<span class="number">2</span>, <span class="attr">pid</span>:<span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">4</span>, <span class="attr">label</span>:<span class="string">&quot;技巧&quot;</span>, <span class="attr">group</span>:<span class="number">3</span>,<span class="attr">pid</span>:<span class="number">2</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> staticEdges = [</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">label</span>:<span class="string">&quot;兴趣&quot;</span>, <span class="attr">from</span>: <span class="number">1</span>,<span class="attr">to</span>: <span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">label</span>:<span class="string">&quot;兴趣&quot;</span>, <span class="attr">from</span>: <span class="number">1</span>,<span class="attr">to</span>: <span class="number">3</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">label</span>:<span class="string">&quot;有&quot;</span>, <span class="attr">from</span>: <span class="number">2</span>,<span class="attr">to</span>: <span class="number">4</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="1-2-数据格式"><a href="#1-2-数据格式" class="headerlink" title="1.2 数据格式"></a>1.2 数据格式</h2><h3 id="1-2-1-格式要求"><a href="#1-2-1-格式要求" class="headerlink" title="1.2.1 格式要求"></a>1.2.1 格式要求</h3><ul>
<li>一般vis要显示network，需要以下格式<ul>
<li>node：id、label、group</li>
<li>edge：id、label、from、to</li>
</ul>
</li>
<li>为了实现节点展开收缩就需要在nodes中再添加两个字段：<ul>
<li>pid：父节点id</li>
<li>subids：子节点id列表</li>
</ul>
</li>
</ul>
<h3 id="1-2-2-后端实现方案（首页展示）："><a href="#1-2-2-后端实现方案（首页展示）：" class="headerlink" title="1.2.2 后端实现方案（首页展示）："></a>1.2.2 后端实现方案（首页展示）：</h3><ul>
<li>需要先给数据分层，添加level标签，表示层级关系，只需要标注第一层即可，因为其他层会因点击事件而进行展开</li>
<li>nodes节点中的pid和subids需要进行判断，再进行添加<ul>
<li>设置pid：根据关系进行判断（根据to，查找from），对于单向关系，比如（我，有，篮球），那么篮球的pid就设置为“我”的id值，<strong>注意：目前只考虑节点的父节点只有一个的情况，如果pid有多个就需要设置列表</strong></li>
<li>设置subids：根据关系进行判断（根据from，查找to），如存在一组关系（我，有，篮球）、（我，年龄，18），那么“我”的subids即表示为“篮球”和“18”对应id组成的列表</li>
<li>设置group：group是为了对节点进行区分<ul>
<li>前端实现：在进行节点展开时，会为nodes添加节点数据，这里就可以为节点添加上相同group，可以取一个随机整数</li>
<li>后端实现：对于关系中from标签相同的一组关系，为其to标签对应的节点添加上相同group值</li>
</ul>
</li>
</ul>
</li>
<li>为vis注入数据时，先注入第一层的数据，即先显示第一层的节点关系</li>
</ul>
<h1 id="二、vis-js绘制network"><a href="#二、vis-js绘制network" class="headerlink" title="二、vis.js绘制network"></a>二、vis.js绘制network</h1><h2 id="2-1-将数据注入到vis中"><a href="#2-1-将数据注入到vis中" class="headerlink" title="2.1 将数据注入到vis中"></a>2.1 将数据注入到vis中</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> nodes = <span class="keyword">new</span> vis.DataSet(staticNodes);</span><br><span class="line"><span class="keyword">var</span> edges = <span class="keyword">new</span> vis.DataSet(staticEdges);</span><br></pre></td></tr></table></figure>
<h2 id="2-2-配置network"><a href="#2-2-配置network" class="headerlink" title="2.2 配置network"></a>2.2 配置network</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建一个图的容器</span></span><br><span class="line"><span class="keyword">var</span> container = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;mynetwork&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = &#123;</span><br><span class="line">    <span class="attr">nodes</span>: nodes,</span><br><span class="line">    <span class="attr">edges</span>: edges</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">    <span class="attr">nodes</span>:&#123;</span><br><span class="line">        <span class="attr">shape</span>: <span class="string">&quot;dot&quot;</span>,</span><br><span class="line">        <span class="comment">// scaling: &#123;</span></span><br><span class="line">        <span class="comment">//     customScalingFunction: function(min, max, total, value)&#123;</span></span><br><span class="line">        <span class="comment">//         return value / total;</span></span><br><span class="line">        <span class="comment">//     &#125;,</span></span><br><span class="line">        <span class="comment">//     min:5,</span></span><br><span class="line">        <span class="comment">//     max:150,</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">edges</span>: &#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="number">0.15</span>,</span><br><span class="line">        <span class="comment">//physics: false,</span></span><br><span class="line">        <span class="attr">smooth</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&quot;continuous&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">interaction</span>: &#123;</span><br><span class="line">        <span class="attr">hover</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">//hoverConnectedEdges: true</span></span><br><span class="line">        <span class="comment">//hideEdgesOnDrag: true,</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">physics</span>: &#123;</span><br><span class="line">        <span class="comment">//enabled: false,</span></span><br><span class="line">        <span class="attr">repulsion</span>:&#123;</span><br><span class="line">            <span class="attr">nodeDistance</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">springLength</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">springConstant</span>: <span class="number">0.5</span>,</span><br><span class="line">            <span class="attr">centralGravity</span>: <span class="number">0.9</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">layout</span>:&#123;</span><br><span class="line">        <span class="comment">//hierarchical: &#123;direction: &#x27;UD&#x27;, sortMethod: &#x27;hubsize&#x27;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 图可视化</span></span><br><span class="line"><span class="comment">// initialize your network!</span></span><br><span class="line"><span class="keyword">var</span> network = <span class="keyword">new</span> vis.Network(container, data, options);</span><br></pre></td></tr></table></figure>
<h2 id="2-3-为节点创建点击事件"><a href="#2-3-为节点创建点击事件" class="headerlink" title="2.3 为节点创建点击事件"></a>2.3 为节点创建点击事件</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 点击事件获取的是节点的列表，一般列表中只有一个节点id</span></span><br><span class="line">network.on(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 点击的是节点的情况（不考虑点击边的情况）</span></span><br><span class="line">    <span class="keyword">if</span> (params.nodes.length != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> clickNodeId = params.nodes[<span class="number">0</span>];</span><br><span class="line">        <span class="comment">//console.log(findArrayIndexById(staticNodes,clickNodeId));</span></span><br><span class="line">        <span class="comment">//removeSubNodes(clickNodeId);</span></span><br><span class="line">        <span class="comment">//removeByRecur(clickNodeId)</span></span><br><span class="line">        <span class="comment">//console.log(nodes.get(1));</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">//	逻辑分离，如果点击的节点存在子节点，则递归收缩节点</span></span><br><span class="line">        <span class="comment">//	否则进行节点展开</span></span><br><span class="line">        <span class="keyword">if</span>(getSubNodes(clickNodeId).length!=<span class="number">0</span>)</span><br><span class="line">            removeNodes(clickNodeId);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            addNodes(clickNodeId);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="三、展开收缩逻辑"><a href="#三、展开收缩逻辑" class="headerlink" title="三、展开收缩逻辑"></a>三、展开收缩逻辑</h1><ul>
<li>具体的逻辑实现如下：<ul>
<li>第一步：<strong>getSubNodes</strong>函数获取到点击节点的<strong>下级节点id列表</strong>subNodes</li>
<li>第二步：判断<strong>subNodes</strong>是否为空，如果<strong>不为空</strong>执行<strong>第三步</strong>，否则执行第四步</li>
<li>第三步：如果不为空：遍历subNodes中的id值，在<strong>staticNodes</strong>中找到其对应的节点并在nodes/edges中进行递归remove<strong>（收缩操作）</strong></li>
<li>第四步：如果为空：判断点击的节点是否存在<strong>下级节点列表subids</strong>，如果存在，执行第五步<strong>（展开操作）</strong></li>
<li>第五步：遍历<strong>subids下级id列表</strong>，在staticNodes中查找到对应的节点，添加到nodes和edges中，实现节点的展开操作</li>
</ul>
</li>
<li>收缩时，如果点击节点的下一级节点中包含下下一级节点，则进行递归查找并收缩，实现方法为<strong>removeNodes</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据id值查找其对应的下标</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findArrayIndexById</span>(<span class="params">arr, id</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res;</span><br><span class="line">    $.each(arr, <span class="function">(<span class="params">index,item</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(item[<span class="string">&#x27;id&#x27;</span>] == id)&#123;</span><br><span class="line">            res = index;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 节点收缩</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeNodes</span>(<span class="params">clickNodeId</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取到的是下级节点列表</span></span><br><span class="line">    <span class="keyword">var</span> subNodes = getSubNodes(clickNodeId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果获取的下级节点列表长度 不为 0，表示节点没有收缩，则点击后进行收缩</span></span><br><span class="line">    <span class="keyword">if</span>(subNodes.length != <span class="number">0</span>)&#123;</span><br><span class="line">        $.each(subNodes,<span class="function">(<span class="params">index,item</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">//消除的是注入到vis中的数据，而不是staticNodes/Edges</span></span><br><span class="line">            removeNodes(item);</span><br><span class="line">            nodes.remove(&#123;<span class="attr">id</span>:item&#125;);</span><br><span class="line">            edges.remove(&#123;<span class="attr">from</span>:clickNodeId,<span class="attr">to</span>:item&#125;);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//节点展开</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addNodes</span>(<span class="params">clickNodeId</span>)</span>&#123;</span><br><span class="line">    $.each(staticNodes[findArrayIndexById(staticNodes,clickNodeId)][<span class="string">&#x27;subids&#x27;</span>],<span class="function">(<span class="params">index,item</span>)=&gt;</span>&#123;</span><br><span class="line">        nodes.add(staticNodes[findArrayIndexById(staticNodes,item)]);</span><br><span class="line">        edges.add(&#123;<span class="attr">from</span>: clickNodeId,<span class="attr">to</span>: item&#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取点击节点的下级节点列表，不包含与其相连的父节点id</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSubNodes</span>(<span class="params">clickNodeId</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 获取与该节点所连接的所有节点的id（只要是相连的都会被算进来）</span></span><br><span class="line">    <span class="keyword">var</span> returnNodes = [];</span><br><span class="line">    <span class="keyword">var</span> connectedNodes = network.getConnectedNodes(clickNodeId);<span class="comment">//获取所有连接节点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 对节点id列表进行遍历，index表示列表下标，item表示对应的id值</span></span><br><span class="line">    $.each(connectedNodes, <span class="function">(<span class="params">index,item</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//这里的clickNodeId和staticNodes数组中的下标只是简单的-1操作</span></span><br><span class="line">        <span class="comment">//因为staticNodes中id都是顺序的，如果不是顺序的就需要遍历才能找到其下标值</span></span><br><span class="line">        <span class="comment">//clickNodeId是点击的那个节点的id，item是连接节点的id</span></span><br><span class="line">        <span class="comment">//如果这个连接的节点是点击的节点父节点，则不考虑进去！！！</span></span><br><span class="line">        <span class="keyword">if</span>(item != staticNodes[findArrayIndexById(staticNodes,clickNodeId)][<span class="string">&#x27;pid&#x27;</span>])&#123;</span><br><span class="line">            returnNodes.push(item);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> returnNodes;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="四、实现效果"><a href="#四、实现效果" class="headerlink" title="四、实现效果"></a>四、实现效果</h1><img src="/2022/03/12/%E5%89%8D%E7%AB%AF%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0-%E5%9F%BA%E4%BA%8Evis-js%E7%9A%84%E8%8A%82%E7%82%B9%E5%B1%95%E5%BC%80/node.gif" class="" title="image1">]]></content>
      <categories>
        <category>前端</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>vis.js</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记1-知识图谱发展综述</title>
    <url>/2022/03/17/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%8F%91%E5%B1%95%E7%BB%BC%E8%BF%B0/</url>
    <content><![CDATA[<h1 id="一、知识图谱简介"><a href="#一、知识图谱简介" class="headerlink" title="一、知识图谱简介"></a>一、知识图谱简介</h1><h1 id="二、知识表示"><a href="#二、知识表示" class="headerlink" title="二、知识表示"></a>二、知识表示</h1><h1 id="三、知识融合"><a href="#三、知识融合" class="headerlink" title="三、知识融合"></a>三、知识融合</h1><h1 id="四、知识抽取"><a href="#四、知识抽取" class="headerlink" title="四、知识抽取"></a>四、知识抽取</h1><h2 id="4-1-实体抽取"><a href="#4-1-实体抽取" class="headerlink" title="4.1 实体抽取"></a>4.1 实体抽取</h2><h2 id="4-2-关系抽取"><a href="#4-2-关系抽取" class="headerlink" title="4.2 关系抽取"></a>4.2 关系抽取</h2><h1 id="五、知识图谱应用"><a href="#五、知识图谱应用" class="headerlink" title="五、知识图谱应用"></a>五、知识图谱应用</h1><h2 id="5-1-推荐技术"><a href="#5-1-推荐技术" class="headerlink" title="5.1 推荐技术"></a>5.1 推荐技术</h2><h2 id="5-2-知识推理"><a href="#5-2-知识推理" class="headerlink" title="5.2 知识推理"></a>5.2 知识推理</h2><h2 id="5-3-自动问答"><a href="#5-3-自动问答" class="headerlink" title="5.3 自动问答"></a>5.3 自动问答</h2>]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>知识图谱</tag>
        <tag>知识图谱应用</tag>
        <tag>综述</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记2-知识图谱构建技术</title>
    <url>/2022/03/17/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA%E6%8A%80%E6%9C%AF/</url>
    <content><![CDATA[<h1 id="SPARQL语言"><a href="#SPARQL语言" class="headerlink" title="SPARQL语言"></a>SPARQL语言</h1><h1 id="一、OWL本体库语言"><a href="#一、OWL本体库语言" class="headerlink" title="一、OWL本体库语言"></a>一、OWL本体库语言</h1><h1 id="二、RDF"><a href="#二、RDF" class="headerlink" title="二、RDF"></a>二、RDF</h1><h2 id="2-1-RDF介绍"><a href="#2-1-RDF介绍" class="headerlink" title="2.1 RDF介绍"></a>2.1 RDF介绍</h2><ul>
<li>RDF全称为资源描述框架</li>
<li>该数据模型由三个部分组成事实，被称为三元组triples：(主，谓，宾)</li>
<li>如下表所示，下表为一条邮箱的事实</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>subject</th>
<th>predicate</th>
<th>object</th>
</tr>
</thead>
<tbody>
<tr>
<td>gy</td>
<td>email</td>
<td>7777777@qq.com</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-2-RDF资源"><a href="#2-2-RDF资源" class="headerlink" title="2.2 RDF资源"></a>2.2 RDF资源</h2><ul>
<li>RDF图中有三种节点：IRIs（国际资源标识符），literals（文字）和空节点<ul>
<li>IRIs是一个Unicode字符串</li>
</ul>
</li>
</ul>
<img src="/2022/03/17/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B02-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA%E6%8A%80%E6%9C%AF/rdfgraph.png" class="" title="rdfgraph">
<ul>
<li>谓语本身也是一个IRIs，表示一个属性，可以认为是二元关系的<strong>资源</strong></li>
</ul>
<h2 id="2-3-RDF图"><a href="#2-3-RDF图" class="headerlink" title="2.3 RDF图"></a>2.3 RDF图</h2><h3 id="2-3-1-三元组"><a href="#2-3-1-三元组" class="headerlink" title="2.3.1 三元组"></a>2.3.1 三元组</h3><ul>
<li>一个RDF三元组由三个部分组成<ul>
<li>主语：它是一个IRI或者一个空节点</li>
<li>谓语：它是一个IRI</li>
<li>宾语：它是一个IRI或者文字或者空节点</li>
</ul>
</li>
</ul>
<h2 id="2-3-2-URL，URI和IRI"><a href="#2-3-2-URL，URI和IRI" class="headerlink" title="2.3.2 URL，URI和IRI"></a>2.3.2 URL，URI和IRI</h2><ul>
<li>URL：统一资源定位符，表示互联网资源的位置访问地址</li>
<li>URI：统一资源标识符，在三元组中可以标识主语、谓语的<strong>命名空间</strong>，以免命名混淆</li>
<li>IRI：国际资源标识符</li>
</ul>
<h1 id="三、ttl数据格式"><a href="#三、ttl数据格式" class="headerlink" title="三、ttl数据格式"></a>三、ttl数据格式</h1><h2 id="3-1-简单的三元组"><a href="#3-1-简单的三元组" class="headerlink" title="3.1 简单的三元组"></a>3.1 简单的三元组</h2><ul>
<li>每个三元组满足&lt;主 谓 宾&gt;，且每个三元组以”.”结尾</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">&lt;http:<span class="regexp">//</span>example.org<span class="regexp">/#spiderman&gt; &lt;http:/</span><span class="regexp">/www.perceive.net/</span>schemas<span class="regexp">/relationship/</span>enemyOf&gt; &lt;http:<span class="regexp">//</span>example.org/<span class="comment">#green-goblin&gt; .</span></span><br></pre></td></tr></table></figure>
<h2 id="3-2-简单格式"><a href="#3-2-简单格式" class="headerlink" title="3.2 简单格式"></a>3.2 简单格式</h2><ul>
<li>RDF有许多文件格式，以下以Turtle RDF格式为例，文件名为data.ttl</li>
<li>对于以下文件格式，后面会做详细介绍</li>
</ul>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"># filename: ex002.ttl</span><br><span class="line"></span><br><span class="line"># 前缀行，<span class="keyword">ab</span>表示的是后面URI的别名，方便后面表示</span><br><span class="line">@prefix <span class="keyword">a</span><span class="variable">b:</span> &lt;http://learningsparql.<span class="keyword">com</span>/ns/addressbook#&gt; .</span><br><span class="line"></span><br><span class="line"># 以下每行都表示一个三元组，其中<span class="keyword">ab</span>为前缀</span><br><span class="line"><span class="keyword">a</span><span class="variable">b:richard</span> <span class="keyword">a</span><span class="variable">b:homeTel</span> <span class="string">&quot;(229) 276-5135&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:richard</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;richard49@hotmail.com&quot;</span> . </span><br><span class="line"></span><br><span class="line"><span class="keyword">a</span><span class="variable">b:cindy</span> <span class="keyword">a</span><span class="variable">b:homeTel</span> <span class="string">&quot;(245) 646-5488&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:cindy</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;cindym@gmail.com&quot;</span> . </span><br><span class="line"></span><br><span class="line"><span class="keyword">a</span><span class="variable">b:craig</span> <span class="keyword">a</span><span class="variable">b:homeTel</span> <span class="string">&quot;(194) 966-1505&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:craig</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;craigellis@yahoo.com&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:craig</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;c.ellis@usairwaysgroup.com&quot;</span> .</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-3-谓词表"><a href="#3-3-谓词表" class="headerlink" title="3.3 谓词表"></a>3.3 谓词表</h2><ul>
<li>以下数据标注了蜘蛛侠的敌人和名字</li>
<li><p>也就是说相同的主语有多个的谓词关系时需要用”;”分隔，形式如下：</p>
</li>
<li><p>主语 谓词1 宾语1;</p>
<ul>
<li>谓词2 宾语2.</li>
</ul>
</li>
<li>当然也可以分开写成两个三元组也是可以的</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">&lt;http:<span class="regexp">//</span>example.org<span class="regexp">/#spiderman&gt; &lt;http:/</span><span class="regexp">/www.perceive.net/</span>schemas<span class="regexp">/relationship/</span>enemyOf&gt; &lt;http:<span class="regexp">//</span>example.org/<span class="comment">#green-goblin&gt; ;</span></span><br><span class="line">				&lt;http:<span class="regexp">//</span>xmlns.com<span class="regexp">/foaf/</span><span class="number">0.1</span>/name&gt; <span class="string">&quot;Spiderman&quot;</span> .</span><br></pre></td></tr></table></figure>
<h2 id="3-4-宾语表"><a href="#3-4-宾语表" class="headerlink" title="3.4 宾语表"></a>3.4 宾语表</h2><ul>
<li>主语对于相同谓词拥有多个宾语的情况</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">&lt;http:<span class="regexp">//</span>example.org<span class="regexp">/#spiderman&gt; &lt;http:/</span><span class="regexp">/xmlns.com/</span>foaf<span class="regexp">/0.1/</span>name&gt; <span class="string">&quot;Spiderman&quot;</span>, <span class="string">&quot;Человек-паук&quot;</span>@ru .</span><br></pre></td></tr></table></figure>
<ul>
<li>当然也可以分开写成两个三元组也是可以的</li>
</ul>
<h2 id="3-5-RDF概念支持"><a href="#3-5-RDF概念支持" class="headerlink" title="3.5 RDF概念支持"></a>3.5 RDF概念支持</h2><h3 id="3-5-1-IRI"><a href="#3-5-1-IRI" class="headerlink" title="3.5.1 IRI"></a>3.5.1 IRI</h3><ul>
<li>使用@prefix/PREFIX或者@base/BASE来表示IRI，简化三元组的编写，可以理解为为IRI起别名</li>
<li>以下为@prefix使用例子</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 使用PREFIX也是同样效果</span></span><br><span class="line">@prefix somePrefix: &lt;http:<span class="regexp">//</span>www.perceive.net<span class="regexp">/schemas/</span>relationship/&gt; .</span><br><span class="line"></span><br><span class="line">&lt;http:<span class="regexp">//</span>example.org<span class="regexp">/#green-goblin&gt; somePrefix:enemyOf &lt;http:/</span><span class="regexp">/example.org/</span><span class="comment">#spiderman&gt; .</span></span><br></pre></td></tr></table></figure>
<ul>
<li>以下为@base使用例子</li>
<li>可以理解为相对地址的写法</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="comment"># A triple with all absolute IRIs</span></span><br><span class="line">&lt;http:<span class="regexp">//</span>one.example<span class="regexp">/subject1&gt; &lt;http:/</span><span class="regexp">/one.example/</span>predicate1&gt; &lt;http:<span class="regexp">//</span>one.example/object1&gt; .</span><br><span class="line"></span><br><span class="line">@base &lt;http:<span class="regexp">//</span>one.example/&gt; .	<span class="comment"># 标记主地址</span></span><br><span class="line">&lt;subject2&gt; &lt;predicate2&gt; &lt;object2&gt; .     <span class="comment"># 相对 IRIs, e.g. http://one.example/subject2</span></span><br></pre></td></tr></table></figure>
<ul>
<li>也可以使用空前缀</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@prefix :</span> &lt;<span class="attribute">http</span>:<span class="comment">//another.example/&gt; .    # empty prefix</span></span><br><span class="line">:<span class="attribute">subject5 </span>:<span class="attribute">predicate5 </span>:object5 .        # prefixed name, e.g. <span class="attribute">http</span>:<span class="comment">//another.example/subject5</span></span><br></pre></td></tr></table></figure>
<h1 id="四、SPARQL语言"><a href="#四、SPARQL语言" class="headerlink" title="四、SPARQL语言"></a>四、SPARQL语言</h1><h2 id="4-1-一个简单的查询语句"><a href="#4-1-一个简单的查询语句" class="headerlink" title="4.1 一个简单的查询语句"></a>4.1 一个简单的查询语句</h2><ul>
<li><p>SPARQL是专门针对RDF的的查询语句</p>
</li>
<li><p>SELECT后面的?xxx表示要查询的变量</p>
</li>
<li>WHERE后是对应的三元组{ ab:craig ab:email ?craig_email . }，它们满足主/谓/宾的关系</li>
<li>这条语言的作用就是查询craig的emal</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义好命名空间的别名</span></span><br><span class="line">PREFIX ab: &lt;http:<span class="regexp">//</span>learningsparql.com<span class="regexp">/ns/</span>addressbook<span class="comment">#&gt; </span></span><br><span class="line"></span><br><span class="line">SELECT ?craig_email</span><br><span class="line">WHERE</span><br><span class="line">&#123; ab:craig ab:email ?craig_email . &#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-2-多重匹配"><a href="#3-2-多重匹配" class="headerlink" title="3.2 多重匹配"></a>3.2 多重匹配</h2><ul>
<li>多重匹配返回的结果是多个属性的结果集</li>
<li>以下由三个对象的三元组，a和b都有姓名和邮箱，c只有一个邮箱</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@prefix</span> foaf： &lt;<span class="attribute">http</span>:<span class="comment">//xmlns.com/foaf/0.1/&gt; 。</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">_</span>:a <span class="attribute">foaf</span>:name <span class="string">&quot;Johnny Lee Outlaw&quot;</span> 。</span><br><span class="line"><span class="attribute">_</span>:a <span class="attribute">foaf</span>:mbox &lt;<span class="attribute">mailto</span>:jlow<span class="variable">@example</span>.com&gt; 。</span><br><span class="line"><span class="attribute">_</span>:b <span class="attribute">foaf</span>:name <span class="string">&quot;Peter Goodguy&quot;</span> 。</span><br><span class="line"><span class="attribute">_</span>:b <span class="attribute">foaf</span>:mbox &lt;<span class="attribute">mailto</span>:peter<span class="variable">@example</span>.org&gt; 。</span><br><span class="line"><span class="attribute">_</span>:c <span class="attribute">foaf</span>:mbox &lt;<span class="attribute">mailto</span>:carol<span class="variable">@example</span>.org&gt; 。</span><br></pre></td></tr></table></figure>
<ul>
<li>查询姓名和邮箱<ul>
<li>如果要查询相同主语所对应的宾语信息列表，可以使用以下方式</li>
</ul>
</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">PREFIX <span class="symbol">foaf:</span>   &lt;<span class="symbol">http:</span>/<span class="regexp">/xmlns.com/foaf</span><span class="regexp">/0.1/</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询语句要提取的是姓名和邮箱</span></span><br><span class="line"><span class="comment"># where匹配的意思是，相同的x对应的姓名和邮箱信息</span></span><br><span class="line"><span class="comment"># 这里就可以查到a/b所对应的姓名和邮箱信息</span></span><br><span class="line">SELECT <span class="string">?n</span>ame <span class="string">?m</span>box</span><br><span class="line">WHERE</span><br><span class="line">  &#123; <span class="string">?x</span> <span class="symbol">foaf:</span>name <span class="string">?n</span>ame .</span><br><span class="line">    <span class="string">?x</span> <span class="symbol">foaf:</span>mbox <span class="string">?m</span>box &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>知识图谱构建</tag>
        <tag>数据建模</tag>
      </tags>
  </entry>
  <entry>
    <title>诗词韵律解析</title>
    <url>/2022/03/02/%E8%AF%97%E8%AF%8D%E9%9F%B5%E5%BE%8B%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<h1 id="一、诗体简介"><a href="#一、诗体简介" class="headerlink" title="一、诗体简介"></a>一、诗体简介</h1><h2 id="1-1-近体诗格律"><a href="#1-1-近体诗格律" class="headerlink" title="1.1 近体诗格律"></a>1.1 近体诗格律</h2><ol>
<li>诗句数固定</li>
<li>字数为五言或七言</li>
<li>一般押平声韵，不允许换韵，韵脚位置固定</li>
<li>平仄有规定</li>
<li>五七言律诗中间两联原则上必须对仗</li>
</ol>
<h2 id="1-2-绝句和律诗"><a href="#1-2-绝句和律诗" class="headerlink" title="1.2 绝句和律诗"></a>1.2 绝句和律诗</h2><h1 id="二、声律"><a href="#二、声律" class="headerlink" title="二、声律"></a>二、声律</h1><h2 id="2-1-声调"><a href="#2-1-声调" class="headerlink" title="2.1 声调"></a>2.1 声调</h2><ul>
<li>古汉语四声调：平、上、去、入</li>
<li>相间律：平仄交替使用</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>古声调</th>
<th>普通话声调</th>
</tr>
</thead>
<tbody>
<tr>
<td>平</td>
<td>阴平、阳平</td>
</tr>
<tr>
<td>上</td>
<td>去（第三声）</td>
</tr>
<tr>
<td>去</td>
<td>去（第四声）</td>
</tr>
<tr>
<td>入</td>
<td>融合到了平/上/去</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-2-五言律诗的平仄"><a href="#2-2-五言律诗的平仄" class="headerlink" title="2.2 五言律诗的平仄"></a>2.2 五言律诗的平仄</h2><h3 id="2-2-1-起声-收声"><a href="#2-2-1-起声-收声" class="headerlink" title="2.2.1 起声/收声"></a>2.2.1 起声/收声</h3><ul>
<li>仄起：第一句的第二个字为仄声</li>
<li>平起：第一句的第二个字为平声</li>
<li>仄收：第一句的第五字为仄声</li>
<li>平收：第一句的第五字为平声</li>
</ul>
<h3 id="2-2-2-平仄格式"><a href="#2-2-2-平仄格式" class="headerlink" title="2.2.2 平仄格式"></a>2.2.2 平仄格式</h3><h4 id="（1）仄起仄收"><a href="#（1）仄起仄收" class="headerlink" title="（1）仄起仄收"></a>（1）仄起仄收</h4><blockquote>
<p>加下划线表示可平可仄</p>
</blockquote>
<p>$\underline{仄}仄平平仄，平平仄仄平$</p>
<p>$\underline{平}平仄仄平，\underline{仄}仄仄平平$</p>
<p>$\underline{仄}仄平平仄，平平仄仄平$</p>
<p>$\underline{平}平仄仄平，\underline{仄}仄仄平平$</p>
<h4 id="（2）仄起平收"><a href="#（2）仄起平收" class="headerlink" title="（2）仄起平收"></a>（2）仄起平收</h4><p>$\underline{仄}仄仄平平，平平仄仄平$</p>
<p>$\underline{平}平平仄仄，\underline{仄}仄仄平平$</p>
<p>$\underline{仄}仄平平仄，平平仄仄平$</p>
<p>$\underline{平}平平仄仄，\underline{仄}仄仄平平$</p>
<h4 id="（3）平起仄收"><a href="#（3）平起仄收" class="headerlink" title="（3）平起仄收"></a>（3）平起仄收</h4><p>$\underline{平}平平仄仄，仄仄仄平平$</p>
<p>$\underline{仄}仄平平仄，\underline{平}平仄仄平$</p>
<p>$\underline{平}平平仄仄，\underline{仄}仄仄平平$</p>
<p>$\underline{仄}仄平平仄，\underline{平}平仄仄平$</p>
<h4 id="（4）平起平收"><a href="#（4）平起平收" class="headerlink" title="（4）平起平收"></a>（4）平起平收</h4><p>$\underline{平}平仄仄平，仄仄仄平平$</p>
<p>$\underline{仄}仄平平仄，\underline{平}平仄仄平$</p>
<p>$\underline{平}平平仄仄，\underline{仄}仄仄平平$</p>
<p>$\underline{仄}仄平平仄，\underline{平}平仄仄平$</p>
<h2 id="2-3-相对律、相粘律"><a href="#2-3-相对律、相粘律" class="headerlink" title="2.3 相对律、相粘律"></a>2.3 相对律、相粘律</h2><h3 id="2-3-1-相对律"><a href="#2-3-1-相对律" class="headerlink" title="2.3.1 相对律"></a>2.3.1 相对律</h3><ul>
<li>一联中，出句和对句的平仄是相对的</li>
</ul>
<h3 id="2-3-2-相粘律"><a href="#2-3-2-相粘律" class="headerlink" title="2.3.2 相粘律"></a>2.3.2 相粘律</h3><ul>
<li>后一联出句第二字的平仄要跟前一联对句第二字的平仄一致</li>
<li>即：第三句第二字的平仄与第二句第二字的平仄相同，第五局第二字的平仄和第四句第二字的平仄相同，第七句第二字的平仄与第六句第二字的平仄相同</li>
</ul>
]]></content>
      <categories>
        <category>文化艺术</category>
        <category>中国诗词</category>
      </categories>
      <tags>
        <tag>中国传统</tag>
        <tag>诗词</tag>
      </tags>
  </entry>
  <entry>
    <title>H5C3基础大全一</title>
    <url>/2022/03/01/H5C3%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、HTML基础"><a href="#一、HTML基础" class="headerlink" title="一、HTML基础"></a>一、HTML基础</h1><h2 id="1-1-基础网页结构"><a href="#1-1-基础网页结构" class="headerlink" title="1.1 基础网页结构"></a>1.1 基础网页结构</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>day01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-1-1-结构"><a href="#1-1-1-结构" class="headerlink" title="1.1.1 结构"></a>1.1.1 结构</h3><ul>
<li>头部：<code>&lt;header&gt;</code></li>
<li>主体：<code>&lt;main&gt;</code></li>
<li>底部：<code>&lt;footer&gt;</code></li>
</ul>
<h3 id="1-1-2-内容区"><a href="#1-1-2-内容区" class="headerlink" title="1.1.2 内容区"></a>1.1.2 内容区</h3><ul>
<li>导航：<code>&lt;nav&gt;</code></li>
<li>侧边栏：<code>&lt;aside&gt;</code></li>
<li>文章区：<code>&lt;artical&gt;</code></li>
<li>读取区块：<code>&lt;section&gt;</code></li>
</ul>
<h3 id="1-1-3-注意"><a href="#1-1-3-注意" class="headerlink" title="1.1.3 注意"></a>1.1.3 注意</h3><ul>
<li>1.1.1和1.1.2的标签是h5新增的标签，使用的不多，一般使用div和span</li>
<li>div没有语义，就用来表示一个区域，目前来讲div还是我们主要的布局元素</li>
<li>span是一个行内元素，没有任何的语义，一般用于在网页中选中文字</li>
</ul>
<h2 id="1-2-实体符号"><a href="#1-2-实体符号" class="headerlink" title="1.2 实体符号"></a>1.2 实体符号</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">实体符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\&amp;nbsp</td>
<td style="text-align:center">表示空格</td>
</tr>
<tr>
<td style="text-align:center">\&amp;gt</td>
<td style="text-align:center">大于号</td>
</tr>
<tr>
<td style="text-align:center">&amp;lt</td>
<td style="text-align:center">小于号</td>
</tr>
<tr>
<td style="text-align:center">&amp;copy</td>
<td style="text-align:center">版权符号</td>
</tr>
</tbody>
</table>
</div>
<h2 id="1-3-块元素与行内元素"><a href="#1-3-块元素与行内元素" class="headerlink" title="1.3 块元素与行内元素"></a>1.3 块元素与行内元素</h2><h3 id="1-3-1-块元素（block-element）"><a href="#1-3-1-块元素（block-element）" class="headerlink" title="1.3.1 块元素（block element）"></a>1.3.1 块元素（block element）</h3><ul>
<li>在页面中独占一行的元素</li>
<li>块元素基本上什么都能放</li>
</ul>
<h3 id="1-3-2-行内元素（inline-element）"><a href="#1-3-2-行内元素（inline-element）" class="headerlink" title="1.3.2 行内元素（inline element）"></a>1.3.2 行内元素（inline element）</h3><ul>
<li>在页面中不会独占一行的元素，且该元素的宽高由其内容撑开</li>
<li>行内元素主要用来包裹文字</li>
<li>一般情况下会在块元素中放行内元素，而不会在行内元素中放块元素</li>
<li>浏览器对网页进行解析时，会自动对网页中不符合规范的内容进行修正</li>
</ul>
<h1 id="二、CSS"><a href="#二、CSS" class="headerlink" title="二、CSS"></a>二、CSS</h1><h2 id="2-1-网页组成部分"><a href="#2-1-网页组成部分" class="headerlink" title="2.1 网页组成部分"></a>2.1 网页组成部分</h2><ul>
<li>结构（HTML）</li>
<li>表现（CSS）</li>
<li>行为（JS）</li>
</ul>
<h2 id="2-2-CSS介绍"><a href="#2-2-CSS介绍" class="headerlink" title="2.2 CSS介绍"></a>2.2 CSS介绍</h2><ul>
<li>网页实际上是一个多层的结构，通过CSS可以分别为网页的每一层来设置样式</li>
<li>而最终我们能看到的知识网页的最上边一层</li>
<li>总之一句话，CSS用来设置网页中元素的样式</li>
</ul>
<h2 id="2-3-使用方式"><a href="#2-3-使用方式" class="headerlink" title="2.3 使用方式"></a>2.3 使用方式</h2><h3 id="2-3-1-第一种：内联样式，行内样式"><a href="#2-3-1-第一种：内联样式，行内样式" class="headerlink" title="2.3.1 第一种：内联样式，行内样式"></a>2.3.1 第一种：内联样式，行内样式</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--在标签内部通过style属性来设置元素的样式</span></span><br><span class="line"><span class="comment">问题：</span></span><br><span class="line"><span class="comment">    1. 使用内联样式，样式只能对一个标签生效</span></span><br><span class="line"><span class="comment">    2. 如果希望影响到多个元素必须在每个元素中都复制一遍</span></span><br><span class="line"><span class="comment">    3. 并且当样式发生变化时，我们必须要一个一个的修改，非常的不方便</span></span><br><span class="line"><span class="comment">注意：开发时绝对不要使用内联样式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: red;font-size: 20px;&quot;</span>&gt;</span>少小离家老大回，乡音无改鬓毛衰<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-2-第二种：内部样式表"><a href="#2-3-2-第二种：内部样式表" class="headerlink" title="2.3.2 第二种：内部样式表"></a>2.3.2 第二种：内部样式表</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    第二种方式（内部样式表）</span></span><br><span class="line"><span class="comment">        将样式编写到head钟的style标签里</span></span><br><span class="line"><span class="comment">            然后通过CSS的选择器来选中元素并为其设置各种样式</span></span><br><span class="line"><span class="comment">            可以同时为多个标签设置样式，并且修改时只需要修改一处即可全部应用</span></span><br><span class="line"><span class="comment">        内部样式表更加方便对样式进行复用</span></span><br><span class="line"><span class="comment">        问题：</span></span><br><span class="line"><span class="comment">            我们的内部样式表只能对一个网页起作用</span></span><br><span class="line"><span class="comment">                它里面的样式不能跨页面进行复用</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">     <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="css">         <span class="attribute">color</span>: aqua;</span></span><br><span class="line"><span class="css">         <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">     &#125;</span></span><br><span class="line"><span class="css"> </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span> </span><br></pre></td></tr></table></figure>
<h3 id="2-3-3-第三种：外部样式表（推荐）"><a href="#2-3-3-第三种：外部样式表（推荐）" class="headerlink" title="2.3.3 第三种：外部样式表（推荐）"></a>2.3.3 第三种：外部样式表（推荐）</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    第三种方式（外部样式表）推荐方式</span></span><br><span class="line"><span class="comment">        可以将CSS样式编写到一个外部的CSS文件中</span></span><br><span class="line"><span class="comment">            然后通过link标签来引入外部的CSS文件</span></span><br><span class="line"><span class="comment">        外部样式表需要通过link标签进行引入</span></span><br><span class="line"><span class="comment">            意味着只要想使用这些样式的网页都可以对其进行引用</span></span><br><span class="line"><span class="comment">            使样式可以在不同页面之间进行复用</span></span><br><span class="line"><span class="comment">        将样式编写到外部的CSS文件中，可以最大限度的使用到浏览器的缓存机制</span></span><br><span class="line"><span class="comment">            从而加快网页的加载速度，提高用户的体验</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-4-基本语法"><a href="#2-4-基本语法" class="headerlink" title="2.4 基本语法"></a>2.4 基本语法</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">选择器&#123;</span><br><span class="line">    样式:样式值;</span><br><span class="line">    样式:样式值;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-5-样式的继承"><a href="#2-5-样式的继承" class="headerlink" title="2.5 样式的继承"></a>2.5 样式的继承</h2><h3 id="2-5-1-概念"><a href="#2-5-1-概念" class="headerlink" title="2.5.1 概念"></a>2.5.1 概念</h3><ul>
<li>样式的继承：我们为一个元素设置的样式同时也会应用到它的后代元素上</li>
<li>继承是发生在祖先和后代之间的</li>
</ul>
<h3 id="2-5-2-作用"><a href="#2-5-2-作用" class="headerlink" title="2.5.2 作用"></a>2.5.2 作用</h3><ul>
<li>继承的设计是为了方便我们的开发，</li>
<li>利用继承我们可以将一些通用的样式统一设置到共同的祖先元素上，</li>
<li>这样只需要设置一次即可让所有的元素都具有该样式</li>
</ul>
<h3 id="2-5-3-注意"><a href="#2-5-3-注意" class="headerlink" title="2.5.3 注意"></a>2.5.3 注意</h3><ul>
<li>注意：并不是所有的样式都会被继承</li>
<li>比如    背景相关的，布局相关等的这些样式都不会被继承</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*p元素设置的颜色也会作用到子元素span上*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    我是一个p元素</span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>我是p元素中的span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>我是p元素外的span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="三、CSS选择器"><a href="#三、CSS选择器" class="headerlink" title="三、CSS选择器"></a>三、CSS选择器</h1><h2 id="3-1-基本选择器"><a href="#3-1-基本选择器" class="headerlink" title="3.1 基本选择器"></a>3.1 基本选择器</h2><ul>
<li>元素选择器：标签名{}</li>
<li>id选择器：#id值{}</li>
<li>类选择器：.类名{}</li>
<li>通配选择器：*{}</li>
</ul>
<h2 id="3-2-复合选择器"><a href="#3-2-复合选择器" class="headerlink" title="3.2 复合选择器"></a>3.2 复合选择器</h2><h3 id="3-2-1-交集选择器"><a href="#3-2-1-交集选择器" class="headerlink" title="3.2.1 交集选择器"></a>3.2.1 交集选择器</h3><ul>
<li>作用：选中同时符合多个条件的元素</li>
<li>语法：选择器1 选择器2 … 选择器n{}</li>
<li>注意点：<ul>
<li>交集选择器中如果有元素选择器， 必须使用元素选择器开头</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* 要求带有class为red的div */</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span><span class="selector-class">.red</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* 要求同时具有a b c三个类 */</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.a</span><span class="selector-class">.b</span><span class="selector-class">.c</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: aqua;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-2-2-并集选择器"><a href="#3-2-2-并集选择器" class="headerlink" title="3.2.2 并集选择器"></a>3.2.2 并集选择器</h3><ul>
<li>作用：同时选择多个选择器对应的元素</li>
<li>语法：选择器1,选择器2,…,选择器n{}<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">h1</span>, <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: blueviolet;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-3-关系选择器"><a href="#3-3-关系选择器" class="headerlink" title="3.3 关系选择器"></a>3.3 关系选择器</h2><h3 id="3-3-1-元素关系"><a href="#3-3-1-元素关系" class="headerlink" title="3.3.1 元素关系"></a>3.3.1 元素关系</h3><ul>
<li>父元素：直接包含子元素的元素叫父元素</li>
<li>子元素：直接被父元素包含的元素是子元素</li>
<li>祖先元素：直接或简介包含后代元素的元素叫做祖先元素<ul>
<li>一个元素的父元素也是它的祖先元素</li>
</ul>
</li>
<li>后代元素：直接或间接被祖先元素包含的元素<ul>
<li>子元素也是后代元素</li>
</ul>
</li>
<li>兄弟元素：拥有相同父元素的元素是兄弟元素</li>
</ul>
<h3 id="3-3-2-子元素选择器"><a href="#3-3-2-子元素选择器" class="headerlink" title="3.3.2 子元素选择器"></a>3.3.2 子元素选择器</h3><ul>
<li>作用：选中指定父元素的指定子元素</li>
<li>语法：父元素&gt;子元素<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span> &gt; <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-3-3-后代选择器"><a href="#3-3-3-后代选择器" class="headerlink" title="3.3.3 后代选择器"></a>3.3.3 后代选择器</h3><ul>
<li>作用：选中指定元素内的指定后代元素</li>
<li>语法：祖先 后代<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span> <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="css">     <span class="attribute">color</span>: aqua;</span></span><br><span class="line"><span class="css"> &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-3-4-兄弟选择器：选择下一个兄弟"><a href="#3-3-4-兄弟选择器：选择下一个兄弟" class="headerlink" title="3.3.4 兄弟选择器：选择下一个兄弟"></a>3.3.4 兄弟选择器：选择下一个兄弟</h3><ul>
<li>语法：前一个 + 下一个</li>
<li>只对下一个兄弟起作用，其他兄弟不起作用<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span> + <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>:red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3-3-5-兄弟选择器：选择下面所有兄弟"><a href="#3-3-5-兄弟选择器：选择下面所有兄弟" class="headerlink" title="3.3.5 兄弟选择器：选择下面所有兄弟"></a>3.3.5 兄弟选择器：选择下面所有兄弟</h3><ul>
<li>语法：前一个 ~ 下一个</li>
<li>只对下面所有的兄弟起作用，前面的兄弟不起作用<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span> ~ <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>:red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-4-属性选择器"><a href="#3-4-属性选择器" class="headerlink" title="3.4 属性选择器"></a>3.4 属性选择器</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="xml"></span></span><br><span class="line"><span class="xml">/*[属性名]    选择含有指定属性的元素*/</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">/*[属性名=属性值] 选择含有指定属性和属性值的元素*/</span></span><br><span class="line"><span class="xml">p[title=abc]&#123;</span></span><br><span class="line"><span class="xml">    color: orange;</span></span><br><span class="line"><span class="xml">&#125; </span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">/*[属性名^=属性值]    选择属性值以指定值开头的元素*/</span></span><br><span class="line"><span class="xml">p[title^=abc]&#123;</span></span><br><span class="line"><span class="xml">    color: orange;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">/*[属性名$=属性值]    选择属性值以指定值结尾的元素*/</span></span><br><span class="line"><span class="xml">p[title$=abc]&#123;</span></span><br><span class="line"><span class="xml">    color: orange;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">/*[属性名*=属性值]    选择属性值中含有某值的元素*/</span></span><br><span class="line"><span class="xml">p[title*=e]&#123;</span></span><br><span class="line"><span class="xml">    color: orange;</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- title表示鼠标悬停时显示的文字 --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">&quot;abc&quot;</span>&gt;</span>少小离家老大回<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">&quot;abcdef&quot;</span>&gt;</span>乡音无改鬓毛衰<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">&quot;helloabc&quot;</span>&gt;</span>乡音无改鬓毛衰<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">&quot;hello&quot;</span>&gt;</span>儿童相见不相识<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>秋水共长天一色<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span> 落霞与孤鹜齐飞<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-5-伪类选择器"><a href="#3-5-伪类选择器" class="headerlink" title="3.5 伪类选择器"></a>3.5 伪类选择器</h2><h3 id="3-5-1-概念"><a href="#3-5-1-概念" class="headerlink" title="3.5.1 概念"></a>3.5.1 概念</h3><ul>
<li>伪类（不存在的类，特殊的类）</li>
<li>伪类用来描述一个元素的特殊状态</li>
<li>比如：第一个子元素，被点击的元素、鼠标移入的元素</li>
</ul>
<h3 id="3-5-2-常用的伪类选择器"><a href="#3-5-2-常用的伪类选择器" class="headerlink" title="3.5.2 常用的伪类选择器"></a>3.5.2 常用的伪类选择器</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:first</span>-child    第一个子元素</span><br><span class="line"><span class="selector-pseudo">:last-child</span>     最后一个子元素</span><br><span class="line"><span class="selector-pseudo">:nth-child</span>()    选中第n个子元素</span><br><span class="line">特殊值：</span><br><span class="line">        n   第n个 n的范围<span class="number">0</span>到正无穷</span><br><span class="line">        <span class="number">2</span>n 或 even  选中偶数位的元素</span><br><span class="line">        <span class="number">2</span>n+<span class="number">1</span> 或 odd     都表示奇数位元素</span><br><span class="line">以上这些伪类都是根据所有子元素进行排序</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:first</span>-of-type </span><br><span class="line"><span class="selector-pseudo">:last-of-type</span></span><br><span class="line"><span class="selector-pseudo">:nth-of-type</span>()</span><br><span class="line">这几个伪类的功能和上述的类似，不同点是他们是在同类型元素中进行排序</span><br><span class="line">                </span><br><span class="line"><span class="selector-pseudo">:not</span>()  否定伪类</span><br><span class="line">        将符合条件的元素从选择器中去除</span><br></pre></td></tr></table></figure>
<h3 id="3-5-3-使用"><a href="#3-5-3-使用" class="headerlink" title="3.5.3 使用"></a>3.5.3 使用</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* 选中所有元素*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(n)&#123;  </span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125; </span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* 选中偶数位元素元素*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>n)&#123;  </span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125; </span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* 如果要选择li中的第三个需要用:nth-of-type(3) */</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>))&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: orange;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        &lt;span&gt;我是span&lt;/span&gt;   </span></span><br><span class="line"><span class="comment">        加上这句话，first-child就不能选中第一个li，</span></span><br><span class="line"><span class="comment">        可以使用first-of-type</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第一个<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二个<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第三个<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第四个<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第五个<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-4-a元素的伪类"><a href="#3-5-4-a元素的伪类" class="headerlink" title="3.5.4 a元素的伪类"></a>3.5.4 a元素的伪类</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="css">    :link   用来表示没访问过的链接（正常的链接）</span></span></span><br><span class="line"><span class="comment"><span class="css"> */</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="css">    :visited    用来表示访问过的链接</span></span></span><br><span class="line"><span class="comment"><span class="css">    </span></span></span><br><span class="line"><span class="comment"><span class="css">    由于隐私的原因，所以visited这个伪类只能修改链接的颜色</span></span></span><br><span class="line"><span class="comment"><span class="css">*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: orange;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="css">    :hover  用来表示鼠标移入的状态</span></span></span><br><span class="line"><span class="comment"><span class="css">*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="css"> <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css"> <span class="attribute">color</span>: aqua;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="css">    :active 用来表示鼠标点击的状态</span></span></span><br><span class="line"><span class="comment"><span class="css">*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">color</span>: yellowgreen;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/* hover和active    别的标签也能使用 */</span></span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    1. 没有访问过的链接</span></span><br><span class="line"><span class="comment">    2. 访问过的链接</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span>Baidu<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-6-伪元素选择器"><a href="#3-6-伪元素选择器" class="headerlink" title="3.6 伪元素选择器"></a>3.6 伪元素选择器</h2><h3 id="3-6-1-概念"><a href="#3-6-1-概念" class="headerlink" title="3.6.1 概念"></a>3.6.1 概念</h3><ul>
<li>表示页面中一些并不真实的存在的元素（特殊的位置）</li>
<li>位元素使用  ::  开头</li>
<li>::first-letter  表示第一个字母</li>
<li>::first-line    表示第一行</li>
<li>::selection 表示鼠标拖动选中的内容</li>
<li>::before    表示元素的开始位置</li>
<li>::after     表示元素结尾的位置<ul>
<li>before和after必须结合content属性来使用</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-tag">p</span><span class="selector-pseudo">::selection</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: greenyellow;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-tag">div</span><span class="selector-pseudo">::before</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">content</span>: <span class="string">&#x27;abc&#x27;</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-tag">div</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">content</span>: <span class="string">&#x27;123&#x27;</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello How are you<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    Lorem ipsum dolor sit, amet consectetur adipisicing elit. Consequuntur necessitatibus eaque cupiditate! Eum fuga eos nam placeat magnam libero quia suscipit? Provident natus iste perspiciatis voluptas animi impedit sint? Eius.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-7-选择器的权重"><a href="#3-7-选择器的权重" class="headerlink" title="3.7 选择器的权重"></a>3.7 选择器的权重</h2><h3 id="3-7-1-样式的冲突"><a href="#3-7-1-样式的冲突" class="headerlink" title="3.7.1 样式的冲突"></a>3.7.1 样式的冲突</h3><ul>
<li>当我们通过不同的选择器，选中一个相同的元素，并且为相同的样式设置不同的值，此时就发生了样式的冲突</li>
<li>发生样式冲突时，应用哪个样式由选择器的优先级（权重）决定</li>
</ul>
<h3 id="3-7-2-权重"><a href="#3-7-2-权重" class="headerlink" title="3.7.2 权重"></a>3.7.2 权重</h3><div class="table-container">
<table>
<thead>
<tr>
<th>样式</th>
<th>权重</th>
</tr>
</thead>
<tbody>
<tr>
<td>内联样式</td>
<td>1,0,0,0</td>
</tr>
<tr>
<td>id选择器</td>
<td>0,1,0,0</td>
</tr>
<tr>
<td>类和伪类选择器</td>
<td>0,0,1,0</td>
</tr>
<tr>
<td>元素选择器</td>
<td>0,0,0,1</td>
</tr>
<tr>
<td>通配选择器</td>
<td>0,0,0,0</td>
</tr>
<tr>
<td>继承的样式</td>
<td>没有优先级</td>
</tr>
</tbody>
</table>
</div>
<h3 id="3-7-3-注意"><a href="#3-7-3-注意" class="headerlink" title="3.7.3 注意"></a>3.7.3 注意</h3><ul>
<li>比较优先级时，需要将所有的选择器的优先级进行相加计算，最后优先级越高，则越优先显示</li>
<li>分组选择器是单独计算<ul>
<li>选择器的累加不会超过其最大的数量级，类选择器再高也不会超过id选择器</li>
<li>如果优先级计算后相同，则优先使用靠下的样式</li>
</ul>
</li>
<li>可以再某一个样式的后边添加!important，则此时该样式获取到最高的优先级，甚至超过内联样式<ul>
<li>注意：在开发中一定要慎用</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">*&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 因为span是继承div的，没有优先级，所有span使用的是通配中的样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span> <span class="attr">class</span>=<span class="string">&quot;red&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: blue;&quot;</span>&gt;</span>我是一个div <span class="tag">&lt;<span class="name">span</span>&gt;</span>我是div中的span<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="四、CSS单位与颜色"><a href="#四、CSS单位与颜色" class="headerlink" title="四、CSS单位与颜色"></a>四、CSS单位与颜色</h1><h2 id="4-1-长度单位"><a href="#4-1-长度单位" class="headerlink" title="4.1 长度单位"></a>4.1 长度单位</h2><h3 id="4-1-1-像素与百分比"><a href="#4-1-1-像素与百分比" class="headerlink" title="4.1.1 像素与百分比"></a>4.1.1 像素与百分比</h3><ul>
<li>像素：同样的200px在不同的设备下显示效果不一样</li>
<li>百分比：也可以将属性值设置为相对于其父元素属性的百分比<br>；可以使子元素跟随父元素的改变而改变</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-1-2-em和rem"><a href="#4-1-2-em和rem" class="headerlink" title="4.1.2 em和rem"></a>4.1.2 em和rem</h3><ul>
<li>em：em是相对于元素的字体大小来计算的；<ul>
<li>1em=1font-size</li>
<li>em会根据字体大小的改变而改变</li>
</ul>
</li>
<li>rem：rem是相对于根元素的字体大小来计算</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">10em</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">10em</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">10rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">10rem</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="4-1-3-颜色单位"><a href="#4-1-3-颜色单位" class="headerlink" title="4.1.3 颜色单位"></a>4.1.3 颜色单位</h2><ul>
<li>RGB值：RGB通过三种颜色的不同浓度来调配出不同的颜色<ul>
<li>语法:rgb(红色,绿色,蓝色)</li>
</ul>
</li>
<li>RGBA：A表示透明度<ul>
<li>值为1表示不透明</li>
<li>值为0表示透明</li>
<li>值为.5表示半透明</li>
</ul>
</li>
<li>十六进制RGB值：<ul>
<li>语法：#红色绿色蓝色</li>
<li>如：#FFFFFF     表示白色</li>
</ul>
</li>
<li>HSL/HSLA值：<ul>
<li>H：色相 （0 - 360）</li>
<li>S：饱和度（0 - 100%）</li>
<li>L：亮度（0 - 100%）</li>
</ul>
</li>
</ul>
<h1 id="五、CSS盒子模型"><a href="#五、CSS盒子模型" class="headerlink" title="五、CSS盒子模型"></a>五、CSS盒子模型</h1><h2 id="5-1-文档流（normal-flow）"><a href="#5-1-文档流（normal-flow）" class="headerlink" title="5.1 文档流（normal flow）"></a>5.1 文档流（normal flow）</h2><p>网页是一个多层的结构<br>通过css可以分别为每一层来设置样式<br>作为用户只能看到最顶上一层<br>这些层中，最底下的一层称为文档流，文档流是网页的基础</p>
<h3 id="5-1-2-元素的状态"><a href="#5-1-2-元素的状态" class="headerlink" title="5.1.2 元素的状态"></a>5.1.2 元素的状态</h3><p>在文档流中<br>不在文档流中（脱离文档流）</p>
<h3 id="5-1-3-元素在文档流的特点"><a href="#5-1-3-元素在文档流的特点" class="headerlink" title="5.1.3 元素在文档流的特点"></a>5.1.3 元素在文档流的特点</h3><ul>
<li>块元素：<ul>
<li>块元素会在页面中独占一行（自上向下垂直排列）</li>
<li>默认宽度是父元素的全部（会把父元素撑满）</li>
<li>默认高度是被内容撑开（子元素）</li>
</ul>
</li>
<li>行内元素：<ul>
<li>行内元素不会独占页面的一行，只占自身的大小</li>
<li>行内元素在页面中自左向右水平排列，如果一行之中不能容纳下所有的行内元素，则元素会换到第二行继续自左向右排列（书写习惯一致）</li>
<li>行内元素的默认宽度和高度都是被内容撑开</li>
</ul>
</li>
</ul>
<h2 id="5-2-盒模型"><a href="#5-2-盒模型" class="headerlink" title="5.2 盒模型"></a>5.2 盒模型</h2><h3 id="5-2-1-概念"><a href="#5-2-1-概念" class="headerlink" title="5.2.1 概念"></a>5.2.1 概念</h3><ul>
<li>CSS将页面中的所有元素都设置为了一个矩形的盒子</li>
<li>将元素设置为矩形的盒子后，对页面的布局就变成将不同的盒子摆放到不同的位置</li>
<li>每一个盒子都由以下几个部分组成：<ul>
<li>内容区（content）</li>
<li>内边距（padding）</li>
<li>边框（border）</li>
<li>外边距（margin）</li>
</ul>
</li>
</ul>
<img src="/2022/03/01/H5C3%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B.png" class="" title="image">
<h3 id="5-2-2-内容区"><a href="#5-2-2-内容区" class="headerlink" title="5.2.2 内容区"></a>5.2.2 内容区</h3><ul>
<li>内容区（content），元素中的所有的子元素和文本内容都在内容区中排列</li>
<li>内容区的大小由width和height两个属性来设置<ul>
<li>width   设置内容去的宽度</li>
<li>height  设置内容区的高度</li>
</ul>
</li>
</ul>
<h3 id="5-2-3-边框border"><a href="#5-2-3-边框border" class="headerlink" title="5.2.3 边框border"></a>5.2.3 边框border</h3><ul>
<li>边框（border），边框属于盒子边缘，边框里面属于盒子内部，出了边框都是盒子的外部</li>
<li>边框的大小会影响到整个盒子的大小</li>
<li>要设置边框，需要至少设置三个样式：<ul>
<li>边框的宽度：border-widht</li>
<li>边框的颜色：border-color</li>
<li>边框的风格：border-style</li>
</ul>
</li>
<li>属性值设置：见附录</li>
</ul>
<h3 id="5-2-4-内边距padding"><a href="#5-2-4-内边距padding" class="headerlink" title="5.2.4 内边距padding"></a>5.2.4 内边距padding</h3><ul>
<li>内边距：内容区和边框之间的距离是内边距</li>
<li>一共有四个方向的内边距：<ul>
<li>padding-top</li>
<li>padding-right</li>
<li>padding-bottom</li>
<li>padding-left</li>
</ul>
</li>
<li>内边距的设置会影响到盒子的大小</li>
<li>背景颜色会延伸到内边距上</li>
<li>一共盒子的可见框的大小，由内容区、内边距 和 边框共同决定</li>
<li>padding 内边距的简写属性，可以同时指定四个方向的内边距，规则和border-width一样</li>
</ul>
<h3 id="5-2-5-外边距margin"><a href="#5-2-5-外边距margin" class="headerlink" title="5.2.5 外边距margin"></a>5.2.5 外边距margin</h3><ul>
<li>外边距不会影响盒子可见框的大小</li>
<li>但是外边距会影响盒子的位置</li>
<li>一共有四个方向的外边距：<ul>
<li>margin-top      上外边距，设置一个正值，元素会向下移动</li>
<li>margin-right    默认情况下设置margin-right不会产生任何效果</li>
<li>margin-bottom   下外边距，设置一个正值，下面的元素会向下移动</li>
<li>margin-left     上外边距，设置一个正值，元素会向右移动</li>
</ul>
</li>
<li>margin也可以设置负值，如果是负值则元素会向相反的方向移动</li>
<li>元素在页面中是按照自左向右顺序排列的</li>
<li>所有默认情况下如果我们设置的左和上外边距则会移动元素自身；而设置下和右外边距会移动其他元素</li>
<li>margin的简写属性：margin  可以同时设置四个方向的外边距，用法和padding一样</li>
<li>margin会影响到盒子实际占用空间</li>
</ul>
<h2 id="5-3-盒子的尺寸"><a href="#5-3-盒子的尺寸" class="headerlink" title="5.3 盒子的尺寸"></a>5.3 盒子的尺寸</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--box-sizing  用来设置盒子尺寸的计算方式（设置width和height的作用）</span></span><br><span class="line"><span class="comment">    可选值</span></span><br><span class="line"><span class="comment">        content-box 默认值，宽度和高度用来设置内容区的大小</span></span><br><span class="line"><span class="comment">        bordor-box  宽度和高度用来设置整个盒子可见框的大小</span></span><br><span class="line"><span class="comment">            width 和 height 指的是内容区 和 内边距 和边框的总大小--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">10px</span> red solid;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/* </span></span></span><br><span class="line"><span class="comment"><span class="css">                默认情况下，盒子可见框的大小由内容区、内边距和边框共同决定</span></span></span><br><span class="line"><span class="comment"><span class="css"></span></span></span><br><span class="line"><span class="comment"><span class="css">                box-sizing  用来设置盒子尺寸的计算方式（设置width和height的作用）</span></span></span><br><span class="line"><span class="comment"><span class="css">                    可选值</span></span></span><br><span class="line"><span class="comment"><span class="css">                        content-box 默认值，宽度和高度用来设置内容区的大小</span></span></span><br><span class="line"><span class="comment"><span class="css">                        bordor-box  宽度和高度用来设置整个盒子可见框的大小</span></span></span><br><span class="line"><span class="comment"><span class="css">                            width 和 height 指的是内容区 和 内边距 和边框的总大小</span></span></span><br><span class="line"><span class="comment"><span class="css">             */</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">             <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="六、布局"><a href="#六、布局" class="headerlink" title="六、布局"></a>六、布局</h1><h2 id="6-1-水平布局"><a href="#6-1-水平布局" class="headerlink" title="6.1 水平布局"></a>6.1 水平布局</h2><ul>
<li>元素在其父元素中水平方向的位置由以下几个属性共同决定<ul>
<li>margin-left</li>
<li>border-left</li>
<li>padding-left</li>
<li>width</li>
<li>padding-right</li>
<li>border-right</li>
<li>margin-right</li>
</ul>
</li>
<li>一个元素在其父元素中，水平布局必须满足以下的等式<ul>
<li>margin-left+border-left+padding-left+width+padding-right+border-right+margin-right等于其父元素内容区的宽度</li>
</ul>
</li>
</ul>
<h3 id="6-1-2-过度约束"><a href="#6-1-2-过度约束" class="headerlink" title="6.1.2 过度约束"></a>6.1.2 过度约束</h3><ul>
<li>0 + 0 + 0 + 200 + 0 + 0 + 0 = 800</li>
<li>0 + 0 + 0 + 200 + 0 + 0 + 600 = 800</li>
<li>以上等式必须满足，如果相加结果使等式不成立，则称为过度约束，则等式会自动调整</li>
<li>调整的情况：<ul>
<li>如果这七个值中没有为 auto 的情况，则浏览器会自动调整margin-right值，以使等式满足</li>
</ul>
</li>
</ul>
<h3 id="6-1-3-可以设置为auto的值"><a href="#6-1-3-可以设置为auto的值" class="headerlink" title="6.1.3 可以设置为auto的值"></a>6.1.3 可以设置为auto的值</h3><ul>
<li>width</li>
<li>margin-left</li>
<li>margin-right</li>
<li>如果某个值为auto，会自动调整为auto的那个值以使等式成立</li>
<li>比如：0 + 0 + 0 + auto + 0 + 0 + 0 = 800，会让auto为800</li>
<li>如果将一个宽度和一个外边距设置为auto，则宽度会调整到最大，设置为auto的外边距会自动为0</li>
<li>如果将三个值都设置为auto，则外边距都是0，宽度最大</li>
</ul>
<h3 id="6-1-4-元素居中效果"><a href="#6-1-4-元素居中效果" class="headerlink" title="6.1.4 元素居中效果"></a>6.1.4 元素居中效果</h3><ul>
<li>如果将两个外边距设置为auto，宽度值固定，则会将外边距设置为相同的值</li>
<li>元素居中效果：auto + 0 + 0 + 200 + 0 + 0 + auto = 800</li>
<li>所以我们经常利用这个特点来使一个元素在其父元素中水平居中</li>
<li>示例：<ul>
<li>width:xxx px;</li>
<li>margin:0 auto;</li>
</ul>
</li>
<li>如果width超过内容区，则会设置margin-right为负值，以使得等式成立<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.outer</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">10px</span> red solid;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.inner</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#dfa</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-left</span>: auto;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: auto;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-2-垂直布局"><a href="#6-2-垂直布局" class="headerlink" title="6.2 垂直布局"></a>6.2 垂直布局</h2><ul>
<li>默认情况下父元素的高度被内容撑开</li>
<li>子元素是在父元素的内容区中排列的</li>
<li>如果子元素的大小超过了父元素，则子元素会从父元素中溢出</li>
<li>使用 overflow 属性来设置父元素如何处理溢出的子元素</li>
<li>overflow属性可选值<ul>
<li>visible 默认值，子元素会从父元素中溢出，在父元素外部的位置显示</li>
<li>hidden  溢出的内容将会被裁剪不会显示</li>
<li>scroll  生成两个滚动条，通过滚动条来查看完整的内容</li>
<li>auto    根据需要生成滚动条</li>
</ul>
</li>
<li>overflow-x：      设置水平方向</li>
<li>overflow-y：      设置垂直方向</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.outer</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.inner</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="comment">/* height: 100px; */</span></span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">overflow</span>: scroll;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;outer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;inner&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="七、外边距的重叠"><a href="#七、外边距的重叠" class="headerlink" title="七、外边距的重叠"></a>七、外边距的重叠</h1><h2 id="7-1-概念"><a href="#7-1-概念" class="headerlink" title="7.1 概念"></a>7.1 概念</h2><ul>
<li>相邻的垂直方向外边距会发生重叠现象</li>
</ul>
<h2 id="7-2-兄弟元素"><a href="#7-2-兄弟元素" class="headerlink" title="7.2 兄弟元素"></a>7.2 兄弟元素</h2><ul>
<li>兄弟元素间的相邻垂直外边距会取两者之间的较大值（两者都是正值）</li>
<li>特殊情况：<ul>
<li>如果相邻的外边距一正一负，则取两者的和</li>
<li>如果相邻的外边距都是负值，则取两者中绝对值较大的</li>
</ul>
</li>
</ul>
<h2 id="7-3-父子元素"><a href="#7-3-父子元素" class="headerlink" title="7.3 父子元素"></a>7.3 父子元素</h2><ul>
<li>父子元素间相邻外边距，子元素的会传递给父元素（上外边距）</li>
<li>父子外边距的折叠会影响到页面的布局，必须要进行处理</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span>,<span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="comment">/* 设置一个下外边距 */</span></span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="comment">/* 设置一个上外边距 */</span></span></span><br><span class="line"><span class="css">    <span class="attribute">margin-top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box3</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">    <span class="comment">/* padding-top: 100px; */</span></span></span><br><span class="line"><span class="css">    <span class="attribute">border-top</span>: <span class="number">1px</span> <span class="number">#bfa</span> solid;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box4</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-top</span>: <span class="number">99px</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="八、行内元素的盒模型"><a href="#八、行内元素的盒模型" class="headerlink" title="八、行内元素的盒模型"></a>八、行内元素的盒模型</h1><h2 id="8-1-特点"><a href="#8-1-特点" class="headerlink" title="8.1 特点"></a>8.1 特点</h2><ul>
<li>行内元素不支持设置宽度和高度</li>
<li>行内元素可以设置padding，但是垂直方向的padding不会影响页面的布局</li>
<li>行内元素可以设置border，垂直方向的border不会影响页面的布局</li>
<li>行内元素可以设置margin，垂直方向的margin不会影响布局</li>
</ul>
<h2 id="8-2-display"><a href="#8-2-display" class="headerlink" title="8.2 display"></a>8.2 display</h2><ul>
<li>display：用来设置元素显示的类型</li>
<li>属性可选值：<ul>
<li>inline ： 将元素设置为行内元素</li>
<li>block ：  将元素设置为块元素</li>
<li>inline-block   ： 将元素设置为行内块元素；行内块，既可以设置宽度和高度又不会独占一行</li>
<li>table ：  将元素设置为表格</li>
<li>none  ：  元素不在页面中显示</li>
</ul>
</li>
</ul>
<h2 id="8-3-visibility"><a href="#8-3-visibility" class="headerlink" title="8.3 visibility"></a>8.3 visibility</h2><ul>
<li>visibility ： 用来设置元素的显示状态</li>
<li>属性可选值：<ul>
<li>visible ： 默认值，元素在页面中正常显示</li>
<li>hidden ： 元素在页面中隐藏    不显示，但是依然占据页面中的位置</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.s1</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="css">    <span class="comment">/* width: 100px;</span></span></span><br><span class="line"><span class="comment"><span class="css">     height: 100px; */</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">     <span class="comment">/* padding: 100px; */</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">     <span class="comment">/* border: 100px solid red; */</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">     <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#bfa</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="comment">/* display: inline; */</span></span></span><br><span class="line"><span class="css">    <span class="comment">/* display: block; */</span></span></span><br><span class="line"><span class="css">    <span class="comment">/* display: inline-block; */</span></span></span><br><span class="line"><span class="css">    <span class="comment">/* display: none; */</span></span></span><br><span class="line"><span class="css">    <span class="attribute">visibility</span>: hidden;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;s1&quot;</span>&gt;</span>我是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="九、默认样式"><a href="#九、默认样式" class="headerlink" title="九、默认样式"></a>九、默认样式</h1><h2 id="9-1-概念"><a href="#9-1-概念" class="headerlink" title="9.1 概念"></a>9.1 概念</h2><ul>
<li>通常情况下，浏览器都会为元素设置一些默认样式</li>
<li>默认样式的存在会影响到页面的布局，通常情况下编写网页时必须要去除掉浏览器的默认样式（pc端的页面）</li>
</ul>
<h2 id="9-2-重置样式表reset-css"><a href="#9-2-重置样式表reset-css" class="headerlink" title="9.2 重置样式表reset.css"></a>9.2 重置样式表reset.css</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* reset */</span></span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">div</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">dt</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">li</span>,<span class="selector-tag">p</span>,<span class="selector-tag">blockquote</span>,pre,hr,<span class="selector-tag">figure</span>,<span class="selector-tag">table</span>,<span class="selector-tag">caption</span>,<span class="selector-tag">th</span>,<span class="selector-tag">td</span>,<span class="selector-tag">form</span>,<span class="selector-tag">fieldset</span>,<span class="selector-tag">legend</span>,<span class="selector-tag">input</span>,<span class="selector-tag">button</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">menu</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">header</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">section</span>,<span class="selector-tag">article</span>,<span class="selector-tag">aside</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">hgroup</span>,<span class="selector-tag">address</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">figcaption</span>,<span class="selector-tag">menu</span>,<span class="selector-tag">details</span>&#123;<span class="attribute">display</span>:block;&#125;</span><br><span class="line"><span class="selector-tag">table</span>&#123;<span class="attribute">border-collapse</span>:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">caption</span>,<span class="selector-tag">th</span>&#123;<span class="attribute">text-align</span><span class="selector-pseudo">:left</span>;<span class="attribute">font-weight</span>:normal;&#125;</span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>,<span class="selector-tag">fieldset</span>,<span class="selector-tag">img</span>,<span class="selector-tag">iframe</span>,<span class="selector-tag">abbr</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">i</span>,<span class="selector-tag">cite</span>,<span class="selector-tag">em</span>,<span class="selector-tag">var</span>,<span class="selector-tag">address</span>,<span class="selector-tag">dfn</span>&#123;<span class="attribute">font-style</span>:normal;&#125;</span><br><span class="line"><span class="selector-attr">[hidefocus]</span>,<span class="selector-tag">summary</span>&#123;<span class="attribute">outline</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">li</span>&#123;<span class="attribute">list-style</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,small&#123;<span class="attribute">font-size</span>:<span class="number">100%</span>;&#125;</span><br><span class="line"><span class="selector-tag">sup</span>,sub&#123;<span class="attribute">font-size</span>:<span class="number">83%</span>;&#125;</span><br><span class="line">pre,<span class="selector-tag">code</span>,<span class="selector-tag">kbd</span>,<span class="selector-tag">samp</span>&#123;<span class="attribute">font-family</span>:inherit;&#125;</span><br><span class="line"><span class="selector-tag">q</span>:before,q:after&#123;content:none;&#125;</span><br><span class="line"><span class="selector-tag">textarea</span>&#123;<span class="attribute">overflow</span>:auto;<span class="attribute">resize</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">label</span>,<span class="selector-tag">summary</span>&#123;<span class="attribute">cursor</span><span class="selector-pseudo">:default</span>;&#125;</span><br><span class="line"><span class="selector-tag">a</span>,<span class="selector-tag">button</span>&#123;<span class="attribute">cursor</span>:pointer;&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">em</span>,<span class="selector-tag">strong</span>,<span class="selector-tag">b</span>&#123;<span class="attribute">font-weight</span>:bold;&#125;</span><br><span class="line"><span class="selector-tag">del</span>,<span class="selector-tag">ins</span>,u,s,<span class="selector-tag">a</span>,<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">text-decoration</span>:none;&#125;</span><br><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">input</span>,<span class="selector-tag">button</span>,select,keygen,<span class="selector-tag">legend</span>&#123;<span class="attribute">font</span>:<span class="number">12px</span>/<span class="number">1.14</span> arial,\<span class="number">5</span>b8b\<span class="number">4</span>f53;<span class="attribute">color</span>:<span class="number">#333</span>;<span class="attribute">outline</span>:<span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;<span class="attribute">background</span>:<span class="number">#fff</span>;&#125;</span><br><span class="line"><span class="selector-tag">a</span>,<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="attribute">color</span>:<span class="number">#333</span>;&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>前端</category>
        <category>H5C3</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>HTML5</tag>
        <tag>CSS3</tag>
      </tags>
  </entry>
  <entry>
    <title>Java基础大全</title>
    <url>/2022/02/26/Java%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、-Java变量"><a href="#一、-Java变量" class="headerlink" title="一、 Java变量"></a>一、 Java变量</h1><ul>
<li>局部变量：存储在方法的栈内存中<ul>
<li>形参</li>
<li>方法内的局部变量</li>
<li>代码块的局部变量</li>
<li>无法用static修饰</li>
</ul>
</li>
<li>类变量（静态变量）：用static修饰的变量，调用时使用类名.变量名（static可以修饰方法名）</li>
<li>成员变量（非静态变量）</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RightDef</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num1 = num2 + <span class="number">5</span>;  <span class="comment">// 静态变量无需考虑声明的位置</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> num2 = <span class="number">20</span>; <span class="comment">// 静态变量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="二、Java访问控制权限"><a href="#二、Java访问控制权限" class="headerlink" title="二、Java访问控制权限"></a>二、Java访问控制权限</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th>private</th>
<th>default</th>
<th>protected</th>
<th>public</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">同一类</td>
<td>y</td>
<td>y</td>
<td>y</td>
<td>y</td>
</tr>
<tr>
<td style="text-align:left">同一包内的类</td>
<td></td>
<td>y</td>
<td>y</td>
<td>y</td>
</tr>
<tr>
<td style="text-align:left">子类</td>
<td></td>
<td></td>
<td>y</td>
<td>y</td>
</tr>
<tr>
<td style="text-align:left">其他包内的类</td>
<td></td>
<td></td>
<td>需要继承</td>
<td>y</td>
</tr>
</tbody>
</table>
</div>
<h1 id="三、Java源程序与编译型运行区别"><a href="#三、Java源程序与编译型运行区别" class="headerlink" title="三、Java源程序与编译型运行区别"></a>三、Java源程序与编译型运行区别</h1><img src="/2022/02/26/Java%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/java%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B.png" class="" title="img">
<h1 id="四、程序控制"><a href="#四、程序控制" class="headerlink" title="四、程序控制"></a>四、程序控制</h1><h2 id="4-1-循环"><a href="#4-1-循环" class="headerlink" title="4.1 循环"></a>4.1 循环</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第一种</span></span><br><span class="line"><span class="keyword">while</span>()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二种</span></span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">while</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第三种</span></span><br><span class="line"><span class="keyword">for</span>(初始化;布尔表达式;更新)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Foreach语法，用于数组和容器</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">float</span> x : f)&#123;           <span class="comment">// f是数组或容器</span></span><br><span class="line">    System.out.println(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-条件"><a href="#4-2-条件" class="headerlink" title="4.2 条件"></a>4.2 条件</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>()&#123;</span><br><span class="line">    <span class="keyword">if</span>()&#123;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-3-选择"><a href="#4-3-选择" class="headerlink" title="4.3 选择"></a>4.3 选择</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(expression)&#123;</span><br><span class="line">    <span class="keyword">case</span> value1: <span class="comment">//语句</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> value2: <span class="comment">// 语句</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>: <span class="comment">// 语句</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="五、数组"><a href="#五、数组" class="headerlink" title="五、数组"></a>五、数组</h1><h2 id="5-1-概念"><a href="#5-1-概念" class="headerlink" title="5.1 概念"></a>5.1 概念</h2><ul>
<li>数组属于引用数据类型</li>
<li>包含：数组名、下标、元素</li>
</ul>
<h2 id="5-2-特点"><a href="#5-2-特点" class="headerlink" title="5.2 特点"></a>5.2 特点</h2><ol>
<li>数组是有序排列的</li>
<li>数组属于引用数据类型的变量。数组的元素，既可以是基本数据类型，也可以是引用数据类型</li>
<li>创建数组对象会在内存中开辟一整块连续的空间</li>
<li>数组的长度一旦确定，就不能修改</li>
</ol>
<h2 id="5-3-操作"><a href="#5-3-操作" class="headerlink" title="5.3 操作"></a>5.3 操作</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[] ids;  <span class="comment">//数组声明</span></span><br><span class="line">ids = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;; <span class="comment">//静态初始化，初始化同时进行赋值，new int[]不能省略</span></span><br><span class="line"><span class="keyword">int</span>[] ids = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//动态初始化，初始化与元素赋值分开</span></span><br><span class="line">String[] names = <span class="keyword">new</span> String[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数组长度</span></span><br><span class="line"><span class="keyword">int</span> len = ids.length;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组元素的调用</span></span><br><span class="line">names[<span class="number">0</span>] = <span class="string">&quot;zs&quot;</span>;</span><br><span class="line">names[<span class="number">1</span>] = <span class="string">&quot;ls&quot;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-数组元素的默认初始化值"><a href="#5-4-数组元素的默认初始化值" class="headerlink" title="5.4 数组元素的默认初始化值"></a>5.4 数组元素的默认初始化值</h2><ul>
<li>整型：0</li>
<li>浮点型：0</li>
<li>char：0或’\u0000’，而非’0’</li>
<li>boolean：false</li>
<li>数组元素是引用数据类型时：null</li>
</ul>
<h2 id="5-5-多维数组"><a href="#5-5-多维数组" class="headerlink" title="5.5 多维数组"></a>5.5 多维数组</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 二维数组静态初始化</span></span><br><span class="line"><span class="keyword">int</span>[][] arr1 = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr1[] = <span class="keyword">new</span> <span class="keyword">int</span>[][]&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">int</span>[] arr1[] = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125;,&#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态初始化1</span></span><br><span class="line">String[][] arr2 = <span class="keyword">new</span> String[<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 动态初始化2</span></span><br><span class="line">String[][] arr2 = <span class="keyword">new</span> String[<span class="number">3</span>][];</span><br><span class="line">System.out.println(arr2[<span class="number">1</span>][<span class="number">0</span>]); <span class="comment">//由于没有初始化，所以会报空指针异常</span></span><br><span class="line"></span><br><span class="line">arr2[<span class="number">1</span>] = <span class="keyword">new</span> String[<span class="number">4</span>];    <span class="comment">// 给arr[1]初始化后，再来输出就不会报错</span></span><br><span class="line">System.out.println(arr2[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误形式</span></span><br><span class="line"><span class="comment">// int[][] arr3 = new int[4][3]&#123;&#123;1,2,3&#125;,&#123;4,5&#125;,&#123;6,7,8&#125;&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="5-5-1-多维数组的默认初始值"><a href="#5-5-1-多维数组的默认初始值" class="headerlink" title="5.5.1 多维数组的默认初始值"></a>5.5.1 多维数组的默认初始值</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>][<span class="number">3</span>];</span><br><span class="line">System.out.println(arr[<span class="number">0</span>]);     <span class="comment">// 地址值</span></span><br><span class="line">System.out.println(arr[<span class="number">0</span>][<span class="number">0</span>]);      <span class="comment">// null</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-6-数组的遍历"><a href="#5-6-数组的遍历" class="headerlink" title="5.6 数组的遍历"></a>5.6 数组的遍历</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// foreach方式</span></span><br><span class="line"><span class="keyword">int</span>[] a = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> element:a)</span><br><span class="line">    System.out.println(element);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5-7-Array类"><a href="#5-7-Array类" class="headerlink" title="5.7 Array类"></a>5.7 Array类</h2><h3 id="5-7-1-常用方法"><a href="#5-7-1-常用方法" class="headerlink" title="5.7.1 常用方法"></a>5.7.1 常用方法</h3><ul>
<li>java.util.Array类的所有方法均为静态方法</li>
<li>boolean equals(int[] a,int[] b)：判断两个数组是否相等</li>
<li>String toString(int[] a)：输出数组信息</li>
<li>void fill(int[] a,int val)：将指定值填充到数组中</li>
<li>void sort(int[] a)：对数组进行排序（快速排序）</li>
<li>int binarySearch(int[] a,int key)：对排序后的数进行二分法检索指定的值</li>
</ul>
<h2 id="5-8-数组常见异常"><a href="#5-8-数组常见异常" class="headerlink" title="5.8 数组常见异常"></a>5.8 数组常见异常</h2><ul>
<li>空指针：NullPointerException</li>
<li>数组下标越界：ArrayIndexOutOfBoundsException</li>
</ul>
<h1 id="六、类和对象"><a href="#六、类和对象" class="headerlink" title="六、类和对象"></a>六、类和对象</h1><h2 id="6-1-类"><a href="#6-1-类" class="headerlink" title="6.1 类"></a>6.1 类</h2><h3 id="6-1-1-构造器"><a href="#6-1-1-构造器" class="headerlink" title="6.1.1 构造器"></a>6.1.1 构造器</h3><ul>
<li>一个在创建对象时被自动调用的特殊方法</li>
<li>名称必须要和类名相同</li>
<li>构造器调用顺序是客-&gt;主</li>
<li>每个类都有构造方法，没有显示的为类定义构造方法，Java编译器会提供一个默认的构造方法<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rock2</span></span>&#123;</span><br><span class="line">    Rock(<span class="keyword">int</span> i)&#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;Rock&quot;</span>+i+<span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> class <span class="title">SimpleConstructor2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">            <span class="keyword">new</span> Rock2(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  Rock 0 Rock 1 Rock 2 Rock 3 Rock 4 Rock 5 Rock 6 Rock 7</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="6-1-2-类的定义"><a href="#6-1-2-类的定义" class="headerlink" title="6.1.2 类的定义"></a>6.1.2 类的定义</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span></span>&#123;</span><br><span class="line">  String breed;</span><br><span class="line">  <span class="keyword">int</span> age;</span><br><span class="line">  String color;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">barking</span><span class="params">()</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">hungry</span><span class="params">()</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">sleeping</span><span class="params">()</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-1-3-类中的变量类型"><a href="#6-1-3-类中的变量类型" class="headerlink" title="6.1.3 类中的变量类型"></a>6.1.3 类中的变量类型</h3><ul>
<li>局部变量</li>
<li>成员变量</li>
<li>类变量</li>
</ul>
<h2 id="6-2-对象"><a href="#6-2-对象" class="headerlink" title="6.2 对象"></a>6.2 对象</h2><ul>
<li>声明：声明一个对象，包括对象名和对象类型</li>
<li>实例化：使用new来创建一个对象</li>
<li>初始化：new创建对象时，会调用构造函数</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Puppy</span></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Puppy</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">      <span class="comment">//这个构造器仅有一个参数：name</span></span><br><span class="line">      System.out.println(<span class="string">&quot;小狗的名字是 : &quot;</span> + name ); </span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">      <span class="comment">// 下面的语句将创建一个Puppy对象</span></span><br><span class="line">      Puppy myPuppy = <span class="keyword">new</span> Puppy( <span class="string">&quot;tommy&quot;</span> );</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="七、面向对象特性"><a href="#七、面向对象特性" class="headerlink" title="七、面向对象特性"></a>七、面向对象特性</h2><h2 id="7-1-封装"><a href="#7-1-封装" class="headerlink" title="7.1 封装"></a>7.1 封装</h2><ul>
<li>创建类以实现现实中抽象事物属性以及方法的封装</li>
</ul>
<h2 id="7-2-继承"><a href="#7-2-继承" class="headerlink" title="7.2 继承"></a>7.2 继承</h2><h3 id="7-2-1-继承的实现"><a href="#7-2-1-继承的实现" class="headerlink" title="7.2.1 继承的实现"></a>7.2.1 继承的实现</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">father</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">son</span> <span class="keyword">extends</span> <span class="title">father</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-2-2-继承的特性"><a href="#7-2-2-继承的特性" class="headerlink" title="7.2.2 继承的特性"></a>7.2.2 继承的特性</h3><ul>
<li>子类拥有父类非private的属性、方法</li>
<li>所有的类都继承于java.lang.Object</li>
</ul>
<h3 id="7-2-3-Super关键字"><a href="#7-2-3-Super关键字" class="headerlink" title="7.2.3 Super关键字"></a>7.2.3 Super关键字</h3><ol>
<li>在子类的成员方法中，访问父类的成员变量。</li>
<li>在子类的成员方法中，访问父类的成员方法。</li>
<li>在子类的构造方法中，访问父类的构造方法。</li>
</ol>
<h2 id="7-3-多态"><a href="#7-3-多态" class="headerlink" title="7.3 多态"></a>7.3 多态</h2><h3 id="7-3-1-多态实现的必要条件"><a href="#7-3-1-多态实现的必要条件" class="headerlink" title="7.3.1 多态实现的必要条件"></a>7.3.1 多态实现的必要条件</h3><ul>
<li>继承</li>
<li>重写</li>
<li>父类引用指向子类对象</li>
</ul>
<h3 id="7-3-2-多态的实现方式"><a href="#7-3-2-多态的实现方式" class="headerlink" title="7.3.2 多态的实现方式"></a>7.3.2 多态的实现方式</h3><ul>
<li>重写</li>
<li>接口</li>
<li>抽象类和抽象方法</li>
</ul>
<h1 id="八、抽象类和抽象方法"><a href="#八、抽象类和抽象方法" class="headerlink" title="八、抽象类和抽象方法"></a>八、抽象类和抽象方法</h1><h2 id="8-1-抽象类"><a href="#8-1-抽象类" class="headerlink" title="8.1 抽象类"></a>8.1 抽象类</h2><ul>
<li>抽象类用来描述一种类型应该具备的基本特征与功能，具体如何去完成这些行为由子类通过方法重写来完成</li>
<li>抽象方法指只有功能声明，没有功能主体实现的方法</li>
<li>有抽象方法的类一定是抽象类</li>
<li>抽象类无法直接创建对象，只能被子类继承后，创建子类对象</li>
<li>抽象方法必须被子类重写</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> String address;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, String address, <span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Constructing an Employee&quot;</span>);</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.address = address;</span><br><span class="line">      <span class="keyword">this</span>.number = number;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">computePay</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     System.out.println(<span class="string">&quot;Inside Employee computePay&quot;</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mailCheck</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Mailing a check to &quot;</span> + <span class="keyword">this</span>.name</span><br><span class="line">       + <span class="string">&quot; &quot;</span> + <span class="keyword">this</span>.address);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name + <span class="string">&quot; &quot;</span> + address + <span class="string">&quot; &quot;</span> + number;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> address;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String newAddress)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      address = newAddress;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumber</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> number;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-3-抽象方法"><a href="#8-3-抽象方法" class="headerlink" title="8.3 抽象方法"></a>8.3 抽象方法</h2><ul>
<li>抽象方法没有方法体，子类继承后必须重写该方法<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> String address;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">computePay</span><span class="params">()</span></span>;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//其余代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="九、Java接口"><a href="#九、Java接口" class="headerlink" title="九、Java接口"></a>九、Java接口</h1><h2 id="9-1-接口与类的区别"><a href="#9-1-接口与类的区别" class="headerlink" title="9.1 接口与类的区别"></a>9.1 接口与类的区别</h2><ul>
<li>接口不能用于实例化对象。</li>
<li>接口没有构造方法。</li>
<li>接口中所有的方法必须是抽象方法。</li>
<li>接口中的成员变量只能是 public static final 类型。</li>
<li>接口不是被类继承了，而是要被类实现。</li>
<li>接口支持多继承</li>
</ul>
<h2 id="9-2-接口的实现"><a href="#9-2-接口的实现" class="headerlink" title="9.2 接口的实现"></a>9.2 接口的实现</h2><ul>
<li><p>当类实现接口的时候，类要实现接口中所有的方法。否则，类必须声明为抽象的类。</p>
</li>
<li><p>类使用implements关键字实现接口。在类声明中，Implements关键字放在class声明后面。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">travel</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MammalInt</span> <span class="keyword">implements</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Mammal eats&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">travel</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Mammal travels&quot;</span>);</span><br><span class="line">   &#125; </span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">noOfLegs</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      MammalInt m = <span class="keyword">new</span> MammalInt();</span><br><span class="line">      m.eat();</span><br><span class="line">      m.travel();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-4-接口的特性"><a href="#9-4-接口的特性" class="headerlink" title="9.4 接口的特性"></a>9.4 接口的特性</h2><ul>
<li>接口是隐式抽象的，当声明一个接口的时候，不必使用abstract关键字。</li>
<li>接口中每一个方法也是隐式抽象的，声明时同样不需要abstract关键字。</li>
<li>接口中的方法都是公有的。</li>
</ul>
<h2 id="9-5-接口的继承"><a href="#9-5-接口的继承" class="headerlink" title="9.5 接口的继承"></a>9.5 接口的继承</h2><ul>
<li>一个接口能继承另一个接口，和类之间的继承方式比较相似。接口的继承使用extends关键字，子接口继承父接口的方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Sports</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHomeTeam</span><span class="params">(String name)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVisitingTeam</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 文件名: Football.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Football</span> <span class="keyword">extends</span> <span class="title">Sports</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">homeTeamScored</span><span class="params">(<span class="keyword">int</span> points)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visitingTeamScored</span><span class="params">(<span class="keyword">int</span> points)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">endOfQuarter</span><span class="params">(<span class="keyword">int</span> quarter)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 文件名: Hockey.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Hockey</span> <span class="keyword">extends</span> <span class="title">Sports</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">homeGoalScored</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visitingGoalScored</span><span class="params">()</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">endOfPeriod</span><span class="params">(<span class="keyword">int</span> period)</span></span>;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">overtimePeriod</span><span class="params">(<span class="keyword">int</span> ot)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Hockey接口自己声明了四个方法，从Sports接口继承了两个方法，这样，实现Hockey接口的类需要实现六个方法。</li>
<li>相似的，实现Football接口的类需要实现五个方法，其中两个来自于Sports接口。</li>
</ul>
<h2 id="9-6-接口的多继承"><a href="#9-6-接口的多继承" class="headerlink" title="9.6 接口的多继承"></a>9.6 接口的多继承</h2><ul>
<li><p>在Java中，类的多继承是不合法，但接口允许多继承。</p>
</li>
<li><p>在接口的多继承中extends关键字只需要使用一次，在其后跟着继承接口。 如下所示：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Hockey</span> <span class="keyword">extends</span> <span class="title">Sports</span>, <span class="title">Event</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="十、Java枚举"><a href="#十、Java枚举" class="headerlink" title="十、Java枚举"></a>十、Java枚举</h1><h2 id="10-1-枚举的实现"><a href="#10-1-枚举的实现" class="headerlink" title="10.1 枚举的实现"></a>10.1 枚举的实现</h2><ul>
<li><p>Java 枚举是一个特殊的类，一般表示一组常量，比如一年的 4 个季节，一个年的 12 个月份，一个星期的 7 天，方向有东南西北等。</p>
</li>
<li><p>Java 枚举类使用 enum 关键字来定义，各个常量使用逗号 , 来分割。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Color</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    RED, GREEN, BLUE;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// 执行输出结果</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Color c1 = Color.RED;</span><br><span class="line">        System.out.println(c1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果为RED</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="10-2-迭代枚举元素"><a href="#10-2-迭代枚举元素" class="headerlink" title="10.2 迭代枚举元素"></a>10.2 迭代枚举元素</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Color</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    RED, GREEN, BLUE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Color myVar : Color.values()) &#123;</span><br><span class="line">      System.out.println(myVar);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-3-枚举中的方法"><a href="#10-3-枚举中的方法" class="headerlink" title="10.3 枚举中的方法"></a>10.3 枚举中的方法</h2><ul>
<li>values() 返回枚举类中所有的值。</li>
<li>ordinal()方法可以找到每个枚举常量的索引，就像数组索引一样。</li>
<li>valueOf()方法返回指定字符串值的枚举常量。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Color</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    RED, GREEN, BLUE;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 调用 values()</span></span><br><span class="line">        Color[] arr = Color.values();</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 迭代枚举</span></span><br><span class="line">        <span class="keyword">for</span> (Color col : arr)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 查看索引</span></span><br><span class="line">            System.out.println(col + <span class="string">&quot; at index &quot;</span> + col.ordinal());</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 使用 valueOf() 返回枚举常量，不存在的会报错 IllegalArgumentException</span></span><br><span class="line">        System.out.println(Color.valueOf(<span class="string">&quot;RED&quot;</span>));</span><br><span class="line">        <span class="comment">// System.out.println(Color.valueOf(&quot;WHITE&quot;));</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*结果</span></span><br><span class="line"><span class="comment">RED at index 0</span></span><br><span class="line"><span class="comment">GREEN at index 1</span></span><br><span class="line"><span class="comment">BLUE at index 2</span></span><br><span class="line"><span class="comment">RED</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="十一、Java异常"><a href="#十一、Java异常" class="headerlink" title="十一、Java异常"></a>十一、Java异常</h1><img src="/2022/02/26/Java%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/Java%E5%BC%82%E5%B8%B8.png" class="" title="image1">
<h2 id="11-1-异常分类"><a href="#11-1-异常分类" class="headerlink" title="11.1 异常分类"></a>11.1 异常分类</h2><ol>
<li>检查性异常: 不处理编译不能通过</li>
<li>非检查性异常:不处理编译可以通过，如果有抛出直接抛到控制台</li>
<li>运行时异常: 就是非检查性异常</li>
<li>非运行时异常: 就是检查性异常</li>
</ol>
<blockquote>
<p>所有的异常类是从 java.lang.Exception 类继承的子类</p>
</blockquote>
<img src="/2022/02/26/Java%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/Exception.png" class="" title="exc">
<h2 id="11-2-异常捕获"><a href="#11-2-异常捕获" class="headerlink" title="11.2 异常捕获"></a>11.2 异常捕获</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 单捕获</span></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// 程序代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(ExceptionName e1)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">//Catch 块</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多异常捕获</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">   <span class="comment">// 程序代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">1</span> 异常的变量名<span class="number">1</span>)&#123;</span><br><span class="line">  <span class="comment">// 程序代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">2</span> 异常的变量名<span class="number">2</span>)&#123;</span><br><span class="line">  <span class="comment">// 程序代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">3</span> 异常的变量名<span class="number">3</span>)&#123;</span><br><span class="line">  <span class="comment">// 程序代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-3-异常抛出"><a href="#11-3-异常抛出" class="headerlink" title="11.3 异常抛出"></a>11.3 异常抛出</h2><h3 id="11-3-1-throws关键字"><a href="#11-3-1-throws关键字" class="headerlink" title="11.3.1 throws关键字"></a>11.3.1 throws关键字</h3><ul>
<li>用来声明一个方法可能产生的所有异常，不做任何处理而是将异常往上传，需要由方法的调用者进行异常处理</li>
<li>用在方法声明后面，跟的是异常类名</li>
<li>可以跟多个异常类名，用逗号隔开</li>
<li>表示抛出异常，由该方法的调用者来处理</li>
<li>throws表示出现异常的一种可能性，并不一定会发生这些异常</li>
</ul>
<h3 id="11-3-2-throw关键字"><a href="#11-3-2-throw关键字" class="headerlink" title="11.3.2 throw关键字"></a>11.3.2 throw关键字</h3><ul>
<li><p>用来抛出一个具体的异常类型。</p>
</li>
<li><p>用在方法体内，跟的是异常对象名</p>
</li>
<li>只能抛出一个异常对象名</li>
<li>表示抛出异常，由方法体内的语句处理</li>
<li>throw则是抛出了异常，执行throw则一定抛出了某种异常  </li>
<li>如果异常对象是非 RuntimeException 则需要在方法申明时加上该异常的抛出 即需要加上 throws 语句 或者 在方法体内 try catch 处理该异常，否则编译报错</li>
<li>执行到 throw 语句则后面的语句块不再执行</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> constxiong.interview;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThrowsThrow</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		testThrows();</span><br><span class="line">		</span><br><span class="line">		Integer i = <span class="keyword">null</span>;</span><br><span class="line">		testThrow(i);</span><br><span class="line">		</span><br><span class="line">		String filePath = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			testThrow(filePath);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 测试 throws 关键字</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> NullPointerException</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testThrows</span><span class="params">()</span> <span class="keyword">throws</span> NullPointerException </span>&#123;</span><br><span class="line">		Integer i = <span class="keyword">null</span>;</span><br><span class="line">		System.out.println(i + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 测试 throw 关键字抛出 运行时异常</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> i</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testThrow</span><span class="params">(Integer i)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (i == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException();<span class="comment">//运行时异常不需要在方法上申明</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 测试 throw 关键字抛出 非运行时异常，需要方法体需要加 throws 异常抛出申明</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> i</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testThrow</span><span class="params">(String filePath)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (filePath == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> IOException();<span class="comment">//运行时异常不需要在方法上申明</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-4-自定义异常类"><a href="#11-4-自定义异常类" class="headerlink" title="11.4 自定义异常类"></a>11.4 自定义异常类</h2><ul>
<li>所有异常都必须是 Throwable 的子类。</li>
<li>如果希望写一个检查性异常类，则需要继承 Exception 类。</li>
<li>如果你想写一个运行时异常类，那么需要继承 RuntimeException 类。</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文件名InsufficientFundsException.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//自定义异常类，继承Exception类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InsufficientFundsException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="comment">//此处的amount用来储存当出现异常（取出钱多于余额时）所缺乏的钱</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span> amount;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">InsufficientFundsException</span><span class="params">(<span class="keyword">double</span> amount)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.amount = amount;</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getAmount</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> amount;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件名称 CheckingAccount.java</span></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//此类模拟银行账户</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckingAccount</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="comment">//balance为余额，number为卡号</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">double</span> balance;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">CheckingAccount</span><span class="params">(<span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.number = number;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">//方法：存钱</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      balance += amount;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">//方法：取钱</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> <span class="keyword">throws</span></span></span><br><span class="line"><span class="function">                              InsufficientFundsException</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(amount &lt;= balance)</span><br><span class="line">      &#123;</span><br><span class="line">         balance -= amount;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">         <span class="keyword">double</span> needs = amount - balance;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> InsufficientFundsException(needs);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">//方法：返回余额</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getBalance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> balance;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">//方法：返回卡号</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumber</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> number;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面的 BankDemo 程序示范了如何调用 CheckingAccount 类的 deposit() 和 withdraw() 方法</span></span><br><span class="line"><span class="comment">//文件名称 BankDemo.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BankDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      CheckingAccount c = <span class="keyword">new</span> CheckingAccount(<span class="number">101</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;Depositing $500...&quot;</span>);</span><br><span class="line">      c.deposit(<span class="number">500.00</span>);</span><br><span class="line">      <span class="keyword">try</span></span><br><span class="line">      &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;\nWithdrawing $100...&quot;</span>);</span><br><span class="line">         c.withdraw(<span class="number">100.00</span>);</span><br><span class="line">         System.out.println(<span class="string">&quot;\nWithdrawing $600...&quot;</span>);</span><br><span class="line">         c.withdraw(<span class="number">600.00</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(InsufficientFundsException e)</span><br><span class="line">      &#123;</span><br><span class="line">         System.out.println(<span class="string">&quot;Sorry, but you are short $&quot;</span></span><br><span class="line">                                  + e.getAmount());</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Output:</span></span><br><span class="line"><span class="comment">Depositing $500...</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Withdrawing $100...</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Withdrawing $600...</span></span><br><span class="line"><span class="comment">Sorry, but you are short $200.0</span></span><br><span class="line"><span class="comment">InsufficientFundsException</span></span><br><span class="line"><span class="comment">        at CheckingAccount.withdraw(CheckingAccount.java:25)</span></span><br><span class="line"><span class="comment">        at BankDemo.main(BankDemo.java:13)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>后端</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>后端</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring基础大全一</title>
    <url>/2022/02/23/Spring%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、概念"><a href="#一、概念" class="headerlink" title="一、概念"></a>一、概念</h1><ul>
<li>轻量级的开源JavaEE框架</li>
<li>IOC：控制反转，把创建对象过程交给Spring进行管理</li>
<li>Aop：面向切面，不修改源代码进行功能增强</li>
</ul>

<h1 id="二、IOC容器"><a href="#二、IOC容器" class="headerlink" title="二、IOC容器"></a>二、IOC容器</h1><h2 id="2-1-IOC底层原理"><a href="#2-1-IOC底层原理" class="headerlink" title="2.1 IOC底层原理"></a>2.1 IOC底层原理</h2><ul>
<li>XML解析、工厂模式、反射</li>
</ul>
<h2 id="2-2-IOC容器实现方式"><a href="#2-2-IOC容器实现方式" class="headerlink" title="2.2 IOC容器实现方式"></a>2.2 IOC容器实现方式</h2><h3 id="2-2-1-两个接口"><a href="#2-2-1-两个接口" class="headerlink" title="2.2.1 两个接口"></a>2.2.1 两个接口</h3><ul>
<li>BeanFactory：IOC容器基本实现，是Spring内部的使用接口，不提供开发人员使用</li>
<li>ApplicationContext：BeanFactory的子接口，提供更多更强大的功能，一般由开发人员进行使用<ul>
<li>ApplicationContext实现类：FileSystemApplicationContext/ClassPathXmlApplicationContext</li>
</ul>
</li>
</ul>
<h2 id="2-3-Bean管理"><a href="#2-3-Bean管理" class="headerlink" title="2.3 Bean管理"></a>2.3 Bean管理</h2><h3 id="2-3-1-两个操作"><a href="#2-3-1-两个操作" class="headerlink" title="2.3.1 两个操作"></a>2.3.1 两个操作</h3><ul>
<li>Spring创建对象</li>
<li>Spring注入属性</li>
</ul>
<h3 id="2-3-2-操作Bean管理对象（基础操作-基于XML）"><a href="#2-3-2-操作Bean管理对象（基础操作-基于XML）" class="headerlink" title="2.3.2 操作Bean管理对象（基础操作/基于XML）"></a>2.3.2 操作Bean管理对象（基础操作/基于XML）</h3><h4 id="（1）创建-获取对象"><a href="#（1）创建-获取对象" class="headerlink" title="（1）创建/获取对象"></a>（1）创建/获取对象</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.User&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在Spring配置文件中，使用bean标签，标签里面加对应属性，就可以实现对象创建</li>
<li>bean标签属性<ul>
<li>id：唯一标识，不可以加特殊符号</li>
<li>class：类全路径（包类路径）</li>
</ul>
</li>
<li>创建对象时候，默认也是执行无参数构造方法完成对象创建</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取XML文件名获取应用上下文</span></span><br><span class="line">ApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据bean的name属性获取到对象</span></span><br><span class="line">User user = context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用对象方法</span></span><br><span class="line">user.add();</span><br></pre></td></tr></table></figure>
<h4 id="（2）注入属性"><a href="#（2）注入属性" class="headerlink" title="（2）注入属性"></a>（2）注入属性</h4><ul>
<li>DI：依赖注入，就是注入对象属性值</li>
</ul>
<h4 id="（3）注入方式"><a href="#（3）注入方式" class="headerlink" title="（3）注入方式"></a>（3）注入方式</h4><ul>
<li>第一种：使用set方法进行注入</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String bname;</span><br><span class="line">    <span class="keyword">private</span> String bauthor;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 采用set方法进行属性注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBname</span><span class="params">(String bname)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bname=bname;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBauthor</span><span class="params">(String bauthor)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bauthor=bauthor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	使用property完成属性注入</span></span><br><span class="line"><span class="comment">		name：类里面属性名称</span></span><br><span class="line"><span class="comment">		value：向属性注入的值</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;活着&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>第二种：使用有参数构造进行注入</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Orders</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 有参数构造进行属性注入</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Orders</span><span class="params">(String oname,String address)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.oname = oname;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	使用constructor-arg完成有参数构造注入</span></span><br><span class="line"><span class="comment">		name：类里面属性名称</span></span><br><span class="line"><span class="comment">		value：向属性注入的值</span></span><br><span class="line"><span class="comment">		index：类中属性的下标，如下里&quot;0&quot;表示oname，&quot;1&quot;表示address</span></span><br><span class="line"><span class="comment">	如果不在bean中添加属性注入标签，则表示默认按照无参构造方式注入对象</span></span><br><span class="line"><span class="comment">	所以如果不在类中显式的定义无参构造，则xml文件会报错，报错内容为bean中的class</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.Orders&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;蛋炒饭&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;东华&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    &lt;constructor-arg index=&quot;1&quot; value=&quot;东华&quot;&gt;&lt;/constructor-arg&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>第三种：p名称空间注入（了解）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	在beans标签中添加p名称空间</span></span><br><span class="line"><span class="comment">		xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.User&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;gy&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-注入其他类型属性"><a href="#4-注入其他类型属性" class="headerlink" title="(4) 注入其他类型属性"></a>(4) 注入其他类型属性</h4><ul>
<li>字面量<ul>
<li>null值</li>
<li>属性值包含特殊符号</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  null标签为属性设置空值</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	属性值包含特殊符号</span></span><br><span class="line"><span class="comment">	&lt;&lt;&gt;&gt;会让属性值内容表示为标签</span></span><br><span class="line"><span class="comment">	解决方法：</span></span><br><span class="line"><span class="comment">		1. 把&lt;&gt;进行转义，如&amp;lt、&amp;gt</span></span><br><span class="line"><span class="comment">		2. 把带特殊符号内容谢到CDATA</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;南京&gt;&gt;]]&gt;<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-注入外部bean"><a href="#4-注入外部bean" class="headerlink" title="(4) 注入外部bean"></a>(4) 注入外部bean</h4><ul>
<li>比如Service层调用Dao层对象，需要在Bean中进行注入</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	在这里进行Service层对象的注入</span></span><br><span class="line"><span class="comment">	这样在Controller层，就可以调用userService对象提供的方法来处理我们的请求</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.userService&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	注入userDao对象</span></span><br><span class="line"><span class="comment">		name属性：类里面属性名称</span></span><br><span class="line"><span class="comment">		ref属性：创建userDao对象bean标签id值</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;userDao&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userDaoImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userDaoImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.userDaoImpl&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="5-注入内部bean和级联赋值"><a href="#5-注入内部bean和级联赋值" class="headerlink" title="(5) 注入内部bean和级联赋值"></a>(5) 注入内部bean和级联赋值</h4><ul>
<li><p>一对多关系：部门和员工</p>
<ul>
<li>一个部门有多个员工，一个员工属于一个部门</li>
<li>在实体类之间表示一对多关系，员工表示所属部门，使用对象类型属性</li>
</ul>
</li>
<li><p>实体类</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 部门类，生成set方法方便注入</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dept</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String dname;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDname</span><span class="params">(String dname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dname = dname;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 员工类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emp</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String ename;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Dept dept;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEname</span><span class="params">(String ename)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ename = ename;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(String gender)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDept</span><span class="params">(Dept dept)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.dept = dept;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>注入内部bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;man&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">&lt;!--内部注入部门属性，以嵌套bean的方式实现--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Dept&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;保安部&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>级联赋值</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--第一种写法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jack&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;man&quot;</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">&lt;!--引入外部bean的方式，为外部bean的属性赋值（级联赋值）--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Dept&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;保安部&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--第二种写法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Emp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;ename&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jack&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;man&quot;</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">&lt;!--引入外部bean的方式，为外部bean的属性赋值--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dept&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--需要Dept类中属性有get方法--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dept.dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;技术部&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Dept&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-3-操作Bean管理对象（注入集合类型）"><a href="#2-3-3-操作Bean管理对象（注入集合类型）" class="headerlink" title="2.3.3 操作Bean管理对象（注入集合类型）"></a>2.3.3 操作Bean管理对象（注入集合类型）</h3><h4 id="（1）注入数组-List-Map-Set类型"><a href="#（1）注入数组-List-Map-Set类型" class="headerlink" title="（1）注入数组/List/Map/Set类型"></a>（1）注入数组/List/Map/Set类型</h4><ul>
<li>为学生类注入集合属性</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stu</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 数据类型属性</span></span><br><span class="line">    <span class="keyword">private</span> String[] courses;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// List类型属性</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Map类型属性</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,String&gt; maps;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Set类型属性</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; sets;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 生成set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSets</span><span class="params">(Set&lt;String&gt; sets)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.sets = sets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCourses</span><span class="params">(String[] courses)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaps</span><span class="params">(Map&lt;String, String&gt; maps)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	数组对应array&gt;value标签</span></span><br><span class="line"><span class="comment">	List对应list&gt;value标签</span></span><br><span class="line"><span class="comment">	Map对应map&gt;entry[key,value]标签</span></span><br><span class="line"><span class="comment">	Set对应set&gt;value标签</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Stu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>数据结构<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>李四<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maps&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;Java&quot;</span> <span class="attr">value</span>=<span class="string">&quot;世界上最好的语言&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;Php&quot;</span> <span class="attr">value</span>=<span class="string">&quot;世界上最好的语言&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sets&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Mysql<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>Redis<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="（2）集合中注入对象类型值"><a href="#（2）集合中注入对象类型值" class="headerlink" title="（2）集合中注入对象类型值"></a>（2）集合中注入对象类型值</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stu</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 集合中对象类型注入</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Course&gt; courses;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//set方法注入属性</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCourses</span><span class="params">(List&lt;Course&gt; courses)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.courses = courses;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	List中的对象属性</span></span><br><span class="line"><span class="comment">		list&gt;ref.bean标签引入外部的对象</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Stu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;courses&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course1&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;course2&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Java&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;course2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Mysql&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="（4）把集合注入部分提取出来（公共属性）"><a href="#（4）把集合注入部分提取出来（公共属性）" class="headerlink" title="（4）把集合注入部分提取出来（公共属性）"></a>（4）把集合注入部分提取出来（公共属性）</h4><ul>
<li>在spring配置文件中引入util名称空间</li>
<li>使用util:list创建属性</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	添加xmlns:util</span></span><br><span class="line"><span class="comment">	在xsi:schemaLocation中添加http://www.springframework.org/schema/util/spring-util.xsd</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:util</span>=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--提取公共属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">util:list</span> <span class="attr">id</span>=<span class="string">&quot;bookList&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>Java从入门到入土<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>Php从入门到入土<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">util:list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Book&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">			使用公共list实现属性注入，需要使用ref完成list引入</span></span><br><span class="line"><span class="comment">			ref对应到util的id属性</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookList&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-3-4-操作Bean管理对象（工厂Bean）"><a href="#2-3-4-操作Bean管理对象（工厂Bean）" class="headerlink" title="2.3.4 操作Bean管理对象（工厂Bean）"></a>2.3.4 操作Bean管理对象（工厂Bean）</h3><ol>
<li>Spring有两种类型bean，一种普通bean，另外一种工厂bean</li>
<li>普通bean：在配置文件中定义bean类型就是返回类型</li>
<li>工厂bean：在配置文件定义bean类型可以和返回类型不一样<ol>
<li>第一步：创建类，让这个类作为工厂bean，实现接口FactoryBean</li>
<li>第二步：实现接口里面的方法，在实现的方法中定义返回的bean类型</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建工厂类，实现接口FactoryBean</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 工厂可以获取到指定对象，这里获取的是User对象</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setName(<span class="string">&quot;gy&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	注入工厂对象，注入后会调用getObject方法获取到指定的对象</span></span><br><span class="line"><span class="comment">	所以才说这里定义的bean，在返回的时候获取的对象可以不一样</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.factorybean.MyBean&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 测试方法，根据applicationContext获取到的对象应该使用具体的类，这里使用的是User,所以根据注入的工厂bean获取到的的就是User对象</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ApplicationContext applicationContext = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line">    User myBean = applicationContext.getBean(<span class="string">&quot;myBean&quot;</span>, User.class);</span><br><span class="line">    System.out.println(myBean);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-5-操作Bean管理对象（Bean作用域）"><a href="#2-3-5-操作Bean管理对象（Bean作用域）" class="headerlink" title="2.3.5 操作Bean管理对象（Bean作用域）"></a>2.3.5 操作Bean管理对象（Bean作用域）</h3><h4 id="（1）bean的性质"><a href="#（1）bean的性质" class="headerlink" title="（1）bean的性质"></a>（1）bean的性质</h4><ul>
<li>Spring中，默认情况下，创建的bean是单实例对象，也就是注入的一个bean被两个引用变量获取到后，引用的地址都是相同的</li>
</ul>
<h4 id="（2）设置单实例-多实例"><a href="#（2）设置单实例-多实例" class="headerlink" title="（2）设置单实例/多实例"></a>（2）设置单实例/多实例</h4><ul>
<li>在spring配置文件标签里面有属性scope用于设置bean是单实例还是多实例</li>
<li>scope属性值<ul>
<li>第一个：默认值，singleton，表示实例为单实例对象</li>
<li>第二个：prototype，表示是多实例对象</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;book&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.spring5.User&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;活着&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="（3）singleton和prototype区别"><a href="#（3）singleton和prototype区别" class="headerlink" title="（3）singleton和prototype区别"></a>（3）singleton和prototype区别</h4><ul>
<li>singleton表示<strong>单实例</strong>，prototype表示<strong>多实例</strong></li>
<li>设置scope值是singleton时候，加载spring配置文件（java的ApplicationContext对象创建的时候）时，就会创建单实例对象，单实例对象<strong>不管获取多少次</strong>地址都是相同的</li>
<li>设置scope值是prototype时，不是在加载spring配置文件时创建，而是在调用getBean方法的时候才创建多实例对象，多实例对象的地址都是不一样的</li>
</ul>
<h3 id="2-3-6-操作Bean管理对象（Bean生命周期）"><a href="#2-3-6-操作Bean管理对象（Bean生命周期）" class="headerlink" title="2.3.6 操作Bean管理对象（Bean生命周期）"></a>2.3.6 操作Bean管理对象（Bean生命周期）</h3><h4 id="（1）生命周期"><a href="#（1）生命周期" class="headerlink" title="（1）生命周期"></a>（1）生命周期</h4><ul>
<li>从对象创建到对象销毁的过程</li>
</ul>
<h4 id="（2）bean生命周期"><a href="#（2）bean生命周期" class="headerlink" title="（2）bean生命周期"></a>（2）bean生命周期</h4><ul>
<li>通过构造器创建bean实例（无参数构造）</li>
<li>为bean的属性设置值和对其他bean的引用（调用set方法）</li>
<li><strong>把bean实例传递bean前置处理器</strong></li>
<li>调用bean的初始化的方法（需要进行配置）</li>
<li><strong>把bean实例传递bean后置处理器</strong></li>
<li>bean可以被获取到了</li>
<li>当容器关闭时候，调用bean的销毁的方法（需要进行配置销毁的方法）</li>
</ul>
<h4 id="（3）演示bean生命周期"><a href="#（3）演示bean生命周期" class="headerlink" title="（3）演示bean生命周期"></a>（3）演示bean生命周期</h4><ul>
<li>实体类，配置无参构造，初始化方法initMethod，销毁方法destory</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String oname;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Order</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第一步：通过无参构造创建bean实例&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOname</span><span class="params">(String oname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.oname = oname;</span><br><span class="line">        System.out.println(<span class="string">&quot;第二步：调用set方法设置属性&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第三步：执行初始化方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第四步：执行销毁方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>bean注入</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	在bean中添加init-method、destroy-method属性</span></span><br><span class="line"><span class="comment">	并添加上我们在类中实现的方法</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myOrder&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Order&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;initMethod&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>测试</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean1.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取bean实例对象</span></span><br><span class="line">Object myBean = context.getBean(<span class="string">&quot;myOrder&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 手动让bean实例销毁，此方法只有ClassPathXmlApplicationContext有</span></span><br><span class="line">context.close();</span><br></pre></td></tr></table></figure>
<ul>
<li>结果</li>
</ul>
<img src="/2022/02/23/Spring%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/result.png" class="" title="image1">
<h4 id="（4）后置处理器"><a href="#（4）后置处理器" class="headerlink" title="（4）后置处理器"></a>（4）后置处理器</h4><ul>
<li>bean实例初始化前后的操作，具体操作如下</li>
<li>创建类，实现接口<strong>BeanPostProcessor</strong>，创建后置处理器</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 继承BeanPostProcessor的类可以重写方法</span></span><br><span class="line"><span class="comment">// 这两个方法可以在bean实例初始化前后被调用，可以对bean实例进行操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBeanPost</span> <span class="keyword">implements</span> <span class="title">BeanPostProcessor</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 初始化前的操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// 初始化后的操作</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>配置bean</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myOrder&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Order&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;initMethod&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;destory&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;oname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-4-xml自动装配"><a href="#2-4-xml自动装配" class="headerlink" title="2.4 xml自动装配"></a>2.4 xml自动装配</h2><ul>
<li>根据指定装配规则（属性名称或者属性类型），Spring自动将匹配的属性值进行注入</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        bean标签属性autowire可以实现自动装配</span></span><br><span class="line"><span class="comment">            autowire属性值有byName和byType</span></span><br><span class="line"><span class="comment">                byName要求bean中的id要和对应类的属性名一致，才能自动装配该对象</span></span><br><span class="line"><span class="comment">                byType要求类型一致，才能自动装配该对象，注意要有两个相同类型的bean就会报错</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;emp&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Emp&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dept&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.company.Dept&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-IOC操作bean管理（外部属性文件）"><a href="#2-5-IOC操作bean管理（外部属性文件）" class="headerlink" title="2.5 IOC操作bean管理（外部属性文件）"></a>2.5 IOC操作bean管理（外部属性文件）</h2><ul>
<li>使用情况：一般在spring项目要配置properties配置文件，填写数据库信息，这里就需要使用xml以引入外部文件的方式，配置连接数据库的bean</li>
<li><p>直接配置数据库信息</p>
<ul>
<li>配置德鲁伊druid连接池</li>
</ul>
</li>
<li><p>引入外部属性文件配置数据库连接池</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        先引入druid.jar包，在xml中引入命名context空间</span></span><br><span class="line"><span class="comment">            xmlns:util=&quot;http://www.springframework.org/schema/util&quot;</span></span><br><span class="line"><span class="comment">            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd</span></span><br><span class="line"><span class="comment">        通过context引入properties配置文件</span></span><br><span class="line"><span class="comment">        在druid中通过$&#123;&#125;引入配置文件中的信息，注入数据库连接池信息</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:application.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.driverClass&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.userName&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;prop.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-6-IOC操作Bean管理（基于注解方式）"><a href="#2-6-IOC操作Bean管理（基于注解方式）" class="headerlink" title="2.6 IOC操作Bean管理（基于注解方式）"></a>2.6 IOC操作Bean管理（基于注解方式）</h2><h3 id="2-6-1-Spring提供的注解"><a href="#2-6-1-Spring提供的注解" class="headerlink" title="2.6.1 Spring提供的注解"></a>2.6.1 Spring提供的注解</h3><ul>
<li>@Component</li>
<li>@Service</li>
<li>@Controller</li>
<li>@Repository</li>
<li>以上的注解功能都是一样的，都可以用来创建bean实例，主要是方面理解</li>
</ul>
<h3 id="2-6-2-注解方式创建对象"><a href="#2-6-2-注解方式创建对象" class="headerlink" title="2.6.2 注解方式创建对象"></a>2.6.2 注解方式创建对象</h3><ul>
<li>第一步：引入spring-aop包</li>
<li>第二步：在bean配置文件中，开启组件扫描</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;包地址 包地址 ...&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>第三步：在类上添加注解，spring即可扫描到该类并完成对象的注入</p>
</li>
<li><p>默认注入bean的id为类名称首字母小写：如UserService=&gt;userService</p>
</li>
<li>注解<strong>Repository(value=”userSerivice”)</strong>中的value值等同于bean的id值</li>
</ul>
<h3 id="2-6-3-注解方式注入属性"><a href="#2-6-3-注解方式注入属性" class="headerlink" title="2.6.3 注解方式注入属性"></a>2.6.3 注解方式注入属性</h3><ul>
<li>提供的注解<ul>
<li>@Autowired：根据<strong>属性类型</strong>进行自动装配</li>
<li>@Qualifier：根据<strong>属性名称</strong>进行注入，@Qualifier(value=”注入类的value/id值”)，<strong>需要和@Autowired一起使用</strong>，就是叠加在一起作用在属性上</li>
<li>@Resource：可以根据类型/名称注入，@Resource默认按照属性类型进行自动装配，@Resource(name=””)即可以按照属性名称进行注入</li>
<li>@Value：完成普通属性的注入，如@Value(value=”123”)，可以为String类型属性注入属性值</li>
</ul>
</li>
<li>以上操作都需要在bean配置文件中开启扫描才能运行，意思是在获取注入的对象时，仍然要用ApplicationContext获取到bean配置文件</li>
</ul>
<h3 id="2-6-4-完全注解开发"><a href="#2-6-4-完全注解开发" class="headerlink" title="2.6.4 完全注解开发"></a>2.6.4 完全注解开发</h3><ul>
<li>第一步：创建配置类config/，这一步完成后就可以删除bean配置文件，因为这一步的作用和bean配置文件是一样的</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages=&#123;&quot;com.company&quot;&#125;)</span>	<span class="comment">//配置需要扫描的包名</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>第二步：获取对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfig.class)</span><br><span class="line">UserService userService = context.getBean(<span class="string">&quot;userService&quot;</span>,UserService.class)</span><br></pre></td></tr></table></figure>
<h1 id="三、AOP"><a href="#三、AOP" class="headerlink" title="三、AOP"></a>三、AOP</h1><h2 id="3-1-概念"><a href="#3-1-概念" class="headerlink" title="3.1 概念"></a>3.1 概念</h2><ul>
<li>面向切面编程：在不修改源代码的情况下在主干功能里添加新的功能模块</li>
</ul>
<img src="/2022/02/23/Spring%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/aop.png" class="" title="image3">
<h2 id="3-2-AOP底层原理"><a href="#3-2-AOP底层原理" class="headerlink" title="3.2 AOP底层原理"></a>3.2 AOP底层原理</h2><h3 id="3-2-1-动态代理"><a href="#3-2-1-动态代理" class="headerlink" title="3.2.1 动态代理"></a>3.2.1 动态代理</h3><ul>
<li><p>Spring5已经对动态代理做了封装，可以直接调用，需要的知识点：反射</p>
</li>
<li><p>第一种：有接口情况，使用JDK动态代理</p>
<ul>
<li>创建接口实现类代理对象，增强类的方法</li>
</ul>
</li>
</ul>
<img src="/2022/02/23/Spring%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/interaop.png" class="" title="image4">
<ul>
<li>第二种：没有接口情况，使用CGLIB动态代理</li>
</ul>
<img src="/2022/02/23/Spring%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/CGLIB.png" class="" title="image5">
<h3 id="3-2-2-AOP（JDK动态代理）"><a href="#3-2-2-AOP（JDK动态代理）" class="headerlink" title="3.2.2 AOP（JDK动态代理）"></a>3.2.2 AOP（JDK动态代理）</h3><ul>
<li>JDK动态代理，使用Proxy类里面的方法创建代理对象<ul>
<li>调用newProxyInstance方法</li>
</ul>
</li>
<li>newProxyInstance方法包含的三个参数<ul>
<li>第一个参数：类加载器</li>
<li>第二个参数：增强方法所在的类，这个类实现的接口，支持多个接口</li>
<li>第三个参数：实现接口InvocationHandler，创建代理对象，写增强的方法</li>
</ul>
</li>
<li>实现步骤：<ul>
<li>创建接口，定义方法，如UserDao</li>
<li>创建接口实现类，实现方法，如UserDaoImpl</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDKProxy</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Class[] interfaces = &#123;UserDao.class&#125;;</span><br><span class="line">       <span class="comment">// 写法一：匿名内部类 </span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Proxy.newProxyInstance(JDKProxy.class.getClassLoader(),interfaces,new InvocationHandler()&#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable&#123;</span></span><br><span class="line"><span class="comment">                return null;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        UserDaoImpl userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 写法二：创建代理对象</span></span><br><span class="line">        UserDao dao = (UserDao)Proxy.newProxyInstance(JDKProxy.class.getClassLoader(),interfaces,<span class="keyword">new</span> UserDaoProxy(userDao));</span><br><span class="line">        dao.add(<span class="number">1</span>,<span class="number">2</span>);	<span class="comment">// 相加的方法</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserDaoProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</span><br><span class="line">    <span class="comment">// 写Onject是为了代码更通用</span></span><br><span class="line">    <span class="keyword">private</span> Object obj;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 获取到代理对象所代理的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserDaoProxy</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.obj = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行前...&quot;</span>+method.getName+</span><br><span class="line">                           <span class="string">&quot;\n传递的参数...&quot;</span>+Arrays.toString(args));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 执行增强方法</span></span><br><span class="line">        Object res = method.invoke(obj,args);</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;方法执行后...&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-3-AOP专业术语"><a href="#3-3-AOP专业术语" class="headerlink" title="3.3 AOP专业术语"></a>3.3 AOP专业术语</h2><ul>
<li>连接点：类中可以被增强的方法，这些方法称为连接点</li>
<li>切入点：真正被增强的方法，称为切入点</li>
<li>通知（增强）：实际增强的逻辑部分<ul>
<li>前置通知</li>
<li>后置通知</li>
<li>环绕通知</li>
<li>异常通知</li>
<li>最终通知 finally</li>
</ul>
</li>
<li>切面：动作，如权限判断<ul>
<li>把通知应用到切入点的过程</li>
</ul>
</li>
</ul>
<h2 id="3-4-AOP操作准备"><a href="#3-4-AOP操作准备" class="headerlink" title="3.4 AOP操作准备"></a>3.4 AOP操作准备</h2><h3 id="3-4-1-概述"><a href="#3-4-1-概述" class="headerlink" title="3.4.1 概述"></a>3.4.1 概述</h3><ul>
<li>Spring框架一般都是基于AspectJ实现AOP操作</li>
<li>AspectJ不是Spring组成部分，独立的AOP框架，一般把AspectJ和Spring框架一起使用，进行AOP操作</li>
<li>基于AspectJ实现AOP操作<ul>
<li>基于xml配置文件实现</li>
<li>基于注解方式实现（使用）</li>
</ul>
</li>
<li>需要引入依赖包</li>
</ul>
<h3 id="3-4-2-切入点表达式"><a href="#3-4-2-切入点表达式" class="headerlink" title="3.4.2 切入点表达式"></a>3.4.2 切入点表达式</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// execution([权限修饰符][返回类型][类全路径][方法名称]([参数列表]))</span></span><br><span class="line"><span class="comment">// 例1：对BookDao类里的add进行增强</span></span><br><span class="line">execution(* com.company.dao.BookDao.add(...));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例2：对BookDao类里的所有方法进行增强</span></span><br><span class="line">execution(* com.company.dao.BookDao.*(...));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例2：对包dao中所有类所有方法进行增强</span></span><br><span class="line">execution(* com.company.dao.*.*(...));</span><br></pre></td></tr></table></figure>
<h2 id="3-5-AspectJ注解"><a href="#3-5-AspectJ注解" class="headerlink" title="3.5 AspectJ注解"></a>3.5 AspectJ注解</h2><h3 id="3-5-1-操作步骤"><a href="#3-5-1-操作步骤" class="headerlink" title="3.5.1 操作步骤"></a>3.5.1 操作步骤</h3><ul>
<li>创建类，定义方法，如User类</li>
<li>创建增强类，编写增强逻辑，如UserProxy<ul>
<li>在增强类中，创建方法，让不同方法代表不同通知类型</li>
</ul>
</li>
<li>进行通知的配置<ul>
<li>在Spring配置文件中，开启注解扫描</li>
<li>使用注解创建User(@Component)和UserProxy对象</li>
<li>在增强类上面添加注解@Aspect</li>
<li>在Spring配置文件中开启生成代理对象</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开启注解扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;包地址 包地址 ...&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--开启Aspect生成代理对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>配置不同类型的通知<ul>
<li>在增强类中，在通知方法上添加通知类型注解，使用切入点表达式进行配置</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserProxy</span></span>&#123;</span><br><span class="line">    <span class="comment">// 前置通知</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 最终通知，方法之后执行</span></span><br><span class="line">    <span class="meta">@After(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;after......&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 后置通知，返回值之后执行，有异常时不执行</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterReturning......&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 异常通知，有异常才执行</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterThrowing......&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 环绕通知，此注解下的方法，在被增强方法执行之前和之后都执行</span></span><br><span class="line">    <span class="meta">@Around(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;around before......&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 被增强方法执行</span></span><br><span class="line">        proceedingJoinPoint.proceed();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;around after......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-5-2-相同切入点抽取"><a href="#3-5-2-相同切入点抽取" class="headerlink" title="3.5.2 相同切入点抽取"></a>3.5.2 相同切入点抽取</h3><ul>
<li>将方法增强的切入点写成公共的部分，方便调用和切入点的统一修改</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Pointcur(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointdemo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserProxy</span></span>&#123;</span><br><span class="line">    <span class="comment">// 前置通知，加入方法名称</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-5-3-增强类设置优先级"><a href="#3-5-3-增强类设置优先级" class="headerlink" title="3.5.3 增强类设置优先级"></a>3.5.3 增强类设置优先级</h3><ul>
<li>多个增强类可以增强同一个方法，因此可以为增强类设置优先级，</li>
<li>方法：在增强类上面添加注解@Order(数值型)，数字类型值越小，优先级越高</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonProxy</span></span>&#123;</span><br><span class="line">    <span class="meta">@Pointcur(value = &quot;execution(* com.company.User.add([参数]))&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointdemo</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 前置通知，加入方法名称</span></span><br><span class="line">    <span class="meta">@Before(value = &quot;pointdemo()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before......&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-6-AspectJ配置文件"><a href="#3-6-AspectJ配置文件" class="headerlink" title="3.6 AspectJ配置文件"></a>3.6 AspectJ配置文件</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--配置切入点--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;p&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.company.Book.buy(...))&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置切面，ref对应注入的增强类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;bookProxy&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--配置切面，ref对应前面的切入点id--&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;p&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-7-完全注解开发"><a href="#3-7-完全注解开发" class="headerlink" title="3.7 完全注解开发"></a>3.7 完全注解开发</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages=&#123;&quot;com.company&quot;&#125;)</span>	<span class="comment">//配置需要扫描的包名</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy(proxyTargetClass=true)</span>	<span class="comment">// 默认为true，开启Aspect生成代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AopConfig</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="四、JdbcTemplate"><a href="#四、JdbcTemplate" class="headerlink" title="四、JdbcTemplate"></a>四、JdbcTemplate</h1><h2 id="4-1-准备工作"><a href="#4-1-准备工作" class="headerlink" title="4.1 准备工作"></a>4.1 准备工作</h2><ul>
<li>引入依赖包<ul>
<li>mysql-connect</li>
<li>spring-jdbc</li>
<li>spring-tx：处理事务的包</li>
</ul>
</li>
<li>配置数据库连接池（druid）</li>
<li>注入JdbcTemplate对象</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jdbcTemplate&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入连接池对象属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>开启组件扫描</li>
</ul>
<h2 id="4-3-CURD实现"><a href="#4-3-CURD实现" class="headerlink" title="4.3 CURD实现"></a>4.3 CURD实现</h2><h3 id="4-3-1-添加操作"><a href="#4-3-1-添加操作" class="headerlink" title="4.3.1 添加操作"></a>4.3.1 添加操作</h3><ul>
<li>创建实体类User，创建Dao层UserDao，创建Service层UserService</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into user values(?,?,?)&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        Object[] args = &#123;user.getUserId(),user.getUserName(),user.getPassword()&#125;</span><br><span class="line">        jdbcTemplate.update(sql,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-2-修改-删除操作"><a href="#4-3-2-修改-删除操作" class="headerlink" title="4.3.2 修改/删除操作"></a>4.3.2 修改/删除操作</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;update user set user_name=?,password=? where user_id=?&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        Object[] args = &#123;user.getUserName(),user.getPassword(),user.getUserId()&#125;</span><br><span class="line">        jdbcTemplate.update(sql,args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;delete from user where user_id=?&quot;</span>;</span><br><span class="line"></span><br><span class="line">        jdbcTemplate.update(sql,id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-3-查询操作"><a href="#4-3-3-查询操作" class="headerlink" title="4.3.3 查询操作"></a>4.3.3 查询操作</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 查询用户数</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">selctCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select count(*) from user&quot;</span>;</span><br><span class="line"></span><br><span class="line">        Integer count = jdbcTemplate.queryForObject(sql,Integer.class);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 根据id查询用户</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserInfo</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from user where user_id=?&quot;</span>;</span><br><span class="line">		<span class="comment">// BeanPropertyRowMapper用于封装查询到的数据</span></span><br><span class="line">        User user = jdbcTemplate.queryForObject(sql,<span class="keyword">new</span> BeanPropertyRowMapper&lt;User&gt;(User.class),id);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 查询返回集合</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String sql = <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        List&lt;User&gt; users = jdbcTemplate.query(sql,<span class="keyword">new</span> BeanPropertyRowMapper&lt;User&gt;(User.class));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-4-批量操作"><a href="#4-3-4-批量操作" class="headerlink" title="4.3.4 批量操作"></a>4.3.4 批量操作</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span></span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 批量添加,List&lt;Object[]&gt;中的Object[]表示参数的集合</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] batchAdd(List&lt;Object[]&gt; barchArgs)&#123;</span><br><span class="line">        String sql = <span class="string">&quot;insert into user values(?,?,?)&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 返回的是影响的行数数组</span></span><br><span class="line">        <span class="keyword">int</span>[] res = jdbcTemplate.batchUpdate(sql,batchArgs);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 批量修改</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] batchUpdate(List&lt;Object[]&gt; barchArgs)&#123;</span><br><span class="line">        String sql = <span class="string">&quot;update user set user_name=?,password=? where user_id=?&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 返回的是影响的行数数组</span></span><br><span class="line">        <span class="keyword">int</span>[] res = jdbcTemplate.batchUpdate(sql,batchArgs);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 批量删除</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] batchDelete(List&lt;Object[]&gt; barchArgs)&#123;</span><br><span class="line">        String sql = <span class="string">&quot;delete from user where user_id=?&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 返回的是影响的行数数组</span></span><br><span class="line">        <span class="keyword">int</span>[] res = jdbcTemplate.batchUpdate(sql,batchArgs);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="五、事务管理"><a href="#五、事务管理" class="headerlink" title="五、事务管理"></a>五、事务管理</h1><h2 id="5-1-概念"><a href="#5-1-概念" class="headerlink" title="5.1 概念"></a>5.1 概念</h2><ul>
<li>一组操作的组合</li>
<li>事务的一些问题请转到数据库笔记中进行学习</li>
</ul>
<h2 id="5-2-事务特性ACID"><a href="#5-2-事务特性ACID" class="headerlink" title="5.2 事务特性ACID"></a>5.2 事务特性ACID</h2><ul>
<li>原子性</li>
<li>一致性</li>
<li>隔离性</li>
<li>持久性</li>
</ul>
<h2 id="5-3-准备工作"><a href="#5-3-准备工作" class="headerlink" title="5.3 准备工作"></a>5.3 准备工作</h2><ul>
<li>以银行转账操作为例<ul>
<li>创建数据库表，记录用户资金</li>
<li>创建service、dao完成对象创建和注入</li>
<li>创建jdbcTemplate对象</li>
<li>dao创建两个方法，某用户资金增加，另外用户资金减少</li>
<li>service创建转账方法，实现转账操作</li>
</ul>
</li>
</ul>
<h2 id="5-4-事务操作"><a href="#5-4-事务操作" class="headerlink" title="5.4 事务操作"></a>5.4 事务操作</h2><h3 id="5-4-1-声明式事务管理"><a href="#5-4-1-声明式事务管理" class="headerlink" title="5.4 1 声明式事务管理"></a>5.4 1 声明式事务管理</h3><ul>
<li>基于注解方式</li>
<li>基于xml方式</li>
</ul>
<h3 id="5-4-2-Spring事务管理API"><a href="#5-4-2-Spring事务管理API" class="headerlink" title="5.4.2 Spring事务管理API"></a>5.4.2 Spring事务管理API</h3><ul>
<li>Spring提供一个接口，代表事务管理器，这个接口针对不同框架提供不同的实现类</li>
</ul>
<h3 id="5-4-2-注解方式"><a href="#5-4-2-注解方式" class="headerlink" title="5.4.2 注解方式"></a>5.4.2 注解方式</h3><ul>
<li>注入事务管理对象</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--由于使用的式jdbc框架，所以注入DataSourceTransactionManager对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--注入数据源--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>开启扫描</li>
<li>xml引入名称空间tx，同前面的引入操作</li>
<li>开启事务注解</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transacntion-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tx:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在Service层添加事务注解@Transactional<ul>
<li>@Transactional可以加到类上，也可以加到方法上</li>
<li>加到类上，表示作用到类中的所有方法</li>
</ul>
</li>
</ul>
<h3 id="5-4-3-注解的参数"><a href="#5-4-3-注解的参数" class="headerlink" title="5.4.3 注解的参数"></a>5.4.3 注解的参数</h3><h4 id="（1）propagation：事务传播行为"><a href="#（1）propagation：事务传播行为" class="headerlink" title="（1）propagation：事务传播行为"></a>（1）propagation：事务传播行为</h4><ul>
<li>多事务方法直接进行调用，这个过程中事务是如何进行管理的，必须是对数据库中的数据产生变化的操作</li>
<li>简单来说就是，就是添加了@Transaction事务管理的方法去调用未添加事务管理的方法，事务的操作过程是怎样的</li>
</ul>
<img src="/2022/02/23/Spring%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8%E4%B8%80/transactional.png" class="" title="image54">
<ul>
<li>下表均已上图为例，在事务管理方法中调用非事务管理方法，非事务管理方法运行的情况</li>
<li>配置方法：@Transactional(propagation = Propagation.REQUIRED)</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>传播属性</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>REQUIRED（default）</td>
<td>有事务就在当前事务运行，没有事务就创建事务运行</td>
</tr>
<tr>
<td>REQUIRED_NEW</td>
<td>无论有没有事务，都会创建一个事务在里面运行</td>
</tr>
<tr>
<td>SUPPORTS</td>
<td>如果有事务在运行，当前的方法就在这个事务内运行，否则它可以不运行在事务中</td>
</tr>
<tr>
<td>NOT_SUPPORT</td>
<td>当前的方法不应该运行在事务中，如果有运行的事务，将它挂起</td>
</tr>
<tr>
<td>MANDATORY</td>
<td>当前的方法必须运行在事务内部，如果没有正在运行的事务，就抛出异常</td>
</tr>
<tr>
<td>NEVER</td>
<td>当前的方法不应该运行在事务中，如果有运行的事务，就抛出异常</td>
</tr>
<tr>
<td>NESTED</td>
<td>如果有事务在运行，当前的方法就应该在这个事务的嵌套事务内运行，否则，就启动一个新的事务，并在它自己的事务内运行</td>
</tr>
</tbody>
</table>
</div>
<h4 id="（2）ioslation：事务隔离级别"><a href="#（2）ioslation：事务隔离级别" class="headerlink" title="（2）ioslation：事务隔离级别"></a>（2）ioslation：事务隔离级别</h4><ul>
<li>隔离性：多事务操作之间不会产生影响</li>
<li>多事务带来的问题：<strong>脏读、不可重复读、虚读</strong><ul>
<li>脏读：未提交的事务读取另一个未提交事务的数据</li>
<li>不可重复读：两个事务同时读到一条数据，一个事务读到了另一个事务<strong>提交之前</strong>的数据（数据不一致了）</li>
<li>虚读：一个未提交的事务读取到另一个提交事务的添加数据</li>
</ul>
</li>
<li>配置方式：@Transactional(ioslation= Ioslation.READ_UNCOMMITTED)</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>脏读</th>
<th>不可重复读</th>
<th>虚读</th>
</tr>
</thead>
<tbody>
<tr>
<td>READ UNCOMMITTED（读未提交）</td>
<td>有</td>
<td>有</td>
<td>有</td>
</tr>
<tr>
<td>READ COMMITTED（读已提交）</td>
<td>无</td>
<td>有</td>
<td>有</td>
</tr>
<tr>
<td>REPEATABLE READ（可重复读/default）</td>
<td>无</td>
<td>无</td>
<td>有</td>
</tr>
<tr>
<td>SERIALIZABLE（串行化）</td>
<td>无</td>
<td>无</td>
<td>无</td>
</tr>
</tbody>
</table>
</div>
<h4 id="（3）timeout：超时时间"><a href="#（3）timeout：超时时间" class="headerlink" title="（3）timeout：超时时间"></a>（3）timeout：超时时间</h4><ul>
<li>事务需要在一定时间内进行提交，如果不提交就进行回滚，默认是-1，单位是秒</li>
</ul>
<h4 id="（4）readOnly：是否只读"><a href="#（4）readOnly：是否只读" class="headerlink" title="（4）readOnly：是否只读"></a>（4）readOnly：是否只读</h4><ul>
<li><p>读：查询操作，写：增删改</p>
</li>
<li><p>默认为false</p>
</li>
</ul>
<h4 id="（5）rollbackFor：回滚"><a href="#（5）rollbackFor：回滚" class="headerlink" title="（5）rollbackFor：回滚"></a>（5）rollbackFor：回滚</h4><ul>
<li>设置出现哪些异常进行事务回滚</li>
<li>设置该属性值为异常的class即可</li>
</ul>
<h4 id="（6）noRollbackFor：不回滚"><a href="#（6）noRollbackFor：不回滚" class="headerlink" title="（6）noRollbackFor：不回滚"></a>（6）noRollbackFor：不回滚</h4><ul>
<li>设置出现哪些异常不进行事务回滚</li>
</ul>
<h2 id="5-5-事务完全注解开发"><a href="#5-5-事务完全注解开发" class="headerlink" title="5.5 事务完全注解开发"></a>5.5 事务完全注解开发</h2><ul>
<li>创建配置类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &quot;com.kuang&quot;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span>	<span class="comment">// 开启事务</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TxConfig</span></span>&#123;</span><br><span class="line">    <span class="comment">// 创建数据库连接池</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DruidDataSource <span class="title">getDruidDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">        DruidDataSource dataSource = <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">        dataSource.setDriverClassName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        dataSource.setUrl(<span class="string">&quot;jdbc:mysql://user_db&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dataSource;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建JdbcTemplate</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JdbcTemplate <span class="title">getJdbcTemplate</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">        JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate();</span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建事务管理器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSourceTransactionManager <span class="title">getDataSourceTransactionManager</span><span class="params">(DataSource dataSource)</span></span>&#123;</span><br><span class="line">        DataSourceTransactionManager transactionManager = <span class="keyword">new</span> DataSourceTransactionManager();</span><br><span class="line">        transactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="六、Spring5新特性"><a href="#六、Spring5新特性" class="headerlink" title="六、Spring5新特性"></a>六、Spring5新特性</h1>]]></content>
      <categories>
        <category>后端</category>
        <category>SSM框架</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>后端框架</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记3-论文写作指导</title>
    <url>/2022/03/25/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B03-%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E6%8C%87%E5%AF%BC/</url>
    <content><![CDATA[<h1 id="一、论文投稿"><a href="#一、论文投稿" class="headerlink" title="一、论文投稿"></a>一、论文投稿</h1><h2 id="1-1-期刊和会议的区别"><a href="#1-1-期刊和会议的区别" class="headerlink" title="1.1 期刊和会议的区别"></a>1.1 期刊和会议的区别</h2><ul>
<li>针对方向不同：<ul>
<li>会议论文是针对学术会议投稿，会务组觉得是否录用</li>
<li>期刊论文是针对某学术期刊投稿，期刊编辑部决定是否录用，审稿人只做审稿并返回意见</li>
</ul>
</li>
<li>审稿周期不同：<ul>
<li>会议的审稿周期一般比较短，2周左右，野鸡的则更短</li>
<li>国内中文核心期刊一般2个月，普刊也要1-3周左右，水刊则更短</li>
</ul>
</li>
</ul>
<h2 id="1-2-EI检索"><a href="#1-2-EI检索" class="headerlink" title="1.2 EI检索"></a>1.2 EI检索</h2><h2 id="1-3-核心期刊"><a href="#1-3-核心期刊" class="headerlink" title="1.3 核心期刊"></a>1.3 核心期刊</h2>]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>论文投稿</tag>
        <tag>期刊</tag>
        <tag>论文格式</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis基础大全</title>
    <url>/2022/03/26/redis%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、安装与配置"><a href="#一、安装与配置" class="headerlink" title="一、安装与配置"></a>一、安装与配置</h1><ol>
<li>安装gcc：<strong>yum install gcc -y</strong></li>
<li>下载redis-x.x.x.tar.gz，并解压：<strong>tar -zxvf redis-x.x.x.tar.gz</strong></li>
<li>进入redis解压目录，执行命令<strong>make和make install</strong>，不报错就表示安装成功，默认安装位置在<strong>/usr/local/bin</strong>目录下</li>
<li>开启redis后台启动，将<strong>redis解压目录</strong>下的<strong>redis.conf</strong>文件复制到其他位置，比如/etc目录下</li>
<li>修改<strong>redis.conf</strong>文件，找到<strong>daemonize</strong>字段，将其后的值no改为<strong>yes</strong>后，保存退出</li>
<li>执行命令<strong>redis-server /etc/redis.conf</strong>，即可后台开启redis</li>
<li>使用redis客户端访问redis服务，执行命令<strong>redis-cli</strong>进入redis客户端</li>
</ol>
<h1 id="二、Redis语法"><a href="#二、Redis语法" class="headerlink" title="二、Redis语法"></a>二、Redis语法</h1><h2 id="2-1-数据类型"><a href="#2-1-数据类型" class="headerlink" title="2.1 数据类型"></a>2.1 数据类型</h2><ul>
<li>字符串String</li>
<li>列表List</li>
<li>集合Set</li>
<li>哈希Hash</li>
<li>有序集合Zset</li>
</ul>
<h2 id="2-2-常用命令"><a href="#2-2-常用命令" class="headerlink" title="2.2 常用命令"></a>2.2 常用命令</h2><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>ping</td>
<td>查看服务是否正常运行</td>
</tr>
<tr>
<td>dbsize</td>
<td>查看当前数据库中key的数目（返回值为integer）</td>
</tr>
<tr>
<td>select 0</td>
<td>切换数据库，默认使用的是db0<br/>Redis默认操作16个数据库，序号为0~15</td>
</tr>
<tr>
<td>flushdb</td>
<td>删除当前操作的数据库中的内容</td>
</tr>
<tr>
<td>flushall</td>
<td>删除所有的库中的数据</td>
</tr>
<tr>
<td>keys pattern</td>
<td>查找所有符合pattern的key，pattern可以使用统配符</td>
</tr>
<tr>
<td>exists [key…]</td>
<td>判断key是否存在，存在key返回1，不存在返回0；<br/>使用多个key，则执行后返回key的数量</td>
</tr>
<tr>
<td>expire [key] [seconds]</td>
<td>设置key的生存时间，超过时间key自动删除；单位是秒；<br/>设置成功返回1，其他情况是0</td>
</tr>
<tr>
<td>ttl [key]</td>
<td>以秒为单位，返回key的剩余生存时间；<br/>-1：表示没有设置 key 的生存时间， key 永不过期；<br/>-2 ：表示key 不存在；其他表示剩余时间</td>
</tr>
<tr>
<td>type [key]</td>
<td>查看key所存储的数据类型</td>
</tr>
<tr>
<td>del [key…]</td>
<td>删除指定的key，不存在的key进行忽略；<br/>返回值：数字，删除的key的数量</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-3-字符串String"><a href="#2-3-字符串String" class="headerlink" title="2.3 字符串String"></a>2.3 字符串String</h2><ul>
<li>虽然给某个key设置的值是数字，但key的类型仍然是字符串，数字是以字符串的形式存储的，增加和减小操作也是基于字符串的操作</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>set [key] [value]</td>
<td>将字符串值设置到key中；设置成功返回OK</td>
</tr>
<tr>
<td>get [key]</td>
<td>获取数据库中key的值；<br/>返回值：key对应的value值</td>
</tr>
<tr>
<td>incr [key]</td>
<td>将 key 中储存的数字值加 1<br/>如果 key 不存在，则创建 key 并初始化其值为 0 再执行incr 操作（只能对数字类型的数据操作）</td>
</tr>
<tr>
<td>decr [key]</td>
<td>与incr作用相反，是减1操作</td>
</tr>
<tr>
<td>append [key] [value]</td>
<td>字符串追加；<br/>如果 key 存在， 则将 value 追加到 key 原来旧值的末尾<br/>如果 key 不存在， 则将 key 设置值为 value；<br/>返回值：追加后的字符串总长度</td>
</tr>
<tr>
<td>strlen [key]</td>
<td>返回 key 所储存的字符串值的长度</td>
</tr>
<tr>
<td>getrange [key] [start] [end]</td>
<td>获取 key 中字符串值从 start 开始 到 end 结束 的子字符串,包括 start 和 end<br/>负数表示从字符串的末尾开始， -1 表示最后一个字符</td>
</tr>
<tr>
<td>setrange [key] [offset] [value]</td>
<td>用 value 覆盖（替换）key 的从offset位置开始存储的值<br/>不存在的 key ，在offset前填充空白字符<br/>返回值：修改后的字符串的长度</td>
</tr>
<tr>
<td>mset [key value…]</td>
<td>同时设置一个或多个 key-value<br/>返回值： OK</td>
</tr>
<tr>
<td>mget [key …]</td>
<td>获取所有(一个或多个)给定 key 的值<br/>包含所有 key 的列表</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-4-列表List"><a href="#2-4-列表List" class="headerlink" title="2.4 列表List"></a>2.4 列表List</h2><h3 id="2-4-1-原理"><a href="#2-4-1-原理" class="headerlink" title="2.4.1 原理"></a>2.4.1 原理</h3><ul>
<li>单键多值</li>
<li>底层：双向链表</li>
</ul>
<h3 id="2-4-2-命令"><a href="#2-4-2-命令" class="headerlink" title="2.4.2 命令"></a>2.4.2 命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>lpush/rpush key [value…]</td>
<td>从左/右侧将一个或多个值 value 插入到列表 key 的表头<br/>从左侧插入属于头插法，列表顺序为倒序<br/>返回值：数字，新列表的长度</td>
</tr>
<tr>
<td>lpop/rpop</td>
<td></td>
</tr>
<tr>
<td>rpoplpush</td>
<td></td>
</tr>
<tr>
<td>lrange [key] [start] [stop]</td>
<td>获取列表 key 中指定区间内的元素，0表示第一个元素，-1为最后一个元素<br/>返回值：指定区间的列表</td>
</tr>
<tr>
<td>lindex [key] [index]</td>
<td>获取列表 key 中下标为指定 index 的元素<br/>返回值：指定下标的元素；index 不在列表范围，返回 nil</td>
</tr>
<tr>
<td>llen [key]</td>
<td>获取列表 key 的长度<br/>返回值：数值，列表的长度； key 不存在返回 0</td>
</tr>
<tr>
<td>lrem [key] [count] [value]</td>
<td>移除列表中count个与value相等的元素<br/>count&gt;0从列表左侧开始移除；<br/>count<0从列表右侧开始移除；<br/>count=0移除表中所有与 value 相等的值</td>
</tr>
<tr>
<td>lset [key] [index] [value]</td>
<td>将列表 key 下标为 index 的元素的值设置为 value<br/>返回值：设置成功返回 ok ; key 不存在或者 index 超出范围返回错误信息</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-5-集合Set"><a href="#2-5-集合Set" class="headerlink" title="2.5 集合Set"></a>2.5 集合Set</h2><h3 id="2-5-1-原理"><a href="#2-5-1-原理" class="headerlink" title="2.5.1 原理"></a>2.5.1 原理</h3><ul>
<li>底层：hash表</li>
</ul>
<h3 id="2-5-2-命令"><a href="#2-5-2-命令" class="headerlink" title="2.5.2 命令"></a>2.5.2 命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>sadd [key] [member…]</td>
<td>将一个或多个 member 元素加入到集合 key 当中，已经存在于集合的 member 元素将被忽略，不会再加入。<br/>返回值：加入到集合的新元素的个数。不包括被忽略的元素</td>
</tr>
<tr>
<td>smembers [key]</td>
<td>获取集合 key 中的所有成员元素，不存在的 key 视为空集合</td>
</tr>
<tr>
<td>sismember [key] [member]</td>
<td>判断 member 元素是否是集合 key 的成员返回值：member 是集合成员返回 1，其他返回 0</td>
</tr>
<tr>
<td>scard [key]</td>
<td>获取集合里面的元素个数<br/>返回值：数字，key 的元素个数。 其他情况返回 0</td>
</tr>
<tr>
<td>srem [key] [member…]</td>
<td>删除集合 key 中的一个或多个 member 元素，不存在的元素被忽略<br/>返回值：数字，成功删除的元素个数，不包括被忽略的元素。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-6-有序集合Zset"><a href="#2-6-有序集合Zset" class="headerlink" title="2.6 有序集合Zset"></a>2.6 有序集合Zset</h2><h3 id="2-6-1-原理"><a href="#2-6-1-原理" class="headerlink" title="2.6.1 原理"></a>2.6.1 原理</h3><h3 id="2-6-2-命令"><a href="#2-6-2-命令" class="headerlink" title="2.6.2 命令"></a>2.6.2 命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>zadd [key] [[score] member…]</td>
<td>将一个或多个 member 元素及其 score 值加入到有序集合 key 中，如果 member存在集合中，则更新值；score 可以是整数或浮点数<br/>返回值：数字，新添加的元素个数</td>
</tr>
<tr>
<td>zrange [key] [start] [stop] [WITHSCORES]</td>
<td>查询有序集合，指定区间的内的元素。集合成员按 score 值从小到大来排序<br/>WITHSCORES 选项让 score 和 value 一同返回</td>
</tr>
<tr>
<td>zrem [key] [member…]</td>
<td>删除有序集合 key 中的一个或多个成员，不存在的成员被忽略<br/>返回值：被成功删除的成员数量，不包括被忽略的成员。</td>
</tr>
<tr>
<td>zcard [key]</td>
<td>获取有序集 key 的元素成员的个数<br/>返回值：key 存在返回集合元素的个数， key 不存在，返回 0</td>
</tr>
</tbody>
</table>
</div>
<h1 id="三、Redis配置文件"><a href="#三、Redis配置文件" class="headerlink" title="三、Redis配置文件"></a>三、Redis配置文件</h1><h1 id="四、Redis发布和订阅"><a href="#四、Redis发布和订阅" class="headerlink" title="四、Redis发布和订阅"></a>四、Redis发布和订阅</h1><h2 id="4-1-简介"><a href="#4-1-简介" class="headerlink" title="4.1 简介"></a>4.1 简介</h2><ul>
<li>发布和订阅是一种信息通信模式：发送者（pub）发送消息，订阅者（sub）接收信息</li>
<li>Redis客户端可以订阅任意数量的频道</li>
</ul>
<h2 id="4-2-示例"><a href="#4-2-示例" class="headerlink" title="4.2 示例"></a>4.2 示例</h2><ul>
<li>打开两个redis客户端，分别为A、B，A为发送者，B为订阅者</li>
<li>A执行命令<strong>public channel1 hello</strong>，表示向channel1频道发布信息hello<ul>
<li>命令执行后的返回值表示<strong>订阅者的数量</strong></li>
</ul>
</li>
<li>B执行命令<strong>SUBSCRIBE channel1</strong>，表示接收channel1的频道<ul>
<li>返回的是频道的信息列表</li>
</ul>
</li>
</ul>
<h1 id="五、其他数据类型"><a href="#五、其他数据类型" class="headerlink" title="五、其他数据类型"></a>五、其他数据类型</h1><h2 id="5-1-Bitmaps"><a href="#5-1-Bitmaps" class="headerlink" title="5.1 Bitmaps"></a>5.1 Bitmaps</h2><h3 id="5-1-1-原理"><a href="#5-1-1-原理" class="headerlink" title="5.1.1 原理"></a>5.1.1 原理</h3><ul>
<li><p>存储二进制的字符串，比如user=00001</p>
<ul>
<li>其中value为00001在Redis中依旧是以字符串的形式存储的</li>
<li>偏移量offset从0开始算起，这里value中1的偏移量就是4</li>
<li>想要得到以上的KV对，需要执行命令setbit user 4 1</li>
</ul>
</li>
<li><p>Bitmaps可以用来保存用户活跃度，Set集合也可以做，但两者有区别</p>
<ul>
<li>当用户活跃量特别大时，使用Bitmaps可以极大的减少存储空间</li>
<li>当用户活跃量比较小时，使用Set集合则比较合适</li>
</ul>
</li>
</ul>
<h3 id="5-1-2-命令"><a href="#5-1-2-命令" class="headerlink" title="5.1.2 命令"></a>5.1.2 命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>setbit [key] [offset] [value]</td>
<td>将key的offset位置的值设置为value</td>
</tr>
<tr>
<td>getbit [key] [offset]</td>
<td>获取key中offset位置的值</td>
</tr>
<tr>
<td>bitcount [key] [start,end]</td>
<td>不指定[start,end]时，统计key中value所有被设置为1的bit个数<br/>指定[start,end]时，这里的start和end表示的是字节下标，[1,2]表示统计<strong>第一个字节（8位）</strong>到第二个字节中1的个数，[0,-2]则表示统计从0到倒数第二个字节中1个数</td>
</tr>
</tbody>
</table>
</div>
<h2 id="5-2-HyperLogLog"><a href="#5-2-HyperLogLog" class="headerlink" title="5.2 HyperLogLog"></a>5.2 HyperLogLog</h2><h3 id="5-2-1-原理"><a href="#5-2-1-原理" class="headerlink" title="5.2.1 原理"></a>5.2.1 原理</h3><ul>
<li>计算<strong>基数（集合中不重复元素个数）</strong>的一种算法</li>
<li>对比Set，所占内存更小，统计的范围更大，重复的元素不会被添加进去</li>
</ul>
<h3 id="5-2-2-命令"><a href="#5-2-2-命令" class="headerlink" title="5.2.2 命令"></a>5.2.2 命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>pfadd [key] [element…]</td>
<td>添加指定元素到HyperLogLog中<br/>返回值：添加<strong>重复元素</strong>返回0，添加<strong>不重复元素</strong>返回1</td>
</tr>
<tr>
<td>pfcount [key…]</td>
<td>统计某个key的基数个数</td>
</tr>
<tr>
<td>pfmerge [destkey] [sourcekey…]</td>
<td>合并多个sourcekey后，将结果存放到destkey中</td>
</tr>
</tbody>
</table>
</div>
<h2 id="5-3-Geospatial"><a href="#5-3-Geospatial" class="headerlink" title="5.3 Geospatial"></a>5.3 Geospatial</h2><h3 id="5-3-1-原理"><a href="#5-3-1-原理" class="headerlink" title="5.3.1 原理"></a>5.3.1 原理</h3><ul>
<li>存放地理信息的数据结构，即表示经纬度的二维坐标</li>
</ul>
<h3 id="5-3-2-命令"><a href="#5-3-2-命令" class="headerlink" title="5.3.2 命令"></a>5.3.2 命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>geoadd [key] [[longitude] [latitude] [menber]…]</td>
<td>添加地理位置信息，（经度，纬度，名称）<br/>示例：geoadd china 100 100 shanghai 120 120 beijin</td>
</tr>
<tr>
<td>geopos [key] [member…]</td>
<td>获取key中名称位member的经纬度坐标</td>
</tr>
<tr>
<td>geodist [key] [member1] [member2] [m\</td>
<td>km\</td>
<td>ft\</td>
<td>mi]</td>
<td>获取key中member1和member2的直线距离，后面可以设置单位，m为默认单位</td>
</tr>
<tr>
<td>georadius [key] [longitude] [latitude] radius m\</td>
<td>km\</td>
<td>ft\</td>
<td>mi</td>
<td>以给定的经纬度坐标为中心，找出key中包含在半径为radius的圆中的member名称列表</td>
</tr>
</tbody>
</table>
</div>
<h1 id="六、Jedis"><a href="#六、Jedis" class="headerlink" title="六、Jedis"></a>六、Jedis</h1><h1 id="七、Springboot整合Redis"><a href="#七、Springboot整合Redis" class="headerlink" title="七、Springboot整合Redis"></a>七、Springboot整合Redis</h1><h2 id="7-1-配置环境"><a href="#7-1-配置环境" class="headerlink" title="7.1 配置环境"></a>7.1 配置环境</h2><h3 id="7-1-1-引入依赖"><a href="#7-1-1-引入依赖" class="headerlink" title="7.1.1 引入依赖"></a>7.1.1 引入依赖</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-data-redis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 提供池化操作 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-1-2-配置文件"><a href="#7-1-2-配置文件" class="headerlink" title="7.1.2 配置文件"></a>7.1.2 配置文件</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Redis服务器地址</span></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.47.33</span></span><br><span class="line"><span class="comment">#Redis服务器连接端口</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment">#Redis数据库索引（默认位0）</span></span><br><span class="line"><span class="meta">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">#连接超时时间（毫秒）</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"><span class="comment">#连接池最大连接数（使用负值表示没有限制）</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="comment">#最大阻塞等待时间（复数表示没有限制）</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#连接池中的最大空闲连接</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="comment">#连接池中的最小空闲连接</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br></pre></td></tr></table></figure>
<h3 id="7-1-3-Redis配置类"><a href="#7-1-3-Redis配置类" class="headerlink" title="7.1.3 Redis配置类"></a>7.1.3 Redis配置类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span> <span class="comment">// 开启缓存支持</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisConfig</span> <span class="keyword">extends</span> <span class="title">CachingConfigurerSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> LettuceConnectionFactory lettuceConnectionFactory;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@description</span> 自定义的缓存key的生成策略 若想使用这个key</span></span><br><span class="line"><span class="comment">	 *              只需要讲注解上keyGenerator的值设置为keyGenerator即可&lt;/br&gt;</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> 自定义策略生成的key</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> KeyGenerator <span class="title">keyGenerator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> KeyGenerator() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> Object <span class="title">generate</span><span class="params">(Object target, Method method, Object... params)</span> </span>&#123;</span><br><span class="line">				StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">				sb.append(target.getClass().getName());</span><br><span class="line">				sb.append(method.getDeclaringClass().getName());</span><br><span class="line">				Arrays.stream(params).map(Object::toString).forEach(sb::append);</span><br><span class="line">				<span class="keyword">return</span> sb.toString();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * RedisTemplate配置</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title">redisTemplate</span><span class="params">(LettuceConnectionFactory lettuceConnectionFactory)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 设置序列化</span></span><br><span class="line">		Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> Jackson2JsonRedisSerializer&lt;Object&gt;(Object.class);</span><br><span class="line">		ObjectMapper om = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">		om.setVisibility(PropertyAccessor.ALL, Visibility.ANY);</span><br><span class="line">		om.enableDefaultTyping(DefaultTyping.NON_FINAL);</span><br><span class="line">		jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">		<span class="comment">// 配置redisTemplate</span></span><br><span class="line">		RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="keyword">new</span> RedisTemplate&lt;String, Object&gt;();</span><br><span class="line">		redisTemplate.setConnectionFactory(lettuceConnectionFactory);</span><br><span class="line">		RedisSerializer&lt;?&gt; stringSerializer = <span class="keyword">new</span> StringRedisSerializer();</span><br><span class="line">		redisTemplate.setKeySerializer(stringSerializer);<span class="comment">// key序列化</span></span><br><span class="line">		redisTemplate.setValueSerializer(jackson2JsonRedisSerializer);<span class="comment">// value序列化</span></span><br><span class="line">		redisTemplate.setHashKeySerializer(stringSerializer);<span class="comment">// Hash key序列化</span></span><br><span class="line">		redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer);<span class="comment">// Hash value序列化</span></span><br><span class="line">		redisTemplate.afterPropertiesSet();</span><br><span class="line">		<span class="keyword">return</span> redisTemplate;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 缓存配置管理器</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> CacheManager <span class="title">cacheManager</span><span class="params">(LettuceConnectionFactory factory)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 配置序列化</span></span><br><span class="line">        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofHours(<span class="number">1</span>));</span><br><span class="line">        RedisCacheConfiguration redisCacheConfiguration = config.serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(<span class="keyword">new</span> StringRedisSerializer()))</span><br><span class="line">                												.serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(<span class="keyword">new</span> GenericJackson2JsonRedisSerializer()));</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// 以锁写入的方式创建RedisCacheWriter对象</span></span><br><span class="line">		<span class="comment">//RedisCacheWriter writer = RedisCacheWriter.lockingRedisCacheWriter(factory);</span></span><br><span class="line">		<span class="comment">// 创建默认缓存配置对象</span></span><br><span class="line">		<span class="comment">/* 默认配置，设置缓存有效期 1小时*/</span></span><br><span class="line">		<span class="comment">//RedisCacheConfiguration defaultCacheConfig = RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofHours(1));</span></span><br><span class="line">		<span class="comment">/* 配置test的超时时间为120s*/</span></span><br><span class="line">		RedisCacheManager cacheManager = RedisCacheManager.builder(RedisCacheWriter.lockingRedisCacheWriter(factory)).cacheDefaults(redisCacheConfiguration)</span><br><span class="line">				.withInitialCacheConfigurations(singletonMap(<span class="string">&quot;test&quot;</span>, RedisCacheConfiguration.defaultCacheConfig().entryTtl(Duration.ofMinutes(<span class="number">120</span>)).disableCachingNullValues()))</span><br><span class="line">				.transactionAware().build();</span><br><span class="line">		<span class="keyword">return</span> cacheManager;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-2-RedisTemplate"><a href="#7-2-RedisTemplate" class="headerlink" title="7.2 RedisTemplate"></a>7.2 RedisTemplate</h2><h1 id="八、事务"><a href="#八、事务" class="headerlink" title="八、事务"></a>八、事务</h1><h2 id="8-1-概念"><a href="#8-1-概念" class="headerlink" title="8.1 概念"></a>8.1 概念</h2><ul>
<li>Redis事务作用是串联多个命令并顺序执行</li>
<li>一个redis客户端可以通过multi命令进入事务状态，并且事务在执行时不会被其他redis客户端打断</li>
</ul>
<h2 id="8-2-命令"><a href="#8-2-命令" class="headerlink" title="8.2 命令"></a>8.2 命令</h2><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>multi</td>
<td>开启事务命令，之后的命令就进入队列，而不会马上被执行</td>
<td>在事务生存期间，所有的 Redis 关于数据结构的命令都会入队</td>
</tr>
<tr>
<td>watch [key…]</td>
<td>监听某些键，当被监听的键在事务执行前被修改，则事务会被回滚</td>
<td>使用乐观锁</td>
</tr>
<tr>
<td>unwatch [key…]</td>
<td>取消监听某些键</td>
<td>–</td>
</tr>
<tr>
<td>exec</td>
<td>执行事务，如果被监听的键没有被修改，则采用执行命令，否则就回滚命令</td>
<td>在执行事务队列存储的命令前， Redis 会检测被监听的键值对有没有发生变化，如果没有则执行命令 ，否则就回滚事务</td>
</tr>
<tr>
<td>discard</td>
<td>回滚事务</td>
<td>回滚进入队列的事务命令，之后就不能再用 exec命令提交了</td>
</tr>
</tbody>
</table>
</div>
<h2 id="8-3-悲观锁-乐观锁"><a href="#8-3-悲观锁-乐观锁" class="headerlink" title="8.3 悲观锁/乐观锁"></a>8.3 悲观锁/乐观锁</h2><h3 id="8-3-1-区别"><a href="#8-3-1-区别" class="headerlink" title="8.3.1 区别"></a>8.3.1 区别</h3><ul>
<li>乐观锁和悲观锁的出现都是解决共享数据的操作问题</li>
<li>悲观锁：每次操作共享数据时，都会给数据上锁，防止其他事务对其进行操作<ul>
<li>“悲观”意思是在每次操作数据前都悲观的认为别人也会操作这个数据，所以必须加上锁，保证数据为自己所用。但这样做的缺点是效率不高</li>
</ul>
</li>
<li>乐观锁：不会像悲观锁一样每次操作前都加锁，而是让每个事务都能对共享数据进行操作，<strong>哪个事务操作的快，则更新当前版本</strong>，这样过去版本的事务操作就会因为版本不匹配而无法执行</li>
</ul>
<h3 id="8-3-2-示例"><a href="#8-3-2-示例" class="headerlink" title="8.3.2 示例"></a>8.3.2 示例</h3><ul>
<li>watch </li>
<li>unwatch</li>
</ul>
<h3 id="8-3-3-事务特性"><a href="#8-3-3-事务特性" class="headerlink" title="8.3.3 事务特性"></a>8.3.3 事务特性</h3><ul>
<li>隔离性：客户端事务在执行时不能被其他客户端命令打断，没有隔离级别概念</li>
<li>原子性：不保证原子性，因为一条命令执行失败，其他命令仍然会执行，不会执行回滚</li>
</ul>
<h1 id="九、秒杀案例"><a href="#九、秒杀案例" class="headerlink" title="九、秒杀案例"></a>九、秒杀案例</h1><h2 id="9-1-并发模拟"><a href="#9-1-并发模拟" class="headerlink" title="9.1 并发模拟"></a>9.1 并发模拟</h2><h3 id="9-1-1-http-tools"><a href="#9-1-1-http-tools" class="headerlink" title="9.1.1 http-tools"></a>9.1.1 http-tools</h3><ul>
<li>安装httpd-tools：yum install httpd-tools</li>
<li>httpd-tools中包含有ab命令</li>
</ul>
<h3 id="9-1-2-ab命令"><a href="#9-1-2-ab命令" class="headerlink" title="9.1.2 ab命令"></a>9.1.2 ab命令</h3><ul>
<li><p>ab -n 1000 -c 100 -p ~/postfile -T ‘application/x-www-form-urlencoded’ 请求地址</p>
<ul>
<li>-n：表示请求次数</li>
<li>-c：表示并发数</li>
<li>-T content-type：POST/PUT 数据所使用的Content-type头信息</li>
<li>-p postfile：包含要 POST 的数据的文件，记得还要设置 -T 参数</li>
</ul>
</li>
<li><p>命令返回结果</p>
<ul>
<li>Concurrency Level: 并发量</li>
<li>Time taken for tests: 整个测试的时间</li>
<li>Complete requests: 完成的总请求数</li>
<li>Failed requests: 失败的请求数</li>
<li>Total transferred: 响应数据的总长度（包括http头信息和消息体数据）</li>
<li>HTML transferred: 响应数据中消息体数据的总和</li>
<li>Requests per second:吞吐率（计算方式为：Complete requests / Time taken for tests，也就是 完成的总请求数 / 整个测试的时间）</li>
<li>Time per request: 用户平均请求等待时间</li>
<li>Time per request: 服务器平均请求等待时间</li>
<li>Transfer rate: 单位时间内从服务器获取的数据长度（计算方式为：Total transferred / Time taken for tests， 也就是 响应数据的总长度（包括http头信息和消息体数据）/ 整个测试的时间）</li>
</ul>
</li>
</ul>
<h2 id="9-1-案例源码"><a href="#9-1-案例源码" class="headerlink" title="9.1 案例源码"></a>9.1 案例源码</h2><h1 id="十、持久化操作"><a href="#十、持久化操作" class="headerlink" title="十、持久化操作"></a>十、持久化操作</h1><h2 id="10-1-RDB（默认方式）"><a href="#10-1-RDB（默认方式）" class="headerlink" title="10.1 RDB（默认方式）"></a>10.1 RDB（默认方式）</h2><ul>
<li>读时共享，写时复制</li>
</ul>
<h2 id="10-2-AOF"><a href="#10-2-AOF" class="headerlink" title="10.2 AOF"></a>10.2 AOF</h2><h1 id="十一、主从复制"><a href="#十一、主从复制" class="headerlink" title="十一、主从复制"></a>十一、主从复制</h1><h1 id="十二、集群"><a href="#十二、集群" class="headerlink" title="十二、集群"></a>十二、集群</h1><h1 id="十三、换成"><a href="#十三、换成" class="headerlink" title="十三、换成"></a>十三、换成</h1><h1 id="十四、分布式锁"><a href="#十四、分布式锁" class="headerlink" title="十四、分布式锁"></a>十四、分布式锁</h1>]]></content>
      <categories>
        <category>后端</category>
        <category>数据库</category>
      </categories>
      <tags>
        <tag>Redis</tag>
        <tag>微服务</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx基础大全</title>
    <url>/2022/03/26/nginx%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、Nginx简介"><a href="#一、Nginx简介" class="headerlink" title="一、Nginx简介"></a>一、Nginx简介</h1>]]></content>
      <categories>
        <category>后端</category>
        <category>服务器</category>
      </categories>
      <tags>
        <tag>服务器</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记4-Jena使用教程</title>
    <url>/2022/03/26/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04-Jena%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="一、SPARQL读取RDF数据"><a href="#一、SPARQL读取RDF数据" class="headerlink" title="一、SPARQL读取RDF数据"></a>一、SPARQL读取RDF数据</h1><h2 id="1-1-导入包"><a href="#1-1-导入包" class="headerlink" title="1.1 导入包"></a>1.1 导入包</h2><ul>
<li>先创建一个maven项目</li>
<li>引入以下包</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--解析SPARQL语句的引擎--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.jena<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jena-arq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.17.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志包，防止报些奇怪的错误，程序能运行，但还是处理下 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-simple<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="1-2-创建数据"><a href="#1-2-创建数据" class="headerlink" title="1.2 创建数据"></a>1.2 创建数据</h2><ul>
<li>使用ttl存储三元组数据</li>
<li>在本地任意位置创建文件data.ttl，保存以下内容</li>
<li>也可以创建在项目里，以文本文件格式创建</li>
</ul>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"># filename: ex002.ttl</span><br><span class="line"></span><br><span class="line">@prefix <span class="keyword">a</span><span class="variable">b:</span> &lt;http://learningsparql.<span class="keyword">com</span>/ns/addressbook#&gt; .</span><br><span class="line"></span><br><span class="line"><span class="keyword">a</span><span class="variable">b:richard</span> <span class="keyword">a</span><span class="variable">b:homeTel</span> <span class="string">&quot;(229) 276-5135&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:richard</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;richard49@hotmail.com&quot;</span> . </span><br><span class="line"></span><br><span class="line"><span class="keyword">a</span><span class="variable">b:cindy</span> <span class="keyword">a</span><span class="variable">b:homeTel</span> <span class="string">&quot;(245) 646-5488&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:cindy</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;cindym@gmail.com&quot;</span> . </span><br><span class="line"></span><br><span class="line"><span class="keyword">a</span><span class="variable">b:craig</span> <span class="keyword">a</span><span class="variable">b:homeTel</span> <span class="string">&quot;(194) 966-1505&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:craig</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;craigellis@yahoo.com&quot;</span> . </span><br><span class="line"><span class="keyword">a</span><span class="variable">b:craig</span> <span class="keyword">a</span><span class="variable">b:email</span>   <span class="string">&quot;c.ellis@usairwaysgroup.com&quot;</span> .</span><br></pre></td></tr></table></figure>
<h2 id="1-3-查询测试"><a href="#1-3-查询测试" class="headerlink" title="1.3 查询测试"></a>1.3 查询测试</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Model model = ModelFactory.createDefaultModel();</span><br><span class="line">    <span class="comment">//ttl文件路径</span></span><br><span class="line">    model.read(<span class="string">&quot;E:/ttl/data.ttl&quot;</span>);</span><br><span class="line">    <span class="comment">//查询语句, 查询craig的电子邮件地址</span></span><br><span class="line">    String queryString = <span class="string">&quot;PREFIX ab: &lt;http://learningsparql.com/ns/addressbook#&gt; \n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;SELECT ?craig_email\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;WHERE\n&quot;</span> +</span><br><span class="line">        <span class="string">&quot;&#123; ab:craig ab:email ?craig_email . &#125;&quot;</span>;</span><br><span class="line">    Query query = QueryFactory.create(queryString);</span><br><span class="line">    QueryExecution qe = QueryExecutionFactory.create(query, model);</span><br><span class="line">    ResultSet results = qe.execSelect();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 查询到的results是一个迭代器对象，需要while遍历输出查询到的值</span></span><br><span class="line">    <span class="keyword">while</span> (results.hasNext())&#123;</span><br><span class="line">            QuerySolution next = results.next();</span><br><span class="line">            System.out.println(next.get(<span class="string">&quot;?craig_email&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 输出结果</span></span><br><span class="line">    ResultSetFormatter.out(System.out, results, query);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-4-结果"><a href="#1-4-结果" class="headerlink" title="1.4 结果"></a>1.4 结果</h2><img src="/2022/03/26/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B04-Jena%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/jena.png" class="" title="res">
<h1 id="二、Jena读取OWL"><a href="#二、Jena读取OWL" class="headerlink" title="二、Jena读取OWL"></a>二、Jena读取OWL</h1><h2 id="2-1-读取owl文件"><a href="#2-1-读取owl文件" class="headerlink" title="2.1 读取owl文件"></a>2.1 读取owl文件</h2><ul>
<li>从本地读取</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">OntModel ontModel = ModelFactory.createOntologyModel();</span><br><span class="line">File myFile = <span class="keyword">new</span> File(<span class="string">&quot;E:/rdfData/owldemo1.owl&quot;</span>);</span><br><span class="line">ontModel.read(<span class="keyword">new</span> FileInputStream(myFile), <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="2-2-获取类信息"><a href="#2-2-获取类信息" class="headerlink" title="2.2 获取类信息"></a>2.2 获取类信息</h2><ul>
<li>遍历owl中定义的类，并打印类名</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (Iterator&lt;?&gt; i = ontModel.listClasses(); i.hasNext();) &#123;</span><br><span class="line">    OntClass c = (OntClass) i.next(); <span class="comment">// 返回类型强制转换</span></span><br><span class="line">    StmtIterator iterator = c.listProperties();	<span class="comment">// 获取该类的所有属性</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        Statement statement = iterator.next();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 获取关系信息</span></span><br><span class="line">        String predict = statement.getPredicate().toString().substring(statement.getPredicate().toString().indexOf(<span class="string">&quot;#&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">        System.out.println(predict);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    System.out.println(c.getLocalName());	<span class="comment">//打印类名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-3-获取类的实例"><a href="#2-3-获取类的实例" class="headerlink" title="2.3 获取类的实例"></a>2.3 获取类的实例</h2><ul>
<li>以下c表示所遍历的类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取该类下的所有实例迭代器</span></span><br><span class="line">ExtendedIterator&lt;? extends OntResource&gt; extendedIterator = c.listInstances();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 迭代器遍历</span></span><br><span class="line"><span class="keyword">while</span> (extendedIterator.hasNext())&#123;</span><br><span class="line">    OntResource resource = extendedIterator.next();	<span class="comment">// 获取类的实例</span></span><br><span class="line">    StmtIterator stmtIterator = resource.listProperties();	<span class="comment">// 获取实例中的所有属性列表，包括对象属性和数据属性</span></span><br><span class="line">    <span class="keyword">while</span>(stmtIterator.hasNext())&#123;</span><br><span class="line">        Statement statement = stmtIterator.next();</span><br><span class="line">        String object = statement.getObject().toString();</span><br><span class="line">        System.out.println(object);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、创建工具包"><a href="#三、创建工具包" class="headerlink" title="三、创建工具包"></a>三、创建工具包</h1>]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>Jena</tag>
        <tag>SPARQL</tag>
        <tag>ARQ</tag>
      </tags>
  </entry>
  <entry>
    <title>设计模式基础大全</title>
    <url>/2022/03/27/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、设计模式基础"><a href="#一、设计模式基础" class="headerlink" title="一、设计模式基础"></a>一、设计模式基础</h1><h2 id="1-1-GoF的23种设计模式及其功能"><a href="#1-1-GoF的23种设计模式及其功能" class="headerlink" title="1.1 GoF的23种设计模式及其功能"></a>1.1 GoF的23种设计模式及其功能</h2><ol>
<li>单例（ Singleton ）模式 某个类只能生成一个实例，该类提供了一个全局访问点供外部获取该实例，其拓展是有限多例模式。</li>
<li>原型（Prototype）模式：将一个对象作为原型，通过对其进行复制而克隆出多个和原型类似的新实例</li>
<li>工厂方法（Factory Method）模式：定义一个用于创建产品的接口，由子类决定生存什么产品</li>
<li>抽象工厂（Abstract Factory）模式：提供一个创建产品族的接口，其每个子类可以生产一系列相关的产品</li>
<li>建造者（Builder）模式：将一个复杂对象分解成多个相对简单的部分，然后根据不同需要分别创建它们</li>
<li>代理（Proxy）模式：为某对象提供一种代理以控制对该对象的访问。即客户端通过代理间接地访问该对象，从而限制、增强或修改该对象的一些特性</li>
<li>适配器（Adapter）模式：将一个类的接口转换成客户希望的另外一个接口，使得原本由于接口不兼容而不能在一起工作的那些类能一起工作</li>
<li>桥街（Bridge）模式：将抽象与实现分离，使它们可以独立变化，它是用组合关系代替继承关系来实现，从而降低了抽象和实现这两个可变维度的耦合度。</li>
<li>装饰（Decorator）模式：：动态的给对象增加一些职责，即增加其额外的功能</li>
<li>外观（ Facade ）模式：为多个复杂的子系统提供一个一致的接口，使这些子系统更加容易被访问</li>
<li>享元（Flyweight）模式：运用共享技术来有效地支持大量细粒度对象的复用</li>
<li>组合（ Composite ）模式：将对象组合成树状层次结构，使用户对单个对象和组合对象具有一致的访问性</li>
<li>模板方法（ Templat Method ）模式：定义一个操作中的算法骨架 ，而将算法的一些步骤延迟到子类中，使得子类可以不改变该算法结构的情况下重定义该算法的某些特定步骤</li>
<li>策略（ Strategy ）模式：定义了一系列算法，并将每个算法封装起来，使它们可以相互替换，且算法的改变不会影响使用算法的客户</li>
<li>命令（ Command ）模式：将一个请求封装为一个对象 ，使发出请求的责任和执行请求的责任分割开</li>
<li>职责链 （Chain of Responsibility ）模式：把请求从链中的一个对象传到下一个对象 ，直到请求被响应为止。通过这种方式去除对象之间的耦合</li>
<li>状态（ State ）模式：允许一个对象在其内部状态发生改变时改变其行为能力</li>
<li>观察者（ Observer 模式：多个对象间存在－对多关系，当一个对象发生改变时，把这种改变通知给其他多个对象，从而影响其他对象的行为</li>
<li>中介者（ Mediator ）模式：定义一个中介对象来简化原有对象之间的交互关系，降低系统中对象间的耦合度，使原有对象之间不必相互了解</li>
<li>迭代器 Iterator ）模式 提供一种方法来顺序访问聚合对象中的一系列数据 ，而不暴露聚合对象的内部表示</li>
<li>访问者（Visitor）模式：在不改变集合元素的前提下，为一个集合种的每个元素提供多种访问方式，即每个元素有多个访问者对象访问</li>
<li>备忘录（Memento）模式：在不破坏封装性的前提下，获取并保存一个对象的内部状态以便以后恢复它</li>
<li>解释器（Interpreter）模式：提供如何定义语言的文法，以及对语言句子的解释方法，即解释器</li>
</ol>
<h1 id="二、面向对象的设计原则"><a href="#二、面向对象的设计原则" class="headerlink" title="二、面向对象的设计原则"></a>二、面向对象的设计原则</h1><h2 id="2-1-开闭原则OCP"><a href="#2-1-开闭原则OCP" class="headerlink" title="2.1 开闭原则OCP"></a>2.1 开闭原则OCP</h2><ul>
<li>对扩展开放、对修改关闭</li>
<li>通过“抽象约束、封装变化”来实现开闭原则</li>
<li>抽象层设计的合理，可以基本保持软件架构的稳定</li>
<li>当软件需求发生变化时，只需要根据需求派生一个实现类来扩展就可以了</li>
</ul>
<h2 id="2-2-里氏替换原则LSP"><a href="#2-2-里氏替换原则LSP" class="headerlink" title="2.2 里氏替换原则LSP"></a>2.2 里氏替换原则LSP</h2><ul>
<li>子类可以扩展父类的功能，但不能改变父类原有的功能</li>
<li>简单来说：子类继承父类时，除添加新的方法完成新增功能外，尽量不要重写父类的方法</li>
<li>作用：实现开闭原则的重要方式之一、提高父类可复用性、降低类的扩展出错的可能性</li>
<li>如果出现因重写父类方法而导致出错的情况，应该设计个更一般的类，重新组织类的继承关系</li>
</ul>
<h2 id="2-3-依赖倒置原则DIP"><a href="#2-3-依赖倒置原则DIP" class="headerlink" title="2.3 依赖倒置原则DIP"></a>2.3 依赖倒置原则DIP</h2><ul>
<li>要面向接口编程，不要面向实现编程</li>
<li>抽象层相对稳定，实现类较为多变</li>
<li>接口/抽象类的目的是制定好规范和契约，不去涉及任何具体的操作</li>
<li>具体细节的任务交给实现类完成</li>
<li>作用：降低了类间的耦合性、提高系统的稳定性、提高代码可读性和可维护性</li>
</ul>
<h3 id="2-3-1-实现方法"><a href="#2-3-1-实现方法" class="headerlink" title="2.3.1 实现方法"></a>2.3.1 实现方法</h3><ol>
<li>每个类尽量提供接口或抽象类，或者两者都具备</li>
<li>变量的声明类型尽量是接口或者是抽象类</li>
<li>任何类都不应该从具体类派生</li>
<li>使用继承时尽量遵循里氏替换原则</li>
</ol>
<h2 id="2-4-单一职责原则SRP"><a href="#2-4-单一职责原则SRP" class="headerlink" title="2.4 单一职责原则SRP"></a>2.4 单一职责原则SRP</h2><ul>
<li>一个类应该有且仅有一个引起它变化的原因，否则应该被拆分</li>
<li>承担太多职责的缺点：削弱类实现其他职责的能力、冗余代码</li>
<li>作用：降低类的复杂度、提高类的可读性、提高系统可维护性、变更引起的风险降低</li>
<li>实现方法：分析、设计、重构</li>
<li>同样适用于方法，方法应尽可能做好一件事情</li>
</ul>
<h2 id="2-5-接口隔离原则ISP"><a href="#2-5-接口隔离原则ISP" class="headerlink" title="2.5 接口隔离原则ISP"></a>2.5 接口隔离原则ISP</h2><ul>
<li>程序员尽量将臃肿庞大的接口拆分成更小的和更具体的接口，让接口中只包含客户感兴趣的方法</li>
<li>要为类建立它们需要的专用接口，而不要视图去建立一个很庞大的接口供所有依赖它的类去调用</li>
<li>作用：提高系统灵活性和可维护性、降低系统耦合性、提高系统内聚性、接口粒度大小要定义合理（太大太小都不好）、减少代码冗余、能够体现对象的层次<br>实现方法：一个接口只服务于一个子模块或业务逻辑、为依赖接口的类定制服务、深入了解环境/业务逻辑、使接口用最少的方法实现最多的事情</li>
</ul>
<h2 id="2-6-迪米特法则LKP"><a href="#2-6-迪米特法则LKP" class="headerlink" title="2.6 迪米特法则LKP"></a>2.6 迪米特法则LKP</h2><ul>
<li>如果两个软件实体无须直接通信，那么就不应当发生直接的相互调用，可以通过第三方转发该调用</li>
<li>作用：降低类间耦合度、提高模块相对独立性、提高类的可复用性和系统的扩展性</li>
<li>过渡使用LKP会使系统产生大量的中介类，从而增加系统的复杂性，所以使用时要权衡好</li>
<li>实现方法：依赖者应该依赖应该依赖的对象、被依赖者只暴露应该暴露的方法</li>
<li>注意：应创建弱耦合的类、降低类成员的访问权限、优先考虑设计不变类、降低引用次数、不暴露属性成员（提供get和set）、进行使用序列化</li>
</ul>
<h2 id="2-7-合成复用原则CRP"><a href="#2-7-合成复用原则CRP" class="headerlink" title="2.7 合成复用原则CRP"></a>2.7 合成复用原则CRP</h2><ul>
<li>又称组合/聚合复用原则（CARP）</li>
<li>它要求在软件复用时，要尽量先使用组合或者聚合等关联关系来实现，其次才考虑使用继承关系来实现</li>
<li>如果要使用继承关系，则必须严格遵循里氏代换原则</li>
<li>合成复用原则和里氏代换原则都是开闭原则的具体实现规范</li>
<li>类的复用包括：继承复用、合成复用</li>
</ul>
<h3 id="2-7-1-继承复用"><a href="#2-7-1-继承复用" class="headerlink" title="2.7.1 继承复用"></a>2.7.1 继承复用</h3><ul>
<li>破坏了类的封装性，父类暴露给子类</li>
<li>子类与父类耦合度高</li>
<li>限制了复用的灵活性，父类继承而来的实现是静态的，在编译时已经定义、所以在运行时不可能发生变化</li>
</ul>
<h3 id="2-7-2-合成复用"><a href="#2-7-2-合成复用" class="headerlink" title="2.7.2 合成复用"></a>2.7.2 合成复用</h3><ul>
<li>维持了类的封装性</li>
<li>新旧类之间的耦合度低</li>
<li>复用的灵活性高，可以在运行时动态进行，新对象可以动态地引用与成分对象类型相同的对象</li>
</ul>
<h1 id="三、创建型模式"><a href="#三、创建型模式" class="headerlink" title="三、创建型模式"></a>三、创建型模式</h1><h2 id="3-1-特点"><a href="#3-1-特点" class="headerlink" title="3.1 特点"></a>3.1 特点</h2><ul>
<li>创建型模式的主要关注点是“怎样创建对象”</li>
<li>将对象的创建与使用分离，这样可以降低系统耦合度，使用者不需要关注对象的创建细节</li>
<li>对象的创建由工厂来完成</li>
</ul>
<h2 id="3-2-模式"><a href="#3-2-模式" class="headerlink" title="3.2 模式"></a>3.2 模式</h2><ul>
<li>单例模式Singleton</li>
<li>原型模式Prototype</li>
<li>工厂模式Factory Method</li>
<li>抽象工厂模式Abstract Factory</li>
<li>建造者模式Builder</li>
</ul>
<h1 id="四、单例模式"><a href="#四、单例模式" class="headerlink" title="四、单例模式"></a>四、单例模式</h1><h2 id="4-1-定义"><a href="#4-1-定义" class="headerlink" title="4.1 定义"></a>4.1 定义</h2><ul>
<li>一个类只有一个实例，且该类能自行创建这个实例的一种模式</li>
<li>比如windows的任务管理器、回收站、应用程序的日志对象、网站的计数器等等，一般都设计为单例</li>
</ul>
<h2 id="4-2-特点"><a href="#4-2-特点" class="headerlink" title="4.2 特点"></a>4.2 特点</h2><ul>
<li>单例类只有一个实例对象</li>
<li>该单例对象必须由单例类自行创建</li>
<li>单例类对外提供一个访问该单例的全局访问点</li>
</ul>
<h2 id="4-3-结构"><a href="#4-3-结构" class="headerlink" title="4.3 结构"></a>4.3 结构</h2><ul>
<li>单例类：包含一个实例且能自行创建这个实例的类</li>
<li>访问类：使用单例的类</li>
</ul>
<h2 id="4-4-实现"><a href="#4-4-实现" class="headerlink" title="4.4 实现"></a>4.4 实现</h2><h3 id="4-4-1-懒汉式"><a href="#4-4-1-懒汉式" class="headerlink" title="4.4.1 懒汉式"></a>4.4.1 懒汉式</h3><ul>
<li>特点：类加载时没有生成实例，只有第一次调用getInstance方法时才去创建这个单例</li>
<li>编写多线程程序时，关键字volatile和synchronized不能删除，否则存在线程不安全的问题，但缺点是影响性能，会消耗更多的资源</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LazySingleton</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> LazySingleton instance=<span class="keyword">null</span>;  <span class="comment">//保证instance在所有线程中同步</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">LazySingleton</span><span class="params">()</span></span>&#123;&#125;   <span class="comment">// private避免类在外部被实例化</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> LazySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;  <span class="comment">//getInstance方法前加同步</span></span><br><span class="line">        <span class="keyword">if</span>(instance==<span class="keyword">null</span>)</span><br><span class="line">            instance=<span class="keyword">new</span> LazySingleton();</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-2-饿汉式"><a href="#4-4-2-饿汉式" class="headerlink" title="4.4.2 饿汉式"></a>4.4.2 饿汉式</h3><ul>
<li>特点：类一旦加载就创建一个单例，保证在调用getInstance方法之前单例就已经存在了</li>
<li>饿汉式由于其特点，所以是线程安全的，可以直接用于多线程而不会出现问题</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HungrySingleton</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> HungrySingleton instance=<span class="keyword">new</span> HungrySingleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">HungrySingleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HungrySingleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-5-应用场景"><a href="#4-5-应用场景" class="headerlink" title="4.5 应用场景"></a>4.5 应用场景</h2><ul>
<li>某类只要求生成一个对象的时候</li>
<li>当对象需要被共享的场合</li>
<li>当某类需要频繁实例化，而创建的对象又频繁被消耗的时候</li>
</ul>
<h1 id="五、原型模式"><a href="#五、原型模式" class="headerlink" title="五、原型模式"></a>五、原型模式</h1><h2 id="5-1-定义"><a href="#5-1-定义" class="headerlink" title="5.1 定义"></a>5.1 定义</h2><ul>
<li>通过传统的构造函数来创建对象，会比较复杂且耗时耗资源</li>
<li>用一个已经创建的实例作为原型，通过复制该原型对象来创建一个和原型相同或相似的新对象</li>
<li>如：系统的复制</li>
</ul>
<h2 id="5-2-结构"><a href="#5-2-结构" class="headerlink" title="5.2 结构"></a>5.2 结构</h2><ul>
<li>抽象原型类：规定了具体原型对象必须实现的接口</li>
<li>具体原型类：实现抽象原型类的clone()方法，它是可被复制的对象</li>
<li>访问类：使用具体原型类中的clone()方法来复制新的对象</li>
</ul>
<h2 id="5-3-实现"><a href="#5-3-实现" class="headerlink" title="5.3 实现"></a>5.3 实现</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//具体原型类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Realizetype</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</span><br><span class="line">    Realizetype()&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体原型创建成功&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体原型复制成功&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> (Realizetype) <span class="keyword">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//原型模式的测试类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrototypeTest</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException</span>&#123;</span><br><span class="line">        Realizetype obj1=<span class="keyword">new</span> Realizetype();</span><br><span class="line">        Realizetype obj2=(Realizetype) obj1.clone();</span><br><span class="line">        System.out.println(<span class="string">&quot;obj1==obj2?&quot;</span>+(obj1==obj2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    运行结果：</span></span><br><span class="line"><span class="comment">    具体原型复制成功</span></span><br><span class="line"><span class="comment">    具体原型复制成功</span></span><br><span class="line"><span class="comment">    obj1==obj2?false</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="5-4-应用场景"><a href="#5-4-应用场景" class="headerlink" title="5.4 应用场景"></a>5.4 应用场景</h2><ul>
<li>对象之间相同或相似，即只是个别的几个属性不同的时候</li>
<li>对象的创建过程比较麻烦，但复制比较简单的时候</li>
</ul>
<h1 id="六、工厂方法模式"><a href="#六、工厂方法模式" class="headerlink" title="六、工厂方法模式"></a>六、工厂方法模式</h1><h2 id="6-1-定义"><a href="#6-1-定义" class="headerlink" title="6.1 定义"></a>6.1 定义</h2><ul>
<li>定义：定义一个创建产品对象 工厂接口，将产品对象的实际创建工作推迟到具体子工厂类当中</li>
<li>简单工厂模式：如果要创建的产品不多，只要一个工厂类就可以完成，这种模式叫“简单工厂模式”， 它不属于 GoF 23 经典设计模式，它的缺点是增加新产品时会违背“开闭原则”</li>
</ul>
<h2 id="6-2-特点"><a href="#6-2-特点" class="headerlink" title="6.2 特点"></a>6.2 特点</h2><ul>
<li>满足创建型模式中所要求的“创建与使用相分离”的特点。我们把被创建的对象称为“产品”，把创建产品的对象称为“工厂”</li>
<li>用户只需要知道具体工厂的名称就可得到所要的产品，无须知道产品的具体创建过程</li>
<li>在系统增加新的产品时只需要添加具体产品类和对应的具体工厂类，无须对原工厂进行任何修改 ，满足开闭原则。</li>
<li>缺点 每增加一个产品就要增加一个具体产品类和一个对应的具体工厂类 ，这增加了系统的复杂度</li>
</ul>
<h2 id="6-3-结构"><a href="#6-3-结构" class="headerlink" title="6.3 结构"></a>6.3 结构</h2><ul>
<li>抽象工厂（Abstract Factory）：提供了创建产品的接口 ，调用者通过它访问具体工厂的工厂方法 newProduct（）来创建产品。</li>
<li>具体工厂（Concrete Factory）：主要是实现抽象工厂中的抽象方法 完成具体产品的创建。</li>
<li>抽象产品（Product）：定义了产品的规范 描述了产品的主要特性和功能。</li>
<li>具体产品（Concrete Product）：：实现了抽象产品角色所定义的接口，由具体工厂来创建，它同具体工厂之间一一对应。</li>
</ul>
<h2 id="6-4-实现"><a href="#6-4-实现" class="headerlink" title="6.4 实现"></a>6.4 实现</h2><h3 id="6-4-1-xml配置"><a href="#6-4-1-xml配置" class="headerlink" title="6.4.1 xml配置"></a>6.4.1 xml配置</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">className</span>&gt;</span>ConcreteFactory1<span class="tag">&lt;/<span class="name">className</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4-2-对象生成器"><a href="#6-4-2-对象生成器" class="headerlink" title="6.4.2 对象生成器"></a>6.4.2 对象生成器</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> FactoryMethod;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractFactoryTest</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(string args[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Product a;</span><br><span class="line">            AbstractFactory af;</span><br><span class="line">            af=(AbstractFactory) ReadXML1.getObject();</span><br><span class="line">            a=af.newProduct();</span><br><span class="line">            a.show();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象产品，提供了产品的接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Product</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品1：实现抽象产品中的抽象方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct1</span> <span class="keyword">implements</span> <span class="title">Product</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体产品1显示...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品2：实现抽象产品中的抽象方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct2</span> <span class="keyword">implements</span> <span class="title">Product</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体产品2显示...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象工厂1：提供了产品的生成方法</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">AbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">newProduct</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体工厂1：实现了产品的生成方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory</span> <span class="keyword">implements</span> <span class="title">AbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">newProduct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体工厂1生成-&gt;具体产品1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteFactory();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体工厂2：实现了产品的生成方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory2</span> <span class="keyword">implements</span> <span class="title">AbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">newProduct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体工厂2生成-&gt;具体产品2&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteFactory2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-5-应用场景"><a href="#6-5-应用场景" class="headerlink" title="6.5 应用场景"></a>6.5 应用场景</h2><ol>
<li>客户只知道创建产品的工厂名，而不知道具体的产品名。如TCL电视工厂、海信电视工厂等。</li>
<li>创建对象的任务由多个具体子工厂中的某一个完成，而抽象工厂只提供创建产品的接口</li>
<li>客户不关心创建产品的细节，只关心产品的品牌</li>
</ol>
<h1 id="七、抽象工厂模式"><a href="#七、抽象工厂模式" class="headerlink" title="七、抽象工厂模式"></a>七、抽象工厂模式</h1><h2 id="7-1-定义"><a href="#7-1-定义" class="headerlink" title="7.1 定义"></a>7.1 定义</h2><ul>
<li>抽象工厂模式将考虑多等级产品的生产 将同一个具体工厂所生产的位于不同等级的一组产品称为一个产品族</li>
<li>同等级：同种类称为同等级，也就是说 工厂方法模式只考虑生产同等级的产品</li>
<li>抽象工厂（Abstract Factory）模式：是一种为访问类提供一个创建一组相关或相互依赖对<br>象的接口，且访问类无须指定所要产品的具体类就能得到同族的不同等级的产品的模式结构</li>
</ul>
<h2 id="7-2-特点"><a href="#7-2-特点" class="headerlink" title="7.2 特点"></a>7.2 特点</h2><ul>
<li>前面介绍的工厂方法模式中考虑的是一类产品的生产，如畜牧场只养动物、电视机厂只生产电视机、计算机软件学院只培养计算机软件专业的学生等</li>
<li>在现实生活中许多工厂是综合型的工厂能生产多等级（种类）的产品，如农场里既养动物又种植物，电器厂既生产电视机又生产洗衣机或空调，大学既有软件专业又有生物专业等</li>
<li>工厂方法模式只生产一个等级的产品，而抽象工厂模式可生<br>产多个等级的产品。</li>
</ul>
<h2 id="7-3-条件"><a href="#7-3-条件" class="headerlink" title="7.3 条件"></a>7.3 条件</h2><ol>
<li>系统中有多个产品族，每个具体工厂 建同一族但属于不同等级结构的产品。</li>
<li>系统一次只可能消费其中某一族产品，即同族的产品一起使用。</li>
</ol>
<h2 id="7-4-优缺点"><a href="#7-4-优缺点" class="headerlink" title="7.4 优缺点"></a>7.4 优缺点</h2><ul>
<li>优点：<ul>
<li>可以在类的内部对产品族中相关联的多等级产品共同管理，而不必专门引入多个新的类来进<br>行管理。</li>
<li>当增加一个新的产品族时不需要修改原代码， 满足开闭原则。</li>
</ul>
</li>
<li>缺点：<ul>
<li>当产品族 需要增加一个新的产品时，所有的工厂类都需要进行修改。</li>
</ul>
</li>
</ul>
<h2 id="7-5-结构"><a href="#7-5-结构" class="headerlink" title="7.5 结构"></a>7.5 结构</h2><ul>
<li>抽象工厂Abstract Factory：提供了创建产品的接口，它包含多个创建产品的方法<br>new Product（）， 以创建多个不同等级 产品。</li>
<li>具体工厂Concrete Factory：主要是实现抽象工厂中的多个抽象方法，完成具体产品的创建</li>
<li>抽象产品Product：：定义了产品的规范，描述了产品的主要特性和功能，抽象工厂模式有多个抽象产品。</li>
<li>具体产品Concrete Product：）：实现了抽象产品角色所定义的接口，由具体工厂来创建，它同具体工厂之间是多对一的关系。</li>
</ul>
<h2 id="7-6-实现"><a href="#7-6-实现" class="headerlink" title="7.6 实现"></a>7.6 实现</h2><h3 id="7-6-1-抽象工厂"><a href="#7-6-1-抽象工厂" class="headerlink" title="7.6.1 抽象工厂"></a>7.6.1 抽象工厂</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">AbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product1 <span class="title">newProduct1</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product2 <span class="title">newProduct2</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-6-2-具体工厂"><a href="#7-6-2-具体工厂" class="headerlink" title="7.6.2 具体工厂"></a>7.6.2 具体工厂</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory1</span> <span class="keyword">implements</span> <span class="title">AbstractFactory</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product1 <span class="title">newProduct1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体工厂1生成-&gt;具体产品11...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct11();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product2 <span class="title">newProduct2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;具体工厂1生成-&gt;具体产品21...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct21();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-7-应用场景"><a href="#7-7-应用场景" class="headerlink" title="7.7 应用场景"></a>7.7 应用场景</h2><ol>
<li>当需要创建的对象是一系列相互关联或相互依赖的产品族时，如电器 厂中的电视机衣机、空调等。</li>
<li>系统中有多个产品族 但每次只使用其中的某一族产品。如有人只喜欢穿某一个品牌的衣<br>服和鞋</li>
<li>系统中提供了产品的类库，且所有产品的接口相同，客户端不依赖产品实例的创建细节和内部结构</li>
</ol>
<h2 id="7-8-小结"><a href="#7-8-小结" class="headerlink" title="7.8 小结"></a>7.8 小结</h2><ol>
<li>当增加一 新的产品族 只需增 一个<br>新的具体工厂，不需要修改原代码，满足开闭原则</li>
<li>当产品族中需要增加一 新种类的产品时，则所有的工厂类都需要进行修改，不满足开闭原则</li>
<li>当系统中只存在 个等级结构的产品时，抽象工厂模式将退化到工厂方法模式。</li>
</ol>
<h1 id="八、建造者模式"><a href="#八、建造者模式" class="headerlink" title="八、建造者模式"></a>八、建造者模式</h1><h2 id="8-1-定义"><a href="#8-1-定义" class="headerlink" title="8.1 定义"></a>8.1 定义</h2><ul>
<li>指将一个复杂对象的构造与它的表示分离，使同样的构建过程可以创建不同的表示，这样的设计模式被称为建造者模式</li>
</ul>
<h2 id="8-2-特点"><a href="#8-2-特点" class="headerlink" title="8.2 特点"></a>8.2 特点</h2><ul>
<li>它是将一个复杂的对象分解为多个简单的对 ，然后一步一步建而成。它将变与不变相分，即产品的组成部分是不变的，但每一部分是可以灵活选择的</li>
<li>计算机是由CPU、主板、内存、硬盘、显卡、机箱、显示器、键盘、鼠标等部件组装而成的，采购员不可能自己去组装计算机，而是将计算机的配置要求告诉计算书销售公司，计算机销售公司安排技术人员去组装计算机， 然后再交给要买计算机的采购员</li>
</ul>
<h2 id="8-3-优缺点"><a href="#8-3-优缺点" class="headerlink" title="8.3 优缺点"></a>8.3 优缺点</h2><ul>
<li>优点：<ul>
<li>具体的建造者相互独立，有利于系统的扩展。</li>
<li>客户端不必知道产品内部组成的细节，便于控制细节风险。</li>
</ul>
</li>
<li>缺点：<ul>
<li>产品的组成部分必须相同，这限制了其使用范围。</li>
<li>如果产品的内部变化复杂，该模式会增加很多的建造者类。</li>
</ul>
</li>
</ul>
<h2 id="8-4-工厂模式的区别"><a href="#8-4-工厂模式的区别" class="headerlink" title="8.4 工厂模式的区别"></a>8.4 工厂模式的区别</h2><ul>
<li>建造者模式和工厂模式的关注点不同，建造者模式注重零部件的组装过程，而工厂方法模式更注重零部件的创建过程，但两者可以结合使用。</li>
</ul>
<h2 id="8-5-结构"><a href="#8-5-结构" class="headerlink" title="8.5 结构"></a>8.5 结构</h2><ul>
<li>产品角色Product：它是包含多个组成部件的复杂对象，由具体建造者来创建其各个组成部件。</li>
<li>抽象建造者Builder：：它是 包含创建产品各个子部件的抽象方法的接口，通常还包个返回复杂产品的方法 getResult（）</li>
<li>具体建造者Concrete Builder：实现Builder接口，完成复杂产品的各个部件的具体创建方法</li>
<li>指挥者Director：它调用建造者对象中的部件构造与装配方法完成复杂对象的创建，在指挥者中不涉及具体产品的信息。</li>
</ul>
<h2 id="8-6-实现"><a href="#8-6-实现" class="headerlink" title="8.6 实现"></a>8.6 实现</h2><h3 id="8-6-1-产品角色"><a href="#8-6-1-产品角色" class="headerlink" title="8.6.1 产品角色"></a>8.6.1 产品角色</h3><ul>
<li>包含多个组成部件的复杂对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String partA;</span><br><span class="line">    <span class="keyword">private</span> String partB;</span><br><span class="line">    <span class="keyword">private</span> String partC;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPartA</span><span class="params">(String partA)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.partA = partA;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPartB</span><span class="params">(String partB)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.partB = partB;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPartC</span><span class="params">(String partC)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.partC = partC;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//显示产品的特性</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-6-2-抽象建造者"><a href="#8-6-2-抽象建造者" class="headerlink" title="8.6.2 抽象建造者"></a>8.6.2 抽象建造者</h3><ul>
<li>包含创建产品各个子部件的抽象方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span></span>&#123;</span><br><span class="line">    <span class="comment">// 创建产品对象</span></span><br><span class="line">    <span class="keyword">protected</span> Product product = <span class="keyword">new</span> Product();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildPartA</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildPartB</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildPartC</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//返回产品对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">getResult</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-6-3-具体建造者"><a href="#8-6-3-具体建造者" class="headerlink" title="8.6.3 具体建造者"></a>8.6.3 具体建造者</h3><ul>
<li>实现了抽象建造者接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteBuilder</span> <span class="keyword">extends</span> <span class="title">Builder</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildPartA</span><span class="params">()</span></span>&#123;</span><br><span class="line">        product.setPartA(<span class="string">&quot;建造PartA&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildPartB</span><span class="params">()</span></span>&#123;</span><br><span class="line">        product.setPartB(<span class="string">&quot;建造PartB&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildPartC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        product.setPartC(<span class="string">&quot;建造PartC&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-6-4-指挥者"><a href="#8-6-4-指挥者" class="headerlink" title="8.6.4 指挥者"></a>8.6.4 指挥者</h3><ul>
<li>调用建造者中的方法完成复杂对象的创建</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Director</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Builder builder;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Director</span><span class="params">(Builder builder)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.builder=builder;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//产品构建与组装方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">construct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        builder.buildPartA();</span><br><span class="line">        builder.buildPartB();</span><br><span class="line">        builder.buildPartC();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> builder.getResult();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-6-5-客户"><a href="#8-6-5-客户" class="headerlink" title="8.6.5 客户"></a>8.6.5 客户</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Builder builder = <span class="keyword">new</span> ConcreteBuilder();</span><br><span class="line">        Director director = <span class="keyword">new</span> Director(builder);</span><br><span class="line">        Product product = director.construct();</span><br><span class="line">        product.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-7-应用场景"><a href="#8-7-应用场景" class="headerlink" title="8.7 应用场景"></a>8.7 应用场景</h2><ol>
<li>创建的对象较复杂，由多个部件构成，各部件面临着复杂的变化，但构件间的建造顺序是<br>稳定的。</li>
<li>创建复杂对象的算法独立于该对象的组成部分以及它们的装配方式，即产品的构建过程和<br>最终的表示是独立</li>
</ol>
<h2 id="8-8-小结"><a href="#8-8-小结" class="headerlink" title="8.8 小结"></a>8.8 小结</h2><ul>
<li>建造者模式在应用过程中可以根据需要改变，如果创建的产品种类只有一种，只需要一个具体</li>
<li>建造者时，可省略略掉抽象建造者，甚至可以省略掉指挥者角色。</li>
</ul>
]]></content>
      <categories>
        <category>后端</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>设计模式</tag>
        <tag>编程艺术</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux基础大全</title>
    <url>/2022/04/03/Linux%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、系统分区"><a href="#一、系统分区" class="headerlink" title="一、系统分区"></a>一、系统分区</h1><h2 id="1-1-分区类型"><a href="#1-1-分区类型" class="headerlink" title="1.1 分区类型"></a>1.1 分区类型</h2><h3 id="1-1-1-主分区"><a href="#1-1-1-主分区" class="headerlink" title="1.1.1 主分区"></a>1.1.1 主分区</h3><ul>
<li>最多只能有4个</li>
</ul>
<h3 id="1-1-2-扩展分区"><a href="#1-1-2-扩展分区" class="headerlink" title="1.1.2 扩展分区"></a>1.1.2 扩展分区</h3><ul>
<li>最多只能有1个</li>
<li>主分区加扩展分区最多有4个</li>
<li>不能写入数据，只能包含逻辑分区</li>
</ul>
<h3 id="1-1-3-逻辑分区"><a href="#1-1-3-逻辑分区" class="headerlink" title="1.1.3 逻辑分区"></a>1.1.3 逻辑分区</h3><ul>
<li>可以写入数据</li>
</ul>
<h2 id="1-2-格式化"><a href="#1-2-格式化" class="headerlink" title="1.2 格式化"></a>1.2 格式化</h2><ul>
<li>又称逻辑格式化</li>
<li>目的是在硬盘中写入文件系统</li>
<li>文件系统有：FAT16、FAT32、NTFS、EXT2、EXT3、EXT4（默认）等</li>
</ul>
<h2 id="1-3-硬件设备名"><a href="#1-3-硬件设备名" class="headerlink" title="1.3 硬件设备名"></a>1.3 硬件设备名</h2><div class="table-container">
<table>
<thead>
<tr>
<th>硬件</th>
<th>设备文件名</th>
</tr>
</thead>
<tbody>
<tr>
<td>IDE硬盘</td>
<td>/dev/hd[a-d]</td>
</tr>
<tr>
<td>SCSI/SATA/USB硬盘</td>
<td>/dev/sd[a-p]</td>
</tr>
<tr>
<td>光驱</td>
<td>/dev/cdrom或/dev/sr0</td>
</tr>
<tr>
<td>软盘</td>
<td>/dev/fd[0-1]</td>
</tr>
<tr>
<td>打印机（25针）</td>
<td>/dev/lp[0-2]</td>
</tr>
<tr>
<td>打印机（USB）</td>
<td>/dev/usb/lp[0-15]</td>
</tr>
<tr>
<td>鼠标</td>
<td>/dev/mouse</td>
</tr>
</tbody>
</table>
</div>
<h2 id="1-4-分区表示"><a href="#1-4-分区表示" class="headerlink" title="1.4 分区表示"></a>1.4 分区表示</h2><ul>
<li>不管如何分区，1、2、3、4都用于主分区，第一个逻辑分区都是从5开始</li>
</ul>
<img src="/2022/04/03/Linux%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/fenqu.png" class="" title="fenqu">
<h2 id="1-5-挂载"><a href="#1-5-挂载" class="headerlink" title="1.5 挂载"></a>1.5 挂载</h2><h3 id="1-5-1-必备分区"><a href="#1-5-1-必备分区" class="headerlink" title="1.5.1 必备分区"></a>1.5.1 必备分区</h3><ul>
<li>/ （根分区）</li>
<li>swap分区（交换分区，内存2倍，不超过2GB）</li>
</ul>
<h3 id="1-5-2-推荐分区"><a href="#1-5-2-推荐分区" class="headerlink" title="1.5.2 推荐分区"></a>1.5.2 推荐分区</h3><ul>
<li>/boot（启动分区，200MB，默认是sda1）</li>
</ul>
<h2 id="1-6-文件系统结构"><a href="#1-6-文件系统结构" class="headerlink" title="1.6 文件系统结构"></a>1.6 文件系统结构</h2><img src="/2022/04/03/Linux%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/file.png" class="" title="file">
<ul>
<li>Linux目录可以放在不同的系统分区中</li>
</ul>
<h2 id="1-7-小结"><a href="#1-7-小结" class="headerlink" title="1.7 小结"></a>1.7 小结</h2><ul>
<li>分区：把大硬盘分为小的逻辑分区</li>
<li>格式化：写入文件系统</li>
<li>分区设备文件名：给每个分区定义设备文件名</li>
<li>挂载：给每个分区分配挂载点（挂载点必须是空目录，挂载后分区才能正常使用）</li>
</ul>
<h1 id="二、Linux命令"><a href="#二、Linux命令" class="headerlink" title="二、Linux命令"></a>二、Linux命令</h1><h2 id="2-1-文件目录"><a href="#2-1-文件目录" class="headerlink" title="2.1 文件目录"></a>2.1 文件目录</h2><div class="table-container">
<table>
<thead>
<tr>
<th>目录名称</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>代表当前目录</td>
</tr>
<tr>
<td>..</td>
<td>代表上一级目录</td>
</tr>
<tr>
<td>-</td>
<td>代表前一个工作目录</td>
</tr>
<tr>
<td>~</td>
<td>代表[目前用户身份]所在的家目录</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-2-文件处理命令"><a href="#2-2-文件处理命令" class="headerlink" title="2.2 文件处理命令"></a>2.2 文件处理命令</h2><h3 id="2-2-1-命令列表"><a href="#2-2-1-命令列表" class="headerlink" title="2.2.1 命令列表"></a>2.2.1 命令列表</h3><ul>
<li>以下命令执行权限为<strong>所有用户</strong></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th style="text-align:left">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>ls</td>
<td>-ald [文件/目录]</td>
<td style="text-align:left">a：显示目录中全部文件（包括隐藏文件）<br/>-l：详细信息显示<br/>-d：查看目录属性<br/>-i：查看i节点<br/>显示目录文件信息<br/>所在位置/bin/mkdir</td>
</tr>
<tr>
<td>mkdir</td>
<td>-p</td>
<td style="text-align:left">-p：递归创建<br/>创建新目录</td>
</tr>
<tr>
<td>cd</td>
<td></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td>pwd</td>
<td></td>
<td style="text-align:left">显示当前目录<br/>所在位置/bin/pwd</td>
</tr>
<tr>
<td>rmdir</td>
<td></td>
<td style="text-align:left">删除空目录</td>
</tr>
<tr>
<td>cp</td>
<td>-rp [原文件/目录] [目标目录]</td>
<td style="text-align:left">-r：表示复制目录<br/>-p：表示保留文件属性<br/>复制文件或目录<br/>所在位置/bin/cp</td>
</tr>
<tr>
<td>mv</td>
<td>[原文件或目录] [目标目录]</td>
<td style="text-align:left">剪切文件、改名<br/>所在位置/bin/mv</td>
</tr>
<tr>
<td>rm</td>
<td>-rf</td>
<td style="text-align:left">-r：表示删除目录<br/>-f：表示强制执行</td>
</tr>
<tr>
<td>touch</td>
<td>[文件名]</td>
<td style="text-align:left">创建空文件<br/>所在位置/bin/touch，文件名不推荐加空格</td>
</tr>
<tr>
<td>cat</td>
<td>-n [文件名]</td>
<td style="text-align:left">-n：表示显示行号<br/>显示文件内容</td>
</tr>
<tr>
<td>tac</td>
<td></td>
<td style="text-align:left">反向显示文件内容</td>
</tr>
<tr>
<td>more</td>
<td></td>
<td style="text-align:left">按f/空格翻页<br/>按Enter换行<br/>按q退出<br/>分页显示文件内容<br/>所在位置/bin/more</td>
</tr>
<tr>
<td>less</td>
<td></td>
<td style="text-align:left">按PgUp向上翻页<br/>/+搜索名称进行内容搜索（继续按n可以向下查找）<br/>分页显示文件内容（可以向上翻页）<br/>所在位置/usr/bin/less</td>
</tr>
<tr>
<td>head</td>
<td>-n [文件名]</td>
<td style="text-align:left">-n：指定行数<br/>显示文件前几行，默认显示前世行<br/>所在位置/uer/bin/head</td>
</tr>
<tr>
<td>tail</td>
<td>-nf</td>
<td style="text-align:left">-n：指定行数<br/>-f：表示动态显示文件末尾内容<br/>显示文件后几行，默认显示后10行<br/>所在位置/usr/bin/tail</td>
</tr>
<tr>
<td>ln</td>
<td></td>
<td style="text-align:left">-s [原文件] [目标文件]<br/>生成链接文件<br/>所在位置/bin/ln</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-2-2-示例"><a href="#2-2-2-示例" class="headerlink" title="2.2.2 示例"></a>2.2.2 示例</h3><ul>
<li>ls -ld</li>
<li>mkdir -p /tmp/a/b</li>
<li>cd ..（返回上一目录）/cd [绝对路径/相对路径]</li>
<li>pwd</li>
<li>rmdir /tmp/a/b</li>
<li>cp -r /tmp/a/b /root（将b目录复制到root目录下）</li>
<li>mv /tmp/a/b /root/c（将b剪切到root目录并改名为c）</li>
<li>touch a.list</li>
<li>cat /etc/issue</li>
<li>more /etc/services</li>
<li>less /etc/services</li>
<li>head -n 20 /etc/services</li>
<li>tail -n 18 /etc/services</li>
<li>ln -s /etc/issue /tmp/issue.soft</li>
</ul>
<h2 id="2-3-权限管理命令"><a href="#2-3-权限管理命令" class="headerlink" title="2.3 权限管理命令"></a>2.3 权限管理命令</h2><h3 id="2-3-1-命令列表"><a href="#2-3-1-命令列表" class="headerlink" title="2.3.1 命令列表"></a>2.3.1 命令列表</h3><ul>
<li>以下命令执行权限为<strong>所有用户</strong></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>chmod</td>
<td>[{ugoa}{+-=}{rwx}] [文件或目录]或[mode=421] [文件或目录]/-R</td>
<td>-R：表示递归修改某一目录下全部文件的权限<br/>改变文件或目录权限<br/>u表示所有者，r=4，w=2，x=1<br/>所在位置/bin/chmod</td>
</tr>
<tr>
<td>chown</td>
<td>[用户] [文件或目录]</td>
<td>改变文件或目录的所有者<br/>所在位置/bin/chown</td>
</tr>
<tr>
<td>chgrp</td>
<td>[用户组] [文件或目录]</td>
<td>改变文件或目录的所属组<br/>所在位置/bin/chgrp</td>
</tr>
<tr>
<td>umask</td>
<td>[-S]</td>
<td>-S：表示以rwx形式显示新建文件缺省权限<br/>显示、设置文件的缺省权限<br/>所在位置Shell内置命令</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-3-2-示例"><a href="#2-3-2-示例" class="headerlink" title="2.3.2 示例"></a>2.3.2 示例</h3><ul>
<li>chmod u+x,o-r,g=rwx a.list</li>
<li>chmod 640 a.list</li>
<li>chown gaoy a (改变文件a的所有者为gaoy)</li>
<li>chown root:tsgroup /project/（改变project目录的所有者和所属组）</li>
<li>chgrp a b.list</li>
<li>umask -S</li>
</ul>
<h2 id="2-4-文件搜索命令"><a href="#2-4-文件搜索命令" class="headerlink" title="2.4 文件搜索命令"></a>2.4 文件搜索命令</h2><h3 id="2-4-1-命令列表"><a href="#2-4-1-命令列表" class="headerlink" title="2.4.1 命令列表"></a>2.4.1 命令列表</h3><ul>
<li>以下命令执行权限为<strong>所有用户</strong></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>find</td>
<td>[搜索范围] [匹配条件]</td>
<td>-name：根据文件名查找<br/>-iname：不区分大小写查找<br/>- size：根据文件大小查找<br/>-user：根据所有者查找<br/>文件搜索<br/>所在位置/bin/find</td>
</tr>
<tr>
<td>locate</td>
<td>[文件名]</td>
<td>-i：不区分大小写查找<br/>在文件资料库中查找文件，速度比find快<br/>所在位置/usr/bin/locate</td>
</tr>
<tr>
<td>which</td>
<td>[命令名称]</td>
<td>搜索命令所在目录及别名信息<br/>所在位置/usr/bin/which</td>
</tr>
<tr>
<td>whereis</td>
<td>[命令名称]</td>
<td>搜索命令所在目录及帮助文档路径</td>
</tr>
<tr>
<td>grep</td>
<td>-inv [关键字] [文件名]</td>
<td>在文件中搜寻字串匹配的行并输出<br/>所在位置/bin/grep</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-4-2-示例"><a href="#2-4-2-示例" class="headerlink" title="2.4.2 示例"></a>2.4.2 示例</h3><ul>
<li>find /etc -name init(在目录/etc中查找文件init)</li>
<li>locate inittab</li>
<li>which ls</li>
<li>whereis ls</li>
<li>grep mysql /root/install.log</li>
</ul>
<h2 id="2-5-帮助命令"><a href="#2-5-帮助命令" class="headerlink" title="2.5 帮助命令"></a>2.5 帮助命令</h2><h3 id="2-5-1-命令列表"><a href="#2-5-1-命令列表" class="headerlink" title="2.5.1 命令列表"></a>2.5.1 命令列表</h3><ul>
<li>以下命令执行权限为<strong>所有用户</strong></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>man</td>
<td>[命令或配置文件]</td>
<td>获取帮助信息<br/>按q退出<br/>按空格翻页<br/>按Enter换行<br/>按/-[查找内容]进行查找<br/>按n向下查找<br/>所在位置/usr/bin/man</td>
</tr>
<tr>
<td>whatis</td>
<td>[命令]</td>
<td>简单显示命令帮助信息</td>
</tr>
<tr>
<td>apropos</td>
<td>[配置文件]</td>
<td>查看配置文件的信息</td>
</tr>
<tr>
<td>—help</td>
<td>[命令] —help</td>
<td>查看命令常见选项</td>
</tr>
<tr>
<td>help</td>
<td>[命令]</td>
<td>获取Shell内置命令的版帮助信息<br/>所在位置Shell内置命令</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-5-2-示例"><a href="#2-5-2-示例" class="headerlink" title="2.5.2 示例"></a>2.5.2 示例</h3><ul>
<li>man ls</li>
<li>man services：查看配置文件services的帮助信息</li>
<li>whatis ls</li>
<li>apropos inittab</li>
<li>ls —help</li>
<li>help umask</li>
</ul>
<h2 id="2-6-用户管理命令"><a href="#2-6-用户管理命令" class="headerlink" title="2.6 用户管理命令"></a>2.6 用户管理命令</h2><h3 id="2-6-1-命令列表"><a href="#2-6-1-命令列表" class="headerlink" title="2.6.1 命令列表"></a>2.6.1 命令列表</h3><ul>
<li>useradd/userdel执行权限为root</li>
<li>其他命令执行权限为所有用户</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>useradd</td>
<td>-udcgGs</td>
<td>-u [UID]：手工指定用户的UID<br/>-d [家目录]：手工指定用户的家目录<br/>-c [用户说明]：手工指定用户的说明<br/>-g [组名]：手工指定用户的初始组<br/>-G [组名]：手工指定用户的附加组<br/>-s shell：手工指定用户的登录shell，默认是/bin/bash<br/>所在位置：/usr/sbin/useradd；<br/>添加用户，不推荐手工指定用户的家目录</td>
</tr>
<tr>
<td>passwd</td>
<td>-Slu [用户名]—stdin</td>
<td>-S：查询用户密码的密码状态<br/>-l：暂时锁定用户<br/>-u：解锁用户<br/>—stdin：可以通过管道符输出的数据作为用户的密码<br/>-Slu：这些选项只能由root执行<br/>设置用户密码，root可以更改任何人的密码，普通用户可以更改自己的密码<br/>所在位置：/usr/bin/passwd；<br/>只用root可以改其他用户的密码，其他用户只能直接输入passwd（不用接用户名）改自己的密码（必须符合密码复杂性原则）</td>
</tr>
<tr>
<td>usermod</td>
<td>-ucGLU</td>
<td>-u [UID]：修改用户的UID号<br/>-c [用户说明]：修改用户的说明信息<br/>-G [组名]：修改用户的附加组-L-U；<br/>-L：临时锁定用户<br/>-U：解锁用户锁定</td>
</tr>
<tr>
<td>chage</td>
<td></td>
<td>-l：列出用户的详细密码<br/>-d [日期]：修改密码最后一次更改日期<br/>-m [天数]：两次密码修改间隔<br/>-M [天数]：密码有效期<br/>-W [天数]：密码过期前警告天数<br/>-I [天数]：密码过后宽限天数<br/>-E [日期]：账号失效时间</td>
</tr>
<tr>
<td>userdel</td>
<td>-r [用户名]</td>
<td>-r：删除用户的同时删除用户家目录</td>
</tr>
<tr>
<td>id</td>
<td>[用户名]</td>
<td>查看用户ID（UID、GID等）</td>
</tr>
<tr>
<td>su [选项] [用户名]</td>
<td>-<br/>-c</td>
<td>-：选项只是用“-”代表连带用户的环境变量一起切换<br/>-c：仅执行一次命令，而不切换用户身份</td>
</tr>
<tr>
<td>groupadd</td>
<td>-g [GID] [组名]</td>
<td>-g [GID]：指定组ID</td>
</tr>
<tr>
<td>groupmod [选项] [组名]</td>
<td>-g [GID]-n [新组名]</td>
<td>-g：修改GID<br/>-n：修改组名</td>
</tr>
<tr>
<td>groupdel [组名]</td>
<td></td>
<td>没有初始组，此用户不能存在</td>
</tr>
<tr>
<td>gpasswd</td>
<td>-ad [用户名] [组名]</td>
<td>-a：把用户加入组<br/>-d：把用户从组中删除；<br/>把用户添加入组或从组中删除</td>
</tr>
<tr>
<td>who</td>
<td></td>
<td>查看登录用户信息<br/>所在位置：/usr/bin/who</td>
</tr>
<tr>
<td>w</td>
<td></td>
<td>查看登录用户详细信息<br/>所在位置：/usr/bin/w</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-6-2-示例"><a href="#2-6-2-示例" class="headerlink" title="2.6.2 示例"></a>2.6.2 示例</h3><ul>
<li>useradd yangmi</li>
<li>echo “123” | passwd —stdin lamp：给用户lamp添加密码123</li>
<li>passwd -l sc：锁定用户（该用户无法登录）</li>
<li>usermod -c “test user” lamp</li>
<li>chage -d 0 lamp：用户一登录就要修改密码</li>
<li>su root：这样切换不会改变此用户的环境变量</li>
<li>su - root：把用户的操作环境也改为root环境（推荐）</li>
<li>su - root -c “useradd user3”：不切换成root，但执行useradd命令添加user3用户</li>
<li>groupmod -n testgrp group1：把组名group1修改为testgrp</li>
<li>gpasswd -a user1 root：把user1用户加入到root组中</li>
<li>who</li>
<li>w</li>
</ul>
<h2 id="2-7-压缩解压命令"><a href="#2-7-压缩解压命令" class="headerlink" title="2.7 压缩解压命令"></a>2.7 压缩解压命令</h2><h3 id="2-7-1-命令列表"><a href="#2-7-1-命令列表" class="headerlink" title="2.7.1 命令列表"></a>2.7.1 命令列表</h3><ul>
<li>以下命令执行权限为<strong>所有用户</strong></li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>gzip</td>
<td>[文件]</td>
<td>压缩文件(目录不可以)，压缩后文件格式为.gz，压缩后只保留压缩后的文件，不保留原文件所在位置/bin/gzip</td>
</tr>
<tr>
<td>gunzip</td>
<td>[压缩文件]</td>
<td>解压缩.gz的压缩文件</td>
</tr>
<tr>
<td>tar</td>
<td>-zcfvx [压缩后的文件名] [目录]</td>
<td>-c：打包<br/>-v：显示详细信息<br/>-f：指定文件名<br/>-z：打包同时压缩<br/>-x：解包<br/>打包目录，即把目录打包成一个.tar的文件，压缩后的文件格式为.tar.gz所在位置：/bin/tar</td>
</tr>
<tr>
<td>zip</td>
<td>-r [压缩后文件名] [文件或目录]</td>
<td>-r：压缩目录<br/>压缩文件或目录，压缩后文件格式为.zip<br/>所在位置/usr/bin/zip</td>
</tr>
<tr>
<td>unzip</td>
<td>[压缩文件]</td>
<td>解压.zip的压缩文件<br/>所在位置/usr/bin/unzip</td>
</tr>
<tr>
<td>bzip2</td>
<td>-k [文件]</td>
<td>压缩文件，压缩后文件格式.bz2</td>
</tr>
<tr>
<td>bunzip2</td>
<td>-k [压缩文件]</td>
<td>解压缩</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-7-2-示例"><a href="#2-7-2-示例" class="headerlink" title="2.7.2 示例"></a>2.7.2 示例</h3><ul>
<li>gunzip a.gz</li>
<li>tar -zcf Japan.tar.gz Japan</li>
<li>tar -axvf Japan.tar.gz（解包）</li>
<li>zip -r Japan.zip Japan</li>
<li>unzip test.zip</li>
<li>bzip2 -k boduo</li>
<li>tar -cjf Japan.tar.bz2 Japan（针对目录）</li>
<li>bunzip2 -k boduo.bz2</li>
<li>tar -xjf Japan.tar.bz2（针对目录）</li>
</ul>
<h2 id="2-8-网络命令"><a href="#2-8-网络命令" class="headerlink" title="2.8 网络命令"></a>2.8 网络命令</h2><h3 id="2-8-1-命令列表"><a href="#2-8-1-命令列表" class="headerlink" title="2.8.1 命令列表"></a>2.8.1 命令列表</h3><ul>
<li>以下命令执行权限为<strong>所有用户</strong></li>
<li>ifconfig执行权限为root，其他均为所有用户</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>write</td>
<td>&lt;用户名&gt;</td>
<td>给登录用户发信息<br/>以Ctrl+D保存结束<br/>所在位置：/usr/bin/write</td>
</tr>
<tr>
<td>wall</td>
<td>[message]</td>
<td>发广播信息<br/>所在位置：/usr/bin/wall</td>
</tr>
<tr>
<td>ping</td>
<td>-c [IP地址]</td>
<td>测试网络连通性<br/>所在位置：/bin/ping</td>
</tr>
<tr>
<td>ifconfig</td>
<td>[网卡名称] [IP地址]</td>
<td>查看和设置网卡信息<br/>所在位置：/sbin/ifconfig</td>
</tr>
<tr>
<td>mail</td>
<td>[用户名]</td>
<td>查看发送电子邮件<br/>所在位置/bin/mail</td>
</tr>
<tr>
<td>last</td>
<td></td>
<td>列出目前与过去登入系统的用户信息<br/>所在位置：/usr/bin/last</td>
</tr>
<tr>
<td>lastlog</td>
<td>-u [uid]</td>
<td>检查某特定用户上次登录的时间<br/>所在位置/usr/bin/lastlog</td>
</tr>
<tr>
<td>traceroute</td>
<td></td>
<td>显示数据包到主机间的路径<br/>所在位置：/bin/traceroute</td>
</tr>
<tr>
<td>netstat</td>
<td>-tulrn</td>
<td>显示网络相关信息<br/>所在位置：/bin/netstat</td>
</tr>
<tr>
<td>setup</td>
<td></td>
<td>配置网络<br/>所在位置/usr/bin/setup</td>
</tr>
<tr>
<td>mount</td>
<td>[-t 文件系统] [设备文件名] [挂载点]</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-8-2-示例"><a href="#2-8-2-示例" class="headerlink" title="2.8.2 示例"></a>2.8.2 示例</h3><ul>
<li>write linzhiling</li>
<li>wall abcdefgh</li>
<li>ping -c 3 192.168.1.156</li>
<li>ifconfig eth0 192.168.8.250</li>
<li>mail root</li>
<li>mail</li>
<li>last</li>
<li>lastlog</li>
<li>lastlog -u 502</li>
<li>traceroute www.baidu.com</li>
<li>netstat -tlun（查看本机监听的端口）</li>
<li>netstat -an（查看本机所有的网络连接）</li>
<li>netstat -rn（查看本机路由表）</li>
<li>setup</li>
<li>mount -t iso9660 /dev/sr0 /mnt/cdrom</li>
<li>umount /dev/sr0（卸载）</li>
</ul>
<h2 id="2-9-关机重启命令"><a href="#2-9-关机重启命令" class="headerlink" title="2.9 关机重启命令"></a>2.9 关机重启命令</h2><h3 id="2-9-1-命令列表"><a href="#2-9-1-命令列表" class="headerlink" title="2.9.1 命令列表"></a>2.9.1 命令列表</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>shutdown</td>
<td>-chr [时间]</td>
<td>-c：取消前一个关机命令<br/>-h：关机<br/>-r：重启</td>
</tr>
<tr>
<td>reboot</td>
<td></td>
<td>重启</td>
</tr>
<tr>
<td>init 0</td>
<td></td>
<td>关机</td>
</tr>
<tr>
<td>init 6</td>
<td></td>
<td>重启</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-9-2-系统运行级别"><a href="#2-9-2-系统运行级别" class="headerlink" title="2.9.2 系统运行级别"></a>2.9.2 系统运行级别</h3><h4 id="（1）级别"><a href="#（1）级别" class="headerlink" title="（1）级别"></a>（1）级别</h4><div class="table-container">
<table>
<thead>
<tr>
<th>级别</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>关机</td>
</tr>
<tr>
<td>1</td>
<td>单用户</td>
</tr>
<tr>
<td>2</td>
<td>不完全多用户、不含NFS服务</td>
</tr>
<tr>
<td>3</td>
<td>完全多用户（默认）</td>
</tr>
<tr>
<td>4</td>
<td>未分配</td>
</tr>
<tr>
<td>5</td>
<td>图形界面</td>
</tr>
<tr>
<td></td>
<td>重启</td>
</tr>
</tbody>
</table>
</div>
<h4 id="（2）相关命令"><a href="#（2）相关命令" class="headerlink" title="（2）相关命令"></a>（2）相关命令</h4><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>runlevel</td>
<td>查看系统运行级别</td>
</tr>
<tr>
<td>logout</td>
<td>退出登录</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-10-Shell命令"><a href="#2-10-Shell命令" class="headerlink" title="2.10 Shell命令"></a>2.10 Shell命令</h2><h3 id="2-10-1-命令列表"><a href="#2-10-1-命令列表" class="headerlink" title="2.10.1 命令列表"></a>2.10.1 命令列表</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>echo</td>
<td>-e [输出内容]</td>
<td>-e：支持反斜线控制的字符转换；基本输出命令</td>
</tr>
<tr>
<td>history</td>
<td>-cw [历史命令保存文件]</td>
<td>-c：清空历史命令（不推荐清空）<br/>-w：把缓存中的历史命令写入历史命令保护文件<br/>~/.bash_history<br/>查看之前输入的命令，不加w选项，刚输入的命令还在缓存中，还未写入历史命令保存文件中，默认保存1000条历史命令（可以在环境变量配置文件/etc/profile中进行修改）</td>
</tr>
<tr>
<td>alias</td>
<td>[别名]=[‘原命令’]</td>
<td>alias [别名]=[‘原命令’]：设定命令别名<br/>alias：查询命令别名<br/>临时生效，重启后无效</td>
</tr>
</tbody>
</table>
</div>
<h3 id="2-10-2-示例"><a href="#2-10-2-示例" class="headerlink" title="2.10.2 示例"></a>2.10.2 示例</h3><ul>
<li>history</li>
<li>history -w</li>
<li>alias vi=’vim’</li>
<li>alias</li>
</ul>
<h2 id="2-11-字符提取命令"><a href="#2-11-字符提取命令" class="headerlink" title="2.11 字符提取命令"></a>2.11 字符提取命令</h2><h3 id="2-11-1-cut命令"><a href="#2-11-1-cut命令" class="headerlink" title="2.11.1 cut命令"></a>2.11.1 cut命令</h3><ul>
<li>选项：-df [文件名]</li>
<li>解释：<ul>
<li>-d 分隔符：按照指定分隔符分割列</li>
<li>-f 列号：提取第几列</li>
</ul>
</li>
<li>说明：默认提取以制表符分割的列</li>
</ul>
<h3 id="2-11-2-printf命令"><a href="#2-11-2-printf命令" class="headerlink" title="2.11.2 printf命令"></a>2.11.2 printf命令</h3><ul>
<li>‘输出类型/输出格式’ 输出内容</li>
<li>输出类型：<ul>
<li>%ns：输出字符串。n是数字指代输出几个字符</li>
<li>%ni：输出整数。n是数字指代输出几个数字</li>
<li>%m.nf：输出浮点数。m和n是数字，指代输出的整数位数和小数位数。如%8.2f代表共输出8位数，其中2位是小数，6位是整数</li>
</ul>
</li>
<li><p>输出格式：</p>
<ul>
<li>\a：输出警告音</li>
<li>\b：输出退格键</li>
<li>\f：清除屏幕</li>
<li>\n：换行</li>
<li>\r：回车</li>
<li>\t：水平输出退格键，即Tab键</li>
<li>\v：垂直输出退格键，即Tab键</li>
</ul>
</li>
<li><p>说明：利用管道符或者直接接文件名都无法利用此命令输出文件内容，print和printf一般在awk命令中使用</p>
</li>
<li>示例<ul>
<li>printf ‘%s %s %s \n’ 1 2 3 4 5 6</li>
<li>printf ‘%s’ $(cat s.txt)：输出文件内容</li>
</ul>
</li>
</ul>
<h3 id="2-11-3-awk命令"><a href="#2-11-3-awk命令" class="headerlink" title="2.11.3 awk命令"></a>2.11.3 awk命令</h3><ul>
<li>选项：<ul>
<li>‘条件1 {动作1}</li>
<li>条件2 {动作2}…’ 文件名</li>
</ul>
</li>
<li>条件：<ul>
<li>一般使用关系表达式作为条件</li>
<li>x&gt;10</li>
<li>x&gt;=10</li>
<li>x&lt;=10</li>
</ul>
</li>
<li>动作：格式化输出流程控制语句</li>
<li>说明：print只能在awk中使用，会自动换行</li>
<li>示例：<ul>
<li>awk ‘{printf $2 “\t” $6 “\n”}’ s.txt：输出文件第2列和第六列</li>
<li>df -h | awk ‘{print $1 “\t” $3}’</li>
<li>df -h | grep sda5 | awk ‘{print $5}’ | cut -d “%” -f 1：截取某一行的第5列数据</li>
<li>awk ‘BEGIN{printf “This is a txt \n”} {print $2 “\t” $5}’ s.txt：在输出文件内容前，先输出This is a txt</li>
<li>awk ‘BEGIN{FS=”:”} {print $1 “\t” $3}’ /etc/passwd：FS指定分隔符为冒号，不加BEGIN，文件的第一行就不会处理</li>
<li>awk ‘END{printf “The End \n”} {printf $2 “\t” $6 “\n”}’ s.txtEND：表示输出完成之后，再输出The End</li>
</ul>
</li>
</ul>
<h3 id="2-11-4-sed命令"><a href="#2-11-4-sed命令" class="headerlink" title="2.11.4 sed命令"></a>2.11.4 sed命令</h3><ul>
<li>选项：[-nei] ‘[动作]’ [文件名]</li>
<li>解释：<ul>
<li>-n：一般sed命令会把所有数据都输出到屏幕，如果加入此选项，则只会把经过sed命令处理的行输出到屏幕</li>
<li>-e：允许对输入数据应用多条sed命令编辑</li>
<li>-i：用sed的修改结果直接修改读取数据的文件，而不是由屏幕输出</li>
</ul>
</li>
<li><p>动作：</p>
<ul>
<li>a \：追加，在当前行后添加一行或多行。添加多行时，除最后一行外，每行末尾需要用“\”代表数据未完结</li>
<li>c \：行替换，用c后面的字符串替换原数据行，替换多行时，除最后一行外，每行末尾需用“\”代表数据未完结</li>
<li>i \：插入，在当前行前插入一行或多行。插入多行时，除最后一行外，每行末尾需要用“\”代表数据未完结</li>
<li>d：删除，删除指定的行</li>
<li>p：打印，输出指定的行</li>
<li>s：字串替换，用一个字符串替换另外一个字符串。</li>
<li>格式为“行范围s/旧字串/新字串/g”（和vim中的替换格式类似）</li>
</ul>
</li>
<li><p>示例：</p>
<ul>
<li>sed -n ‘2p’ s.txt：输出第二行，不加-n会把所有内容都输出</li>
<li>df -h | sed -n ‘2p’ s.txt：输出df命令内容第2行</li>
<li>sed ‘2,4d’ s.txt：将文件输出的内容的第2到4行删除，但不改变文件本身</li>
<li>sed ‘2i hello \world’ s.txt：在文件输出内容第2行插入hello world内容，并不改变文件本身</li>
<li>sed ‘4s/99/55/g’ s.txt：将文件输出内容的第4行的99改为55</li>
<li>sed -e ‘s/LiMing//g ; s/Gao//g/‘ s.txt：同时把LiMing和Gao修改为空白</li>
</ul>
</li>
</ul>
<h1 id="三、网络配置"><a href="#三、网络配置" class="headerlink" title="三、网络配置"></a>三、网络配置</h1><h2 id="3-1-准备工作"><a href="#3-1-准备工作" class="headerlink" title="3.1 准备工作"></a>3.1 准备工作</h2><ul>
<li>将虚拟机网络配置改为桥接模式，才能保证主机和虚拟机ping通</li>
</ul>
<h2 id="3-2-第一步"><a href="#3-2-第一步" class="headerlink" title="3.2 第一步"></a>3.2 第一步</h2><h3 id="3-2-1-修改配置文件参数"><a href="#3-2-1-修改配置文件参数" class="headerlink" title="3.2.1 修改配置文件参数"></a>3.2.1 修改配置文件参数</h3><ol>
<li>dhclient：动态分配IP地址</li>
<li>vim /etc/sysconfig/network-scripts/ifcfg-ens33</li>
<li>修改静态IP：BOOTPROTO=static</li>
<li>修改自启动：ONBOOT=yes</li>
</ol>
<h2 id="3-3-第二步"><a href="#3-3-第二步" class="headerlink" title="3.3 第二步"></a>3.3 第二步</h2><h3 id="3-3-1-向配置文件添加IP地址、子网掩码、网关、DNS"><a href="#3-3-1-向配置文件添加IP地址、子网掩码、网关、DNS" class="headerlink" title="3.3.1 向配置文件添加IP地址、子网掩码、网关、DNS"></a>3.3.1 向配置文件添加IP地址、子网掩码、网关、DNS</h3><ul>
<li>IPADDR=192.168.1.102</li>
<li>NETMASK=255.255.255.0</li>
<li>GATEWAY=192.168.1.1</li>
<li>DNS1=119.29.29.29</li>
<li>GATEWAY和IPADDR需要在同一网段下，否则无法上网</li>
</ul>
<h2 id="3-4-第三步"><a href="#3-4-第三步" class="headerlink" title="3.4 第三步"></a>3.4 第三步</h2><ul>
<li>重启网络服务：systemctl restart network.service</li>
</ul>
<h1 id="四、开启web服务"><a href="#四、开启web服务" class="headerlink" title="四、开启web服务"></a>四、开启web服务</h1><h2 id="4-1-安装tomcat"><a href="#4-1-安装tomcat" class="headerlink" title="4.1 安装tomcat"></a>4.1 安装tomcat</h2><h2 id="4-2-安装nginx"><a href="#4-2-安装nginx" class="headerlink" title="4.2 安装nginx"></a>4.2 安装nginx</h2><h2 id="4-3-开放端口"><a href="#4-3-开放端口" class="headerlink" title="4.3 开放端口"></a>4.3 开放端口</h2><ul>
<li>在不关闭防火墙的前提下，开放浏览器访问端口<ul>
<li>开启tomcat：systemctl start tomcat.service</li>
<li>永久开放8080端口：firewall-cmd —zone=public —add-port=8080/tcp —permanent</li>
<li>重启防火墙：systemctl restart firewalld.service</li>
<li>查看是否开放成功：firewall-cmd —list-ports</li>
</ul>
</li>
<li>也可以关闭防火墙对服务器进行访问：<ul>
<li>暂时关闭防火墙：systemctl stop firewalld</li>
<li>永久关闭防火墙：systemctl disable firewalld</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>后端</category>
        <category>服务器</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Linux命令</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringMVC基础大全</title>
    <url>/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、SpringMVC简介"><a href="#一、SpringMVC简介" class="headerlink" title="一、SpringMVC简介"></a>一、SpringMVC简介</h1><h2 id="1-1-什么是MVC"><a href="#1-1-什么是MVC" class="headerlink" title="1.1 什么是MVC"></a>1.1 什么是MVC</h2><ul>
<li>MVC：软件架构思想</li>
<li>M：模型层，指工程中的bean</li>
<li>V：视图层，指工程中的html或jsp等页面，作用是与用户进行交互，展示数据</li>
<li>C：控制层，指工程中的servlet，用于接收请求和响应数据</li>
<li>MVC工作流程：视图层发送请求到服务器，服务器请求被控制层接收，控制层调用响应的模型层处理请求，处理完之后将结果返回控制层，控制层，再根据请求处理的结果找到相应的视图层，渲染数据后最终相应给浏览器</li>
</ul>
<h1 id="二、一个案例"><a href="#二、一个案例" class="headerlink" title="二、一个案例"></a>二、一个案例</h1><h2 id="2-1-创建MAVEN工程"><a href="#2-1-创建MAVEN工程" class="headerlink" title="2.1 创建MAVEN工程"></a>2.1 创建MAVEN工程</h2><ul>
<li>在pom文件中设置打包方式为war包</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-2-引入依赖"><a href="#2-2-引入依赖" class="headerlink" title="2.2 引入依赖"></a>2.2 引入依赖</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-classic --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.thymeleaf/thymeleaf-spring5 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3-创建webapp"><a href="#2-3-创建webapp" class="headerlink" title="2.3 创建webapp"></a>2.3 创建webapp</h2><ul>
<li>在mian目录下创建webapp文件夹</li>
<li>在webapp下创建文件夹WEB-INF</li>
<li>在项目结构窗口的modules窗口中添加web.xml配置，注意路径要在WEB-INF前添加上src/main/webapp</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/webxml.png" class="" title="imageweb">
<ul>
<li>在WEB-INF中创建templates/index.html</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/project.png" class="" title="imagepro">
<h2 id="2-4-配置web-xml"><a href="#2-4-配置web-xml" class="headerlink" title="2.4 配置web.xml"></a>2.4 配置web.xml</h2><h3 id="2-4-1-默认配置方式"><a href="#2-4-1-默认配置方式" class="headerlink" title="2.4.1 默认配置方式"></a>2.4.1 默认配置方式</h3><ul>
<li>此配置作用下，SpringMVC的配置文件默认位于WEB-INF下，默认名称为<code>&lt;servlet-name&gt;</code>-servlet.xml，例如以下配置所对应的SpringMVC的配置文件位于WEB-INF下，文件名为SpringMVC-servlet.xml</li>
<li>不推荐，因为spring配置资源一般都是放在resources下的</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  配置SpringMVC前端控制器，对浏览器发送的请求进行统一处理  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        设置SpringMVC核心控制器所能处理的请求路径</span></span><br><span class="line"><span class="comment">        / 所匹配的请求可以是/login或.html/.css/.js等方式的请求路径</span></span><br><span class="line"><span class="comment">        但不匹配.jsp请求路径的请求</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-4-2-扩展配置方式（推荐）"><a href="#2-4-2-扩展配置方式（推荐）" class="headerlink" title="2.4.2 扩展配置方式（推荐）"></a>2.4.2 扩展配置方式（推荐）</h3><ul>
<li>加入init-param，设置配置资源路径</li>
<li>配置好init-param后，需要在resources中创建springMVC.xml配置文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  配置SpringMVC前端控制器，对浏览器发送的请求进行统一处理  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    配置SpringMVC配置文件的位置和名称，然后在reources中创建xml配置文件    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">            <span class="comment">&lt;!--    将前端控制器DispatcherServlet启动时间提前到服务器启动的时候    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    提升第一次访问的速度    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    设置SpringMVC核心控制器所能处理的请求路径</span></span><br><span class="line"><span class="comment">    / 所匹配的请求可以是/login或.html/.css/.js等方式的请求路径</span></span><br><span class="line"><span class="comment">    但不匹配.jsp请求路径的请求</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-配置springMVC-xml"><a href="#2-5-配置springMVC-xml" class="headerlink" title="2.5 配置springMVC.xml"></a>2.5 配置springMVC.xml</h2><h3 id="2-5-1-开启自动扫描"><a href="#2-5-1-开启自动扫描" class="headerlink" title="2.5.1 开启自动扫描"></a>2.5.1 开启自动扫描</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 自动扫描包 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.kuang.mvc.controller&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-5-2-添加Thymeleaf视图解析器"><a href="#2-5-2-添加Thymeleaf视图解析器" class="headerlink" title="2.5.2 添加Thymeleaf视图解析器"></a>2.5.2 添加Thymeleaf视图解析器</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置Thymeleaf视图解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- 视图前缀 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- 视图后缀 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-5-3-静态资源处理配置"><a href="#2-5-3-静态资源处理配置" class="headerlink" title="2.5.3 静态资源处理配置"></a>2.5.3 静态资源处理配置</h3><ul>
<li>暂时不需要配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">   处理静态资源，例如html、js、css、jpg</span></span><br><span class="line"><span class="comment">  若只设置该标签，则只能访问静态资源，其他请求则无法访问</span></span><br><span class="line"><span class="comment">  此时必须设置&lt;mvc:annotation-driven/&gt;解决问题</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 开启mvc注解驱动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 处理响应中文内容乱码 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultCharset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;supportedMediaTypes&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-6-控制层实现"><a href="#2-6-控制层实现" class="headerlink" title="2.6 控制层实现"></a>2.6 控制层实现</h2><ul>
<li>创建controller层实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 请求地址映射，实现页面跳转</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-7-编写页面"><a href="#2-7-编写页面" class="headerlink" title="2.7 编写页面"></a>2.7 编写页面</h2><h3 id="2-7-1-添加thymeleaf命名空间"><a href="#2-7-1-添加thymeleaf命名空间" class="headerlink" title="2.7.1 添加thymeleaf命名空间"></a>2.7.1 添加thymeleaf命名空间</h3><ul>
<li>在html标签内写入<code>xmlns:th=&quot;http://www.thymeleaf.org&quot;</code></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-8-配置服务器"><a href="#2-8-配置服务器" class="headerlink" title="2.8 配置服务器"></a>2.8 配置服务器</h2><ul>
<li>使用tomcat服务器部署项目并运行</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/tomcat.png" class="" title="tomcat">
<ul>
<li>注意这些选项的配置<ul>
<li>简化访问路径和调试方式</li>
</ul>
</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/path.png" class="" title="path">
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/action.png" class="" title="action">
<h1 id="三、RequestMapping注解"><a href="#三、RequestMapping注解" class="headerlink" title="三、RequestMapping注解"></a>三、RequestMapping注解</h1><h2 id="3-1-简介"><a href="#3-1-简介" class="headerlink" title="3.1 简介"></a>3.1 简介</h2><ul>
<li>将请求和控制器方法联系起来</li>
</ul>
<h2 id="3-2-注解位置"><a href="#3-2-注解位置" class="headerlink" title="3.2 注解位置"></a>3.2 注解位置</h2><ul>
<li><p>@RequestMapping标识一个类：设置映射请求的请求路径的初始信息</p>
</li>
<li><p>@RequestMapping标识一个方法：设置映射请求请求路径的具体信息</p>
</li>
</ul>
<h2 id="3-3-注解属性"><a href="#3-3-注解属性" class="headerlink" title="3.3 注解属性"></a>3.3 注解属性</h2><h3 id="3-3-1-value"><a href="#3-3-1-value" class="headerlink" title="3.3.1 value"></a>3.3.1 value</h3><ul>
<li>@RequestMapping注解的value属性是一个字符串类型的数组，表示该请求映射能够匹配多个请求地址所对应的请求<ul>
<li>一个方法可以对应多个请求</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/testRequestMapping&#125;&quot;</span>&gt;</span>测试@RequestMapping的value属性--&gt;/testRequestMapping<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>测试@RequestMapping的value属性--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestMapping</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-3-2-method"><a href="#3-3-2-method" class="headerlink" title="3.3.2 method"></a>3.3.2 method</h3><ul>
<li>配置请求方式，如果浏览器请求方式与method方式不匹配，则会报错405</li>
<li>@RequestMapping注解的method属性是一个RequestMethod类型的数组，表示该请求映射能够匹配多种请求方式的请求</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span>&gt;</span>测试@RequestMapping的value属性--&gt;/test<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/test&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(</span></span><br><span class="line"><span class="meta">        value = &#123;&quot;/testRequestMapping&quot;, &quot;/test&quot;&#125;,</span></span><br><span class="line"><span class="meta">        method = &#123;RequestMethod.GET, RequestMethod.POST&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestMapping</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>@RequestMapping的派生注解<ul>
<li>@GetMapping</li>
<li>@PostMapping</li>
<li>@PutMapping</li>
<li>@DeleteMapping</li>
</ul>
</li>
<li><p>常用的请求方式：get、post、put、delete</p>
</li>
<li><p>但是目前<strong>浏览器只支持get和post</strong>，若在form表单提交时，为method设置了其他请求方式的字符串（put或delete），则按照默认的请求方式get处理</p>
</li>
<li><p>若要发送put和delete请求，则需要通过spring提供的过滤器HiddenHttpMethodFilter，在RESTful部分会讲到</p>
</li>
</ul>
<h2 id="3-4-ant风格路径"><a href="#3-4-ant风格路径" class="headerlink" title="3.4 ant风格路径"></a>3.4 ant风格路径</h2><ul>
<li>RequestMapping设置的请求地址时会使用到以下匹配字符<ul>
<li>?：表示任意的单个字符</li>
<li>*：表示任意的0个或多个字符</li>
<li>**：表示任意的一层或多层目录</li>
</ul>
</li>
</ul>
<h2 id="3-5-占位符（RESTful）"><a href="#3-5-占位符（RESTful）" class="headerlink" title="3.5 占位符（RESTful）"></a>3.5 占位符（RESTful）</h2><ul>
<li>原始请求路径：/deleteUser?id=1</li>
<li><p>RESTful风格请求地址：/deleteUser/{id}</p>
<ul>
<li>比如请求地址为/deleteUser/1，与原始请求路径方式作用一致</li>
<li>{xxx}匹配请求参数，可以使用多个，如：/deleteUser/{id}/{username}</li>
</ul>
</li>
<li><p>控制器获取<strong>RESTful风格请求</strong>的参数方式：</p>
<ul>
<li>需要使用注解@PathVariable，对应请求参数</li>
</ul>
</li>
<li>配置了<strong>RESTful风格请求路径</strong>，就无法使用原始请求路径进行访问了</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestMapping/&#123;id&#125;&quot;,)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestMapping</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span>Integer id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="四、获取请求参数"><a href="#四、获取请求参数" class="headerlink" title="四、获取请求参数"></a>四、获取请求参数</h1><h2 id="4-1-RequestParam注解"><a href="#4-1-RequestParam注解" class="headerlink" title="4.1 RequestParam注解"></a>4.1 RequestParam注解</h2><ul>
<li>配置需要的请求参数名</li>
<li>value可以配置参数名</li>
<li>required可以设置请求参数是否必须要传递，默认为true<ul>
<li>设置为false之后，没有传这个参数，方法形参得到的值就是null</li>
</ul>
</li>
<li>defaultValue表示为形参设置默认值<ul>
<li>前端需要传递参数但没有传递值，如/user?id=&amp;username=</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestMapping&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestMapping</span><span class="params">(<span class="meta">@RequestParam(value=&quot;id&quot;,required = false，defaultValue = 1)</span>Integer id)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-RequestHeader注解"><a href="#4-2-RequestHeader注解" class="headerlink" title="4.2 RequestHeader注解"></a>4.2 RequestHeader注解</h2><ul>
<li>同RequestParam，拥有value/required/defaultValue属性</li>
<li>用于获取请求头信息</li>
</ul>
<h2 id="4-3-CookieValue注解"><a href="#4-3-CookieValue注解" class="headerlink" title="4.3 CookieValue注解"></a>4.3 CookieValue注解</h2><ul>
<li>同RequestParam，拥有value/required/defaultValue属性</li>
<li>用于获取cookie信息</li>
</ul>
<h2 id="4-4-实体类获取请求参数"><a href="#4-4-实体类获取请求参数" class="headerlink" title="4.4 实体类获取请求参数"></a>4.4 实体类获取请求参数</h2><ul>
<li>当表单的name属性和实体类的属性一一对应时，使用实体类形参即可获取到请求信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestMapping&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestMapping</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>以上方式可以接收表单请求数据，但是user数据在控制台打印时会出现乱码的问题</li>
<li>get请求数据乱码可以修改tomcat配置文件server.xml的URIEncoding属性</li>
<li>post请求乱码需要在web.xml中配置过滤器进行处理</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  配置过滤器  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="五、域对象共享数据"><a href="#五、域对象共享数据" class="headerlink" title="五、域对象共享数据"></a>五、域对象共享数据</h1><h2 id="5-1-Servlet四大作用域"><a href="#5-1-Servlet四大作用域" class="headerlink" title="5.1 Servlet四大作用域"></a>5.1 Servlet四大作用域</h2><ul>
<li><strong>page</strong>：对应pageContext对象，JSP页面容器（page对象）,当前页面有效（重定向/请求转发都会使其无效）</li>
<li><strong>request</strong>：对应HttpServletContext对象，请求对象，同一次请求有效（请求转发有效、重定向无效）</li>
<li><strong>session</strong>：对应HttpSession对象，会话对象，同一次会话有效（请求转发/重定向有效，关闭/切换浏览器无效）</li>
<li><strong>application</strong>：对应ServletContext对象，全局对象，全局有效（整个项目运行期间/切换浏览器都有效，关闭服务、其他项目中无效）</li>
<li>有效的意思是说以上4个对象使用setAttribute()方法后的有效范围</li>
<li>尽量使用最小的范围，作用域越大，系统开销越大</li>
<li><strong>经常改动</strong>的数据一般使用较小的作用域，<strong>不常变动</strong>的数据一般使用较大的作用域</li>
</ul>
<h2 id="5-2-request域对象共享数据"><a href="#5-2-request域对象共享数据" class="headerlink" title="5.2 request域对象共享数据"></a>5.2 request域对象共享数据</h2><ul>
<li><p>控制器方法执行后都会统一返回ModelAndView对象，其中包含了页面view对象信息和向域对象model中共享的数据</p>
</li>
<li><p>通过ServletAPI向request域共享对象</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testServletAPI&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testServletAPI</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,servletAPI&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>thymeleaf/index页面</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/success&#125;&quot;</span>&gt;</span>request域测试<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>thymeleaf/success页面</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-3-使用ModelAndView向request域对象共享数据"><a href="#5-3-使用ModelAndView向request域对象共享数据" class="headerlink" title="5.3 使用ModelAndView向request域对象共享数据"></a>5.3 使用ModelAndView向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//返回ModelAndView提交前端控制器进行处理</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/testModelAndView&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">testModelAndView</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ModelAndView有Model和View的功能</span></span><br><span class="line"><span class="comment">     * Model主要用于向请求域共享数据</span></span><br><span class="line"><span class="comment">     * View主要用于设置视图，实现页面跳转</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ModelAndView mav = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    <span class="comment">//向请求域共享数据</span></span><br><span class="line">    mav.addObject(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,ModelAndView&quot;</span>);</span><br><span class="line">    <span class="comment">//设置视图，实现页面跳转</span></span><br><span class="line">    mav.setViewName(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-使用Model向request域对象共享数据"><a href="#5-4-使用Model向request域对象共享数据" class="headerlink" title="5.4 使用Model向request域对象共享数据"></a>5.4 使用Model向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModel&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModel</span><span class="params">(Model model)</span></span>&#123;</span><br><span class="line">    model.addAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,Model&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-5-使用map向request域对象共享数据"><a href="#5-5-使用map向request域对象共享数据" class="headerlink" title="5.5 使用map向request域对象共享数据"></a>5.5 使用map向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testMap&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span></span>&#123;</span><br><span class="line">    map.put(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,Map&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-6-使用ModelMap向request域对象共享数据"><a href="#5-6-使用ModelMap向request域对象共享数据" class="headerlink" title="5.6 使用ModelMap向request域对象共享数据"></a>5.6 使用ModelMap向request域对象共享数据</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testModelMap&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelMap</span><span class="params">(ModelMap modelMap)</span></span>&#123;</span><br><span class="line">    modelMap.addAttribute(<span class="string">&quot;testScope&quot;</span>, <span class="string">&quot;hello,ModelMap&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-7-Model、ModelMap、Map的关系"><a href="#5-7-Model、ModelMap、Map的关系" class="headerlink" title="5.7 Model、ModelMap、Map的关系"></a>5.7 Model、ModelMap、Map的关系</h2><ul>
<li>Model、ModelMap、Map类型的参数其实本质上都是 BindingAwareModelMap 类型的</li>
<li>BindingAwareModelMap可以实例化Model、ModelMap、Map</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/map.png" class="" title="map">
<h2 id="5-8-向session域共享数据"><a href="#5-8-向session域共享数据" class="headerlink" title="5.8 向session域共享数据"></a>5.8 向session域共享数据</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testSession&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testSession</span><span class="params">(HttpSession session)</span></span>&#123;</span><br><span class="line">    session.setAttribute(<span class="string">&quot;testSessionScope&quot;</span>, <span class="string">&quot;hello,session&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问session域的共享数据</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-9-向application域共享数据"><a href="#5-9-向application域共享数据" class="headerlink" title="5.9 向application域共享数据"></a>5.9 向application域共享数据</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testApplication&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testApplication</span><span class="params">(HttpSession session)</span></span>&#123;</span><br><span class="line">	ServletContext application = session.getServletContext();</span><br><span class="line">    application.setAttribute(<span class="string">&quot;testApplicationScope&quot;</span>, <span class="string">&quot;hello,application&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问application域的共享数据</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;application.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="六、SpringMVC视图"><a href="#六、SpringMVC视图" class="headerlink" title="六、SpringMVC视图"></a>六、SpringMVC视图</h1><h2 id="6-1-介绍"><a href="#6-1-介绍" class="headerlink" title="6.1 介绍"></a>6.1 介绍</h2><ul>
<li>SpringMVC中的视图是View接口，视图的作用是渲染页面，将模型Model中的数据展示给用户</li>
<li>SpringMVC中的视图种类很多，默认有转发视图InternalResourceView和重定向视图RedirectView</li>
<li>当工程引入jstl的依赖，转发视图会自动转换为jstlView</li>
<li>若使用的视图技术为Thymeleaf，在SpringMVC的配置文件中配置了Thymeleaf的视图解析器，由此视图解析器解析之后得到的是ThymeleafView</li>
</ul>
<h2 id="6-2-请求转发和重定向"><a href="#6-2-请求转发和重定向" class="headerlink" title="6.2 请求转发和重定向"></a>6.2 请求转发和重定向</h2><ul>
<li>以下示例，客户端登录需要经过后端校验，然后进行页面跳转</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/forward.png" class="" title="forward">
<div class="table-container">
<table>
<thead>
<tr>
<th>区别</th>
<th>请求转发</th>
<th>重定向</th>
</tr>
</thead>
<tbody>
<tr>
<td>地址栏是否改变</td>
<td>不变check.jsp</td>
<td>改变success.jsp</td>
</tr>
<tr>
<td>是否保留第一次请求的数据</td>
<td>保留</td>
<td>不保留</td>
</tr>
<tr>
<td>请求次数</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>跳转发生的位置</td>
<td>服务端</td>
<td>客户端发出的第二次跳转</td>
</tr>
</tbody>
</table>
</div>
<h3 id="6-2-1-请求转发和重定向的使用情况"><a href="#6-2-1-请求转发和重定向的使用情况" class="headerlink" title="6.2.1 请求转发和重定向的使用情况"></a>6.2.1 请求转发和重定向的使用情况</h3><ul>
<li>请求转发时，如果是一个表单提交数据（如用户登录），地址栏会保持在check<ul>
<li>这时如果用户刷新页面，就会出现用户需要重新提交表单的情况</li>
</ul>
</li>
<li>对于需要频繁的提交数据的情况，使用请求转发就又可能出现重复提交数据的情况</li>
</ul>
<h3 id="6-2-2-示例"><a href="#6-2-2-示例" class="headerlink" title="6.2.2 示例"></a>6.2.2 示例</h3><h4 id="（1）分析"><a href="#（1）分析" class="headerlink" title="（1）分析"></a>（1）分析</h4><ul>
<li>写了一个index登录表单，success和error页面，比较下请求转发和重定向的区别</li>
<li>index用户登录表单发起/check，地址栏先显示/check，后端处理请求</li>
<li>注：请求转发和重定向都要写出对应的请求方法，比如下面的/success和/error都需要写出来，如下图：<ul>
<li>从图中可以看到，请求转发是在服务器内部发生请求的调用，/check-&gt;/error</li>
<li>重定向方式是浏览器行为，浏览器会重新发起一次请求才能进行页面的跳转</li>
</ul>
</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/for.png" class="" title="for">
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/re.png" class="" title="re">
<h4 id="（2）实现"><a href="#（2）实现" class="headerlink" title="（2）实现"></a>（2）实现</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShowController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/check&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">check</span><span class="params">(String username,String pwd)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(username.equals(<span class="string">&quot;zs&quot;</span>) &amp;&amp; pwd.equals(<span class="string">&quot;123123&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;forward:/success&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;forward:/error&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/success&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">success</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/error&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">error</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-3-小结"><a href="#6-2-3-小结" class="headerlink" title="6.2.3 小结"></a>6.2.3 小结</h3><ul>
<li>如果当前请求依赖其他请求，就需要用到请求转发和重定向的方式</li>
<li>如果只是普通的页面跳转则不需要这些操作</li>
<li>SpringMVC有三个视图解析器：ThymeleafView、InternalResourceView（请求转发解析器）、RedirectView（重定向解析器）<ul>
<li>return返回值中不加任何前缀的字段会交给ThymeleafView解析</li>
<li>return返回值中加前缀forward:的字段会交给InternalResourceView解析</li>
<li>return返回值中加前缀redirect:的字段会交给RedirectView解析</li>
</ul>
</li>
</ul>
<h2 id="6-3-ThymeleafView"><a href="#6-3-ThymeleafView" class="headerlink" title="6.3 ThymeleafView"></a>6.3 ThymeleafView</h2><ul>
<li>当控制器方法中所设置的视图名称没有任何前缀时，此时的视图名称会被SpringMVC配置文件中所配置的视图解析器解析，视图名称拼接视图前缀和视图后缀所得到的最终路径，会通过转发的方式实现跳转</li>
</ul>
<h2 id="6-4-转发视图"><a href="#6-4-转发视图" class="headerlink" title="6.4 转发视图"></a>6.4 转发视图</h2><ul>
<li>SpringMVC中默认的转发视图是InternalResourceView</li>
<li>SpringMVC中创建转发视图的情况：<ul>
<li>当控制器方法中所设置的视图名称以”forward:”为前缀时，创建InternalResourceView视图，此时的视图名称不会被SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀”forward:”去掉，剩余部分作为最终路径通过转发的方式实现跳转</li>
</ul>
</li>
<li>示例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testForward&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testForward</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;forward:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-5-重定向视图"><a href="#6-5-重定向视图" class="headerlink" title="6.5 重定向视图"></a>6.5 重定向视图</h2><ul>
<li><p>SpringMVC中默认的重定向视图是RedirectView</p>
</li>
<li><p>当控制器方法中所设置的视图名称以”redirect:”为前缀时，创建RedirectView视图，此时的视图名称不会被SpringMVC配置文件中所配置的视图解析器解析，而是会将前缀”redirect:”去掉，剩余部分作为最终路径通过重定向的方式实现跳转</p>
</li>
<li>示例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRedirect&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRedirect</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/testHello&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>重定向视图在解析时，会先将redirect:前缀去掉，然后会判断剩余部分是否以/开头，若是则会自动拼接上下文路径</p>
</blockquote>
<h2 id="6-6-视图控制器view-controller"><a href="#6-6-视图控制器view-controller" class="headerlink" title="6.6 视图控制器view-controller"></a>6.6 视图控制器view-controller</h2><ul>
<li>当控制器方法中，仅仅用来实现页面跳转，即只需要设置视图名称时，可以将处理器方法使用view-controller标签进行表示</li>
<li>需要在springMVC.xml中添加</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	path：设置处理的请求地址</span></span><br><span class="line"><span class="comment">	view-name：设置请求地址所对应的视图名称</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:view-controller</span> <span class="attr">path</span>=<span class="string">&quot;/testView&quot;</span> <span class="attr">view-name</span>=<span class="string">&quot;success&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:view-controller</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>当SpringMVC中设置任何一个view-controller时，其他控制器中的请求映射将全部失效，此时需要在SpringMVC的核心配置文件（springMVC.xml）中设置开启mvc注解驱动的标签：</p>
<p>​    <mvc:annotation-driven /></p>
</blockquote>
<h1 id="七、RESTful"><a href="#七、RESTful" class="headerlink" title="七、RESTful"></a>七、RESTful</h1><h2 id="7-1-RESTFul简介"><a href="#7-1-RESTFul简介" class="headerlink" title="7.1 RESTFul简介"></a>7.1 RESTFul简介</h2><ul>
<li>全称：Representational State Transfer，表现层状态转移</li>
</ul>
<h2 id="7-2-RESTFul的实现"><a href="#7-2-RESTFul的实现" class="headerlink" title="7.2 RESTFul的实现"></a>7.2 RESTFul的实现</h2><ul>
<li>RESTFul风格的URL请求地址</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>操作</th>
<th>传统方式</th>
<th>REST风格</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询</td>
<td>getUserById?id=1</td>
<td>user/1</td>
</tr>
<tr>
<td>保存</td>
<td>saveUser</td>
<td>user</td>
</tr>
<tr>
<td>删除</td>
<td>deleteUser?id=1</td>
<td>user/1</td>
</tr>
<tr>
<td>更新</td>
<td>updateUser</td>
<td>user</td>
</tr>
</tbody>
</table>
</div>
<h2 id="7-3-PUT和DELETE请求处理"><a href="#7-3-PUT和DELETE请求处理" class="headerlink" title="7.3 PUT和DELETE请求处理"></a>7.3 PUT和DELETE请求处理</h2><h3 id="7-3-1-简介"><a href="#7-3-1-简介" class="headerlink" title="7.3.1 简介"></a>7.3.1 简介</h3><ul>
<li>由于浏览器只支持发送get和post方式的请求，那么该如何发送put和delete请求呢？</li>
<li>SpringMVC 提供了 <strong>HiddenHttpMethodFilter</strong> 帮助我们<strong>将 POST 请求转换为 DELETE 或 PUT 请求</strong></li>
</ul>
<h3 id="7-3-2-HiddenHttpMethodFilter配置"><a href="#7-3-2-HiddenHttpMethodFilter配置" class="headerlink" title="7.3.2 HiddenHttpMethodFilter配置"></a>7.3.2 HiddenHttpMethodFilter配置</h3><ul>
<li>在web.xml中过滤器中注册HiddenHttpMethodFilter</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>配置完HiddenHttpMethodFilter之后，如果是用表单进行修改，需要如下设置</li>
<li><strong>HiddenHttpMethodFilter</strong> 处理put和delete请求的条件：<ul>
<li>当前请求的请求方式必须为post</li>
<li>当前请求必须传输请求参数_method</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--修改用户信息表单，method必须指定为post--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	配置完过滤器后一定要在表单下添加_method字段，交给后端过滤器进行处理</span></span><br><span class="line"><span class="comment">	在value中指定修改操作所确定的PUT请求</span></span><br><span class="line"><span class="comment">	--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;_method&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PUT&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-3-小结"><a href="#7-3-3-小结" class="headerlink" title="7.3.3 小结"></a>7.3.3 小结</h3><ul>
<li>过滤器的执行顺序：当配置有多个过滤器时，SpringMVC会按照filter-mapping的编写顺序进行配置</li>
<li>对于之前写的CharacterEncodingFilter，如果前面写了处理请求的其他过滤器，那么处理编码的过滤器就会<strong>失效</strong>，所以我们要先配置编码过滤器，再编写请求过滤器</li>
</ul>
<h2 id="7-4-RESTFul案例"><a href="#7-4-RESTFul案例" class="headerlink" title="7.4 RESTFul案例"></a>7.4 RESTFul案例</h2><h3 id="7-4-2-静态资源访问"><a href="#7-4-2-静态资源访问" class="headerlink" title="7.4.2 静态资源访问"></a>7.4.2 静态资源访问</h3><ul>
<li>springMVC.xml中没有配置静态资源时，在static目录中存放的css和js等静态文件就不会被访问到，前端就不会展示静态资源效果</li>
<li>主要原因的SpringMVC的DispatchServlet找不到静态资源文件，所以需要配置springMVC.xml开启默认DefaultServlet来访问静态资源，这样在浏览器的地址栏中就可以访问到静态资源文件了<ul>
<li>tomcat的配置目录conf中也有web.xml，里面就配置了DefaultServlet</li>
</ul>
</li>
<li>必须开启静态资源的访问才能保证静态资源能够被正确访问到，在springMVC.xml中添加如下标签</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--开放对静态资源的访问--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--开启mvc注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>同时需要注意的是，<strong>mvc注解驱动</strong>也要同时开启，不然控制器请求会全部被默认的Servlet获取到</li>
<li>配置完两个标签后，前端请求会先被DispatchServlet获取到，DispatchServlet处理不了，就会把请求交给DefaultServlet处理，DefaultServlet再处理不了，浏览器就会报404</li>
</ul>
<h1 id="八、HttpMessageConverter报文信息转换器"><a href="#八、HttpMessageConverter报文信息转换器" class="headerlink" title="八、HttpMessageConverter报文信息转换器"></a>八、HttpMessageConverter报文信息转换器</h1><h2 id="8-1-简介"><a href="#8-1-简介" class="headerlink" title="8.1 简介"></a>8.1 简介</h2><ul>
<li>HttpMessageConverter，报文信息转换器，将请求报文转换为Java对象，或将Java对象转换为响应报文</li>
<li>HttpMessageConverter提供了两个注解和两个类型<ul>
<li>注解：@RequestBody，@ResponseBody</li>
<li>类型：RequestEntity，ResponseEntity</li>
</ul>
</li>
<li>RequestEntity可以接收整个请求报文</li>
</ul>
<h2 id="8-2-RequestBody"><a href="#8-2-RequestBody" class="headerlink" title="8.2 @RequestBody"></a>8.2 @RequestBody</h2><ul>
<li>@RequestBody可以获取请求体，需要控制器设置一个形参</li>
<li>@RequestBody标识形参后，形参就可以获取到请求体的信息</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/testRequestBody&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestBody&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestBody</span><span class="params">(<span class="meta">@RequestBody</span> String requestBody)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestBody);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果：requestBody:username=admin&amp;password=123456</span></span><br></pre></td></tr></table></figure>
<h2 id="8-3-RequestEntity"><a href="#8-3-RequestEntity" class="headerlink" title="8.3 RequestEntity"></a>8.3 RequestEntity</h2><ul>
<li>RequestEntity是封装请求报文的一种类型，控制器以RequestEntity对象作为形参接收请求信息</li>
<li>RequestEntity有一些方法可以获取到请求信息<ul>
<li>getHeaders()：获取请求头信息</li>
<li>getBody()：获取请求体信息</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testRequestEntity&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestEntity</span><span class="params">(RequestEntity&lt;String&gt; requestEntity)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;requestHeader:&quot;</span>+requestEntity.getHeaders());</span><br><span class="line">    System.out.println(<span class="string">&quot;requestBody:&quot;</span>+requestEntity.getBody());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-4-ResponseBody"><a href="#8-4-ResponseBody" class="headerlink" title="8.4 @ResponseBody"></a>8.4 @ResponseBody</h2><ul>
<li>@ResponseBody用于标识一个控制器方法，可以将该方法的返回值直接作为响应报文的响应体响应到浏览器</li>
<li>以下控制器方法会直接在页面打印出”success”，而不是作为success页面进行显示</li>
<li>综上：@ResponseBody可以直接向浏览器响应数据，如果不使用该注解，则可以使用传统方式HttpServletResponse处理响应</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseBody&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testResponseBody</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-5-SpringMVC处理Json"><a href="#8-5-SpringMVC处理Json" class="headerlink" title="8.5 SpringMVC处理Json"></a>8.5 SpringMVC处理Json</h2><ul>
<li>SpringMVC并不能直接使用将ReponseBody注解的控制器方法的返回值直接转换为Json数据，必须依赖其他包完成Java对象到Json数据的转换</li>
</ul>
<h3 id="8-5-1-Jackson包"><a href="#8-5-1-Jackson包" class="headerlink" title="8.5.1 Jackson包"></a>8.5.1 Jackson包</h3><ul>
<li>导入Jackson依赖</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在SpringMVC的核心配置文件中开启mvc注解驱动，此时在HandlerAdaptor中会自动装配一个消息转换器：MappingJackson2HttpMessageConverter，可以将响应到浏览器的Java对象转换为<strong>Json格式的字符串</strong>，注意不是Json对象</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在处理器方法上使用@ResponseBody注解进行标识</li>
<li>将Java对象直接作为控制器方法的返回值返回，就会自动转换为Json格式的字符串</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testResponseUser&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">testResponseUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="number">1001</span>,<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;123456&quot;</span>,<span class="number">23</span>,<span class="string">&quot;男&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 浏览器响应结果：&#123;&quot;id&quot;:1001,&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;,&quot;age&quot;:23,&quot;sex&quot;:&quot;男&quot;&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-6-RestController注解"><a href="#8-6-RestController注解" class="headerlink" title="8.6 @RestController注解"></a>8.6 @RestController注解</h2><ul>
<li>@RestController注解是springMVC提供的一个复合注解，整合了<strong>@Controller和@ResponseBody</strong>两个注解，标识在控制器的类上，就相当于为类添加了@Controller注解，并且为其中的每个方法添加了<strong>@ResponseBody</strong>注解</li>
</ul>
<h2 id="8-7-ResponseEntity"><a href="#8-7-ResponseEntity" class="headerlink" title="8.7 ResponseEntity"></a>8.7 ResponseEntity</h2><ul>
<li>ResponseEntity用于控制器方法的返回值类型，该控制器方法的返回值就是响应到浏览器的响应报文</li>
<li>可以实现<strong>文件下载</strong></li>
</ul>
<h1 id="九、文件上传和下载"><a href="#九、文件上传和下载" class="headerlink" title="九、文件上传和下载"></a>九、文件上传和下载</h1><h2 id="9-1-文件下载"><a href="#9-1-文件下载" class="headerlink" title="9.1 文件下载"></a>9.1 文件下载</h2><ul>
<li>使用ResponseEntity实现下载文件的功能</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testDown&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获取ServletContext对象</span></span><br><span class="line">    ServletContext servletContext = session.getServletContext();</span><br><span class="line">    <span class="comment">//获取服务器中文件的真实路径，即项目resources目录下的文件地址</span></span><br><span class="line">    String realPath = servletContext.getRealPath(<span class="string">&quot;/static/img/1.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//创建输入流</span></span><br><span class="line">    InputStream is = <span class="keyword">new</span> FileInputStream(realPath);</span><br><span class="line">    <span class="comment">//创建字节数组</span></span><br><span class="line">    <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[is.available()];</span><br><span class="line">    <span class="comment">//将流读到字节数组中</span></span><br><span class="line">    is.read(bytes);</span><br><span class="line">    <span class="comment">//创建HttpHeaders对象设置响应头信息</span></span><br><span class="line">    MultiValueMap&lt;String, String&gt; headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">    <span class="comment">//设置要下载方式以及下载文件的名字</span></span><br><span class="line">    headers.add(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=1.jpg&quot;</span>);</span><br><span class="line">    <span class="comment">//设置响应状态码</span></span><br><span class="line">    HttpStatus statusCode = HttpStatus.OK;</span><br><span class="line">    <span class="comment">//创建ResponseEntity对象</span></span><br><span class="line">    ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; responseEntity = <span class="keyword">new</span> ResponseEntity&lt;&gt;(bytes, headers, statusCode);</span><br><span class="line">    <span class="comment">//关闭输入流</span></span><br><span class="line">    is.close();</span><br><span class="line">    <span class="keyword">return</span> responseEntity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-2-文件上传"><a href="#9-2-文件上传" class="headerlink" title="9.2 文件上传"></a>9.2 文件上传</h2><ul>
<li>文件上传要求form表单的请求方式必须为post，并且添加属性enctype=”multipart/form-data”</li>
<li>SpringMVC中将上传的文件封装到MultipartFile对象中，通过此对象可以获取文件相关信息</li>
</ul>
<h3 id="9-2-1-导入依赖"><a href="#9-2-1-导入依赖" class="headerlink" title="9.2.1 导入依赖"></a>9.2.1 导入依赖</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-2-SpringMVC添加配置"><a href="#9-2-2-SpringMVC添加配置" class="headerlink" title="9.2.2 SpringMVC添加配置"></a>9.2.2 SpringMVC添加配置</h3><ul>
<li>必须给这个bean配置id属性”multipartResolver” ，否则这个bean就访问不到</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--必须通过文件解析器的解析才能将文件转换为MultipartFile对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="9-2-3-控制器方法"><a href="#9-2-3-控制器方法" class="headerlink" title="9.2.3 控制器方法"></a>9.2.3 控制器方法</h3><ul>
<li>如果不处理重名情况，当重新上传时会覆盖掉原来上传的重名的文件，这不是我们想要的情况，所以要通过UUID处理重名的情况，为文件重命名</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testUp&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testUp</span><span class="params">(MultipartFile photo, HttpSession session)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取上传的文件的文件名</span></span><br><span class="line">    String fileName = photo.getOriginalFilename();</span><br><span class="line">    <span class="comment">//处理文件重名问题，获取文件扩展名，包括&quot;.&quot;</span></span><br><span class="line">    String hzName = fileName.substring(fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">    fileName = UUID.randomUUID().toString() + hzName;</span><br><span class="line">    <span class="comment">//获取服务器中photo目录的路径</span></span><br><span class="line">    ServletContext servletContext = session.getServletContext();</span><br><span class="line">    String photoPath = servletContext.getRealPath(<span class="string">&quot;photo&quot;</span>);</span><br><span class="line">    File file = <span class="keyword">new</span> File(photoPath);</span><br><span class="line">    <span class="keyword">if</span>(!file.exists())&#123;</span><br><span class="line">        file.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// File.separator为文件分隔符</span></span><br><span class="line">    String finalPath = photoPath + File.separator + fileName;</span><br><span class="line">    <span class="comment">//实现上传功能</span></span><br><span class="line">    photo.transferTo(<span class="keyword">new</span> File(finalPath));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十、拦截器"><a href="#十、拦截器" class="headerlink" title="十、拦截器"></a>十、拦截器</h1><h2 id="11-1-过滤器与拦截器"><a href="#11-1-过滤器与拦截器" class="headerlink" title="11.1 过滤器与拦截器"></a>11.1 过滤器与拦截器</h2><img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/Interceptor.png" class="" title="interceptor">
<h2 id="11-2-拦截器配置"><a href="#11-2-拦截器配置" class="headerlink" title="11.2 拦截器配置"></a>11.2 拦截器配置</h2><ul>
<li>创建拦截器类FirstInterceptor，并重写三个方法<ul>
<li>preHandle()</li>
<li>postHandle()</li>
<li>afterCompletion()</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在springMVC配置文件中注入我们创建的拦截器类<ul>
<li>方式一和方式二都可实现拦截器的注入</li>
<li>/**：表示拦截所有请求，包括/user/add、/user</li>
<li>/*：表示拦截所有根请求下的请求，如/user、/add，不包括/user/add</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--方式一，这里的bean名称就是我们配置的拦截器类--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--方式二--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.atguigu.interceptor.FirstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>或者直接在springMVC配置文件中配置<strong>拦截和放行的请求</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--拦截的请求--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--放行的请求--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">&quot;/testRequestEntity&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--拦截器类还是要配置的--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">&quot;firstInterceptor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ref</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="11-3-拦截器方法"><a href="#11-3-拦截器方法" class="headerlink" title="11.3 拦截器方法"></a>11.3 拦截器方法</h2><ul>
<li><p>preHandle：控制器方法执行之前执行preHandle()，其boolean类型的返回值表示是否拦截或放行，返回true为放行，即调用控制器方法；返回false表示拦截，即不调用控制器方法</p>
</li>
<li><p>postHandle：控制器方法执行之后执行postHandle()</p>
</li>
<li><p>afterComplation：处理完视图和模型数据，渲染视图完毕之后执行afterComplation()</p>
</li>
</ul>
<h2 id="11-4-拦截器执行顺序"><a href="#11-4-拦截器执行顺序" class="headerlink" title="11.4 拦截器执行顺序"></a>11.4 拦截器执行顺序</h2><ul>
<li>当我们创建了多个拦截器类，它们拦截了相同的请求，那么处理的顺序是怎么样的，需要我们了解下</li>
</ul>
<h3 id="11-4-1-每个拦截器的preHandle-都返回true"><a href="#11-4-1-每个拦截器的preHandle-都返回true" class="headerlink" title="11.4.1 每个拦截器的preHandle()都返回true"></a>11.4.1 每个拦截器的preHandle()都返回true</h3><ul>
<li>我们在<strong>springMVC</strong>中配置拦截器的顺序就是多个拦截器执行的顺序</li>
<li>拦截器中的preHandle()会按照配置的顺序执行，而postHandle()和afterComplation()会按照配置的反序执行，如下：</li>
</ul>
<img src="/2022/04/03/SpringMVC%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/ic.png" class="" title="ic">
<ul>
<li>原理：在源码中，SpringMVC为每个拦截器提供了一个索引InterceptorIndex<ul>
<li>当拦截器拦截请求时，是顺序遍历拦截器并执行preHandle()方法，InterceptorIndex遍历一遍始终保存上一个拦截器的索引值，本质上是顺序遍历的自增的i值</li>
<li>当执行postHandle()和AfterCompletion()时，则根据InterceptorIndex的值进行反向遍历（从大到小），因此postHandle()和AfterCompletion的执行顺序是反向的</li>
</ul>
</li>
</ul>
<h3 id="11-4-2-某个拦截器的preHandle-返回了false"><a href="#11-4-2-某个拦截器的preHandle-返回了false" class="headerlink" title="11.4.2 某个拦截器的preHandle()返回了false"></a>11.4.2 某个拦截器的preHandle()返回了false</h3><ul>
<li>preHandle()返回false的拦截器<strong>之前的拦截器</strong>的preHandle()和afterComplation()都会执行，但postHandle()不会执行</li>
<li>原理：假设有5个拦截器，第3个拦截器prehandle()返回false对请求进行拦截<ul>
<li>顺序执行到第3个拦截器的preHandle()时返回false，SpringMVC经过判断后，则直接根据InterceptorIndex去处理第3个拦截器<strong>之前的拦截器</strong>的AfterCompletion()方法，而不去执行postHandle()方法，并直接return，并不执行视图渲染</li>
</ul>
</li>
</ul>
<h1 id="十一、异常处理"><a href="#十一、异常处理" class="headerlink" title="十一、异常处理"></a>十一、异常处理</h1><h2 id="11-1-xml配置文件配置"><a href="#11-1-xml配置文件配置" class="headerlink" title="11.1 xml配置文件配置"></a>11.1 xml配置文件配置</h2><ul>
<li>在springMVC配置文件中进行配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionMappings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">        	<span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        		properties的键表示处理器方法执行过程中出现的异常</span></span><br><span class="line"><span class="comment">        		properties的值表示若出现指定异常时，设置一个新的视图名称，跳转到指定页面</span></span><br><span class="line"><span class="comment">				error为指定跳转的视图名称，即出现ArithmeticException异常就会跳转到error页面</span></span><br><span class="line"><span class="comment">        	--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;java.lang.ArithmeticException&quot;</span>&gt;</span>error<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    	exceptionAttribute属性设置一个属性名，将出现的异常信息在请求域（默认）中进行共享，在页面输出th:text=&quot;$&#123;ex&#125;&quot;的信息时，就会在页面打印出异常信息</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;exceptionAttribute&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="11-2-注解配置异常"><a href="#11-2-注解配置异常" class="headerlink" title="11.2 注解配置异常"></a>11.2 注解配置异常</h2><ul>
<li>异常控制器，写在controller层中</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//@ControllerAdvice将当前类标识为异常处理的组件</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@ExceptionHandler用于设置所标识方法处理的异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="comment">//ex表示当前请求处理中出现的异常对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleArithmeticException</span><span class="params">(Exception ex, Model model)</span></span>&#123;</span><br><span class="line">        <span class="comment">// model中添加错误信息，方便前端显示</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;ex&quot;</span>, ex);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;error&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十二、注解配置"><a href="#十二、注解配置" class="headerlink" title="十二、注解配置"></a>十二、注解配置</h1><h2 id="12-1-创建初始化类，代替web-xml"><a href="#12-1-创建初始化类，代替web-xml" class="headerlink" title="12.1 创建初始化类，代替web.xml"></a>12.1 创建初始化类，代替web.xml</h2><ul>
<li>创建两个配置类<ul>
<li>SpringConfig</li>
<li>WebConfig</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebInit</span> <span class="keyword">extends</span> <span class="title">AbstractAnnotationConfigDispatcherServletInitializer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定spring的配置类，需要创建SpringConfig类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Class[]&#123;SpringConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定SpringMVC的配置类，需要创建WebConfig类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Class[]&#123;WebConfig.class&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 指定DispatcherServlet的映射规则，即url-pattern</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加过滤器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">        CharacterEncodingFilter encodingFilter = <span class="keyword">new</span> CharacterEncodingFilter();</span><br><span class="line">        encodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        encodingFilter.setForceRequestEncoding(<span class="keyword">true</span>);</span><br><span class="line">        HiddenHttpMethodFilter hiddenHttpMethodFilter = <span class="keyword">new</span> HiddenHttpMethodFilter();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Filter[]&#123;encodingFilter, hiddenHttpMethodFilter&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12-2-创建SpringConfig配置类，代替Spring配置文件"><a href="#12-2-创建SpringConfig配置类，代替Spring配置文件" class="headerlink" title="12.2 创建SpringConfig配置类，代替Spring配置文件"></a>12.2 创建SpringConfig配置类，代替Spring配置文件</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfig</span> </span>&#123;</span><br><span class="line">	<span class="comment">//ssm整合之后，spring的配置信息写在此类中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12-3-创建WebConfig配置类，代替SpringMVC的配置文件"><a href="#12-3-创建WebConfig配置类，代替SpringMVC的配置文件" class="headerlink" title="12.3 创建WebConfig配置类，代替SpringMVC的配置文件"></a>12.3 创建WebConfig配置类，代替SpringMVC的配置文件</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//扫描组件</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.atguigu.mvc.controller&quot;)</span></span><br><span class="line"><span class="comment">//开启MVC注解驱动</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用默认的servlet处理静态资源</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureDefaultServletHandling</span><span class="params">(DefaultServletHandlerConfigurer configurer)</span> </span>&#123;</span><br><span class="line">        configurer.enable();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置文件上传解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> CommonsMultipartResolver <span class="title">multipartResolver</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CommonsMultipartResolver();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置拦截器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        FirstInterceptor firstInterceptor = <span class="keyword">new</span> FirstInterceptor();</span><br><span class="line">        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//配置视图控制</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*@Override</span></span><br><span class="line"><span class="comment">    public void addViewControllers(ViewControllerRegistry registry) &#123;</span></span><br><span class="line"><span class="comment">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//配置异常映射</span></span><br><span class="line">    <span class="comment">/*@Override</span></span><br><span class="line"><span class="comment">    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) &#123;</span></span><br><span class="line"><span class="comment">        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();</span></span><br><span class="line"><span class="comment">        Properties prop = new Properties();</span></span><br><span class="line"><span class="comment">        prop.setProperty(&quot;java.lang.ArithmeticException&quot;, &quot;error&quot;);</span></span><br><span class="line"><span class="comment">        //设置异常映射</span></span><br><span class="line"><span class="comment">        exceptionResolver.setExceptionMappings(prop);</span></span><br><span class="line"><span class="comment">        //设置共享异常信息的键</span></span><br><span class="line"><span class="comment">        exceptionResolver.setExceptionAttribute(&quot;ex&quot;);</span></span><br><span class="line"><span class="comment">        resolvers.add(exceptionResolver);</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//配置生成模板解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ITemplateResolver <span class="title">templateResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        WebApplicationContext webApplicationContext = ContextLoader.getCurrentWebApplicationContext();</span><br><span class="line">        <span class="comment">// ServletContextTemplateResolver需要一个ServletContext作为构造参数，可通过WebApplicationContext 的方法获得</span></span><br><span class="line">        ServletContextTemplateResolver templateResolver = <span class="keyword">new</span> ServletContextTemplateResolver(</span><br><span class="line">                webApplicationContext.getServletContext());</span><br><span class="line">        templateResolver.setPrefix(<span class="string">&quot;/WEB-INF/templates/&quot;</span>);</span><br><span class="line">        templateResolver.setSuffix(<span class="string">&quot;.html&quot;</span>);</span><br><span class="line">        templateResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        templateResolver.setTemplateMode(TemplateMode.HTML);</span><br><span class="line">        <span class="keyword">return</span> templateResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生成模板引擎并为模板引擎注入模板解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SpringTemplateEngine <span class="title">templateEngine</span><span class="params">(ITemplateResolver templateResolver)</span> </span>&#123;</span><br><span class="line">        SpringTemplateEngine templateEngine = <span class="keyword">new</span> SpringTemplateEngine();</span><br><span class="line">        templateEngine.setTemplateResolver(templateResolver);</span><br><span class="line">        <span class="keyword">return</span> templateEngine;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生成视图解析器并未解析器注入模板引擎</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewResolver <span class="title">viewResolver</span><span class="params">(SpringTemplateEngine templateEngine)</span> </span>&#123;</span><br><span class="line">        ThymeleafViewResolver viewResolver = <span class="keyword">new</span> ThymeleafViewResolver();</span><br><span class="line">        viewResolver.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        viewResolver.setTemplateEngine(templateEngine);</span><br><span class="line">        <span class="keyword">return</span> viewResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十三、SpringMVC执行流程"><a href="#十三、SpringMVC执行流程" class="headerlink" title="十三、SpringMVC执行流程"></a>十三、SpringMVC执行流程</h1>]]></content>
      <categories>
        <category>后端</category>
        <category>SSM框架</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>SpringMVC</tag>
      </tags>
  </entry>
  <entry>
    <title>Java面试宝典一</title>
    <url>/2022/04/03/Java%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E4%B8%80/</url>
    <content><![CDATA[<h1 id="一、Java基础"><a href="#一、Java基础" class="headerlink" title="一、Java基础"></a>一、Java基础</h1><h2 id="1-1、变量自增"><a href="#1-1、变量自增" class="headerlink" title="1.1、变量自增"></a>1.1、变量自增</h2><h3 id="1-1-1-示例"><a href="#1-1-1-示例" class="headerlink" title="1.1.1 示例"></a>1.1.1 示例</h3><ul>
<li>这种计算跟之前数据结构和算法学过的计算器一致，都是要维护一个栈，保存操作数，判断加减乘除运算符，最后栈中经过计算后只剩下一个数，就是我们需要的运算结果</li>
<li>Java也需要维护一个操作数栈，来计算我们的最终结果</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">i = i++;</span><br><span class="line"><span class="keyword">int</span> j = i++;</span><br><span class="line"><span class="keyword">int</span> k = i + ++i * i++;</span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span>+i);<span class="number">5</span></span><br><span class="line">System.out.println(<span class="string">&quot;j=&quot;</span>+j);<span class="number">2</span></span><br><span class="line">System.out.println(<span class="string">&quot;k=&quot;</span>+k);<span class="number">12</span></span><br></pre></td></tr></table></figure>
<h3 id="1-1-2-分析"><a href="#1-1-2-分析" class="headerlink" title="1.1.2 分析"></a>1.1.2 分析</h3><h4 id="（1）前两步"><a href="#（1）前两步" class="headerlink" title="（1）前两步"></a>（1）前两步</h4><ol>
<li>赋值操作更新局部变量表，变量操作会先将变量值压入操作数栈</li>
<li>自增操作会更新变量的局部变量表，但不会影响操作数栈的值，存在操作数就会把变量的值压入操作数栈中</li>
<li>赋值操作是把操作数栈的最终结果赋值给变量，也就是说i经过前两步后值为1</li>
</ol>
<img src="/2022/04/03/Java%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E4%B8%80/ij.png" class="" title="ij">
<h4 id="（2）第三步"><a href="#（2）第三步" class="headerlink" title="（2）第三步"></a>（2）第三步</h4><ul>
<li>后增操作：先赋值j，再自增i</li>
</ul>
<img src="/2022/04/03/Java%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E4%B8%80/ij2.png" class="" title="ij2">
<h4 id="（3）第四步"><a href="#（3）第四步" class="headerlink" title="（3）第四步"></a>（3）第四步</h4><img src="/2022/04/03/Java%E9%9D%A2%E8%AF%95%E5%AE%9D%E5%85%B8%E4%B8%80/ij3.png" class="" title="ij3">
<h3 id="1-1-3-小结"><a href="#1-1-3-小结" class="headerlink" title="1.1.3 小结"></a>1.1.3 小结</h3><ul>
<li><p>总的来说在运算的时候维护一个<strong>局部变量表</strong>和一个<strong>操作数栈</strong>，来<strong>保存</strong>和<strong>更新</strong>我们的数据</p>
</li>
<li><p>++i会<strong>先修改i保存到局部变量表中的值</strong>，再将<strong>自增后</strong>的值放入到操作数栈中</p>
</li>
<li>i++与++i相反，会<strong>先将i的值放入到操作数栈中</strong>，而后再更新i的局部变量表</li>
<li>赋值操作是在操作数栈计算完之后才执行的</li>
</ul>
<h2 id="1-2-Java面向对象"><a href="#1-2-Java面向对象" class="headerlink" title="1.2 Java面向对象"></a>1.2 Java面向对象</h2><ul>
<li>面向对象三大特征：封装、继承、多态</li>
</ul>
<h1 id="二、单例设计模式"><a href="#二、单例设计模式" class="headerlink" title="二、单例设计模式"></a>二、单例设计模式</h1><h2 id="2-1-介绍"><a href="#2-1-介绍" class="headerlink" title="2.1 介绍"></a>2.1 介绍</h2><ul>
<li>Java的设计模式之一</li>
<li>解释：某个类在整个系统中只能有一个实例对象可以被获取和使用的代码模式</li>
<li>如：JVM运行环境的Runtime类</li>
</ul>
<h2 id="2-2-要点"><a href="#2-2-要点" class="headerlink" title="2.2 要点"></a>2.2 要点</h2><ul>
<li>单例类只能有一个实例<ul>
<li>构造器私有</li>
</ul>
</li>
<li>单例类必须自行创建这个实例<ul>
<li>类中使用静态变量保存这个唯一实例</li>
</ul>
</li>
<li>单例类必须向整个系统提供这个实例<ul>
<li>对外提供获取该实例对象的方法</li>
</ul>
</li>
</ul>
<h2 id="2-3-实现方式"><a href="#2-3-实现方式" class="headerlink" title="2.3 实现方式"></a>2.3 实现方式</h2><h3 id="2-3-1-饿汉式"><a href="#2-3-1-饿汉式" class="headerlink" title="2.3.1 饿汉式"></a>2.3.1 饿汉式</h3><ul>
<li>直接创建对象，不管系统是否需要，先创建再说</li>
<li>不存在线程安全</li>
<li>方式：<ul>
<li>直接实例化饿汉式</li>
<li>枚举式</li>
<li>静态代码饿汉式</li>
</ul>
</li>
</ul>
<h4 id="（1）直接实例化"><a href="#（1）直接实例化" class="headerlink" title="（1）直接实例化"></a>（1）直接实例化</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 饿汉式：直接创建对象，加载创建这个类时，就会创建对象</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* （1）构造器私有化</span></span><br><span class="line"><span class="comment">* （2）自行创建，并且用静态变量保存</span></span><br><span class="line"><span class="comment">* （3）向外提供实例</span></span><br><span class="line"><span class="comment">* （4）强调单例，使用final修饰，将其作为一个常量</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">// final使变量无法修改</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> SingletonTest INSTANCE = <span class="keyword">new</span> SingletonTest();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 私有化构造函数</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonTest</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（4）枚举式"><a href="#（4）枚举式" class="headerlink" title="（4）枚举式"></a>（4）枚举式</h4><ul>
<li>以枚举类的形式实现单例，并非对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 枚举类单例：表示该类型的对象是有限的几个</span></span><br><span class="line"><span class="comment">* 限定为一个就是单例</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">SingletonTest2</span> </span>&#123;</span><br><span class="line">    INSTANCE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//打印枚举实例</span></span><br><span class="line">        SingletonTest2 s = SingletonTest2.INSTANCE;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="（3）静态代码块式"><a href="#（3）静态代码块式" class="headerlink" title="（3）静态代码块式"></a>（3）静态代码块式</h4><ul>
<li>可以在静态代码块中添加一些操作，比较灵活</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonTest3</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingletonTest3 INSTANCE;</span><br><span class="line">    <span class="keyword">private</span> String info;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        INSTANCE = <span class="keyword">new</span> SingletonTest3(<span class="string">&quot;info&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SingletonTest3</span><span class="params">(String info)</span></span>&#123;<span class="keyword">this</span>.info = info;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-2-懒汉式"><a href="#2-3-2-懒汉式" class="headerlink" title="2.3.2 懒汉式"></a>2.3.2 懒汉式</h3><ul>
<li>延迟创建对象，需要的时候才去创建对象，不需要则不创建</li>
<li>方式：<ul>
<li>线程不安全（单线程）</li>
<li>线程安全（多线程）</li>
<li>静态内部类形式（多线程）</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>后端</category>
        <category>面试</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>面试</tag>
      </tags>
  </entry>
  <entry>
    <title>SSM项目搭建</title>
    <url>/2022/04/07/SSM%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h1 id="一、常用依赖包"><a href="#一、常用依赖包" class="headerlink" title="一、常用依赖包"></a>一、常用依赖包</h1><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- spring-webmvc包 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- servlet-api --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- thymeleaf-spring5视图解析 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- mysql连接器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.27<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- junit单元测试 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- lombok插件快速生成get/set --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="二、环境配置"><a href="#二、环境配置" class="headerlink" title="二、环境配置"></a>二、环境配置</h1><h2 id="2-1-创建webapp"><a href="#2-1-创建webapp" class="headerlink" title="2.1 创建webapp"></a>2.1 创建webapp</h2><ul>
<li>在main目录下创建webapp目录<ul>
<li>创建webapp/WEB-INF</li>
<li>创建webapp/WEB-INF/templates</li>
<li>创建webapp/WEB-INF/web.xml</li>
</ul>
</li>
<li>web.xml配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  配置过滤器  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--配置过滤器，用于将前端表单的get/post请求转换为put/delete请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--  配置SpringMVC前端控制器，对浏览器发送的请求进行统一处理  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    配置SpringMVC配置文件的位置和名称，然后在reources中创建xml配置文件    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--    将前端控制器DispatcherServlet启动时间提前到服务器启动的时候    --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    提升第一次访问的速度    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            设置SpringMVC核心控制器所能处理的请求路径</span></span><br><span class="line"><span class="comment">            / 所匹配的请求可以是/login或.html/.css/.js等方式的请求路径</span></span><br><span class="line"><span class="comment">            但不匹配.jsp请求路径的请求</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-1-SpringMVC配置"><a href="#2-1-SpringMVC配置" class="headerlink" title="2.1 SpringMVC配置"></a>2.1 SpringMVC配置</h2><ul>
<li>自动扫描包要改成自己的包环境</li>
<li>配置Thymeleaf视图解析器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 自动扫描包，包命改成自己的包环境 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.personal&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置Thymeleaf视图解析器 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.view.ThymeleafViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;order&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateEngine&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.SpringTemplateEngine&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateResolver&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- 视图前缀 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/templates/&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">&lt;!-- 视图后缀 --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.html&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;templateMode&quot;</span> <span class="attr">value</span>=<span class="string">&quot;HTML5&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;characterEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-2-Mybatis配置"><a href="#2-2-Mybatis配置" class="headerlink" title="2.2 Mybatis配置"></a>2.2 Mybatis配置</h2><ul>
<li>创建resources/db.properties数据库配置文件</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/personalsystem?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">xxx</span></span><br></pre></td></tr></table></figure>
<ul>
<li>创建resources/mybatis.xml<ul>
<li>properties加载数据库配置文件标签不能少</li>
<li>mappers标签配置我们的dao层配置文件路径</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--显示开启全局缓存，默认是开启的--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--对应我们的xxxMapper.xml路径--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/personal/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>开启资源路径访问，请配置到pom.xml文件中，否则xxxMapper.xml无法被访问到而导致程序报错</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--  配置资源导出,防止dao层中的xml无法访问而报错  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3-创建实体类和Mapper"><a href="#2-3-创建实体类和Mapper" class="headerlink" title="2.3 创建实体类和Mapper"></a>2.3 创建实体类和Mapper</h2><h3 id="2-3-1-创建实体类"><a href="#2-3-1-创建实体类" class="headerlink" title="2.3.1 创建实体类"></a>2.3.1 创建实体类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.personal.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer role;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-3-2-创建Mapper"><a href="#2-3-2-创建Mapper" class="headerlink" title="2.3.2 创建Mapper"></a>2.3.2 创建Mapper</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--绑定命名空间,绑定自己的dao层接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.personal.dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.personal.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        select * from personalsystem.user;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="三、日志"><a href="#三、日志" class="headerlink" title="三、日志"></a>三、日志</h1>]]></content>
      <categories>
        <category>后端</category>
        <category>SSM框架</category>
      </categories>
      <tags>
        <tag>后端</tag>
        <tag>SSM</tag>
      </tags>
  </entry>
  <entry>
    <title>论文写作1-知识图谱各方向研究进展</title>
    <url>/2022/04/11/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C1-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%90%84%E6%96%B9%E5%90%91%E7%A0%94%E7%A9%B6%E8%BF%9B%E5%B1%95/</url>
    <content><![CDATA[<h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><h1 id="二、知识表示学习"><a href="#二、知识表示学习" class="headerlink" title="二、知识表示学习"></a>二、知识表示学习</h1><h2 id="2-1-TransE模型"><a href="#2-1-TransE模型" class="headerlink" title="2.1 TransE模型"></a>2.1 TransE模型</h2>]]></content>
      <categories>
        <category>知识图谱</category>
        <category>论文写作</category>
      </categories>
      <tags>
        <tag>知识图谱</tag>
        <tag>论文</tag>
      </tags>
  </entry>
  <entry>
    <title>Springboot基础大全</title>
    <url>/2022/04/17/Springboot%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><ul>
<li><em>Spring Boot</em>是由Pivotal团队提供的全新框架，其设计目的是用来简化新Spring应用的初始搭建以及开发过程</li>
<li>特点：约定大于配置</li>
</ul>
<h1 id="二、快速创建Springboot-web应用"><a href="#二、快速创建Springboot-web应用" class="headerlink" title="二、快速创建Springboot web应用"></a>二、快速创建Springboot web应用</h1><h1 id="三、自动配置原理"><a href="#三、自动配置原理" class="headerlink" title="三、自动配置原理"></a>三、自动配置原理</h1><h2 id="3-1-pom依赖"><a href="#3-1-pom依赖" class="headerlink" title="3.1 pom依赖"></a>3.1 pom依赖</h2><ul>
<li>pom.xml文件的父依赖中有Springboot的所有依赖包</li>
<li>所有我们在导入依赖包时不需要亲自指定包的版本就可以导入包了</li>
</ul>
<h2 id="3-2-启动器"><a href="#3-2-启动器" class="headerlink" title="3.2 启动器"></a>3.2 启动器</h2><ul>
<li>如spring-boot-start-web，他就会帮我们自动导入web环境所有的依赖</li>
<li>springboot会将所有的功能场景都变成一个个的启动器</li>
</ul>
<h1 id="四、yaml配置文件"><a href="#四、yaml配置文件" class="headerlink" title="四、yaml配置文件"></a>四、yaml配置文件</h1><h2 id="4-1-基本配置"><a href="#4-1-基本配置" class="headerlink" title="4.1 基本配置"></a>4.1 基本配置</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/vue?useUnicode=true&amp;characterEncoding=utf8&amp;allowMultiQueries=true&amp;serverTimezone=GMT%2B8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment"># jpa配置</span></span><br><span class="line">  <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">hibernate:</span></span><br><span class="line">        <span class="attr">format_sql:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Mybatis配置</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># 配置XML映射文件中指定的实体类别名路径</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.demo3.pojo</span></span><br><span class="line">  <span class="comment"># 配置MyBatis的xml配置文件路径</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># 开启驼峰uName自动映射到u_name</span></span><br><span class="line">  <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印sql</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">ssm.app.mapper :</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure>
<h2 id="4-2-属性注入"><a href="#4-2-属性注入" class="headerlink" title="4.2 属性注入"></a>4.2 属性注入</h2><ul>
<li>使用yaml完成对对象的属性注入</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 与注解@ConfigurationProperties(prefix = &quot;user&quot;)的user对应</span></span><br><span class="line"><span class="attr">user:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">gaoyue</span></span><br><span class="line">  <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">  <span class="attr">age:</span> <span class="string">$&#123;random.int&#125;</span>	<span class="comment"># 使用$&#123;&#125;输入内置表达式</span></span><br><span class="line">  <span class="attr">pets:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line">  <span class="attr">friends:</span> &#123;<span class="attr">John:</span> <span class="string">China</span>, <span class="attr">Mary:</span> <span class="string">USA</span>&#125;	<span class="comment"># 注意:后必须有空格</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">$&#123;user.username&#125;_wancai</span>	<span class="comment">#表达式和字符拼接注入</span></span><br></pre></td></tr></table></figure>
<ul>
<li>注意需要导入以下依赖，否则报错：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>pojo类使用注解@ConfigurationProperties绑定配置文件，prefix为配置文件中的根变量名</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;user&quot;)</span>	<span class="comment">//这里的user对应配置文件的user</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; pets;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; friends;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-3-JSR303数据校验"><a href="#4-3-JSR303数据校验" class="headerlink" title="4.3 JSR303数据校验"></a>4.3 JSR303数据校验</h2><ul>
<li><p>数据校验是yaml配置文件才有的，这也是它比properties强大的地方</p>
</li>
<li><p>在对应类上加上注解@Validated，即可以对类中属性添加数据校验对应的注解，如果不满足数据校验的格式就会直接报错，包括以下几个：</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Null</td>
<td>限制对象只能为null</td>
</tr>
<tr>
<td>@NotNull</td>
<td>限制对象必须不为null</td>
</tr>
<tr>
<td>@AssertTrue</td>
<td>限制Boolean必须为true</td>
</tr>
<tr>
<td>@AssertFalse</td>
<td>限制Boolean必须为false</td>
</tr>
<tr>
<td>@Min(value)</td>
<td>验证Number和String对象是否大于等于指定的值</td>
</tr>
<tr>
<td>@Max(value)</td>
<td>验证Number和String对象是否小于等于指定的值</td>
</tr>
<tr>
<td>@DecimalMin(value)</td>
<td>验证Number和String对象是否大于等于指定的值，小数存在精度</td>
</tr>
<tr>
<td>@DecimalMax(value)</td>
<td>验证Number和String对象是否小于等于指定的值，小数存在精度</td>
</tr>
<tr>
<td>@Size(max,min)</td>
<td>验证对象（Array,Collection,Map,String）长度是否在给定的范围之内</td>
</tr>
<tr>
<td>@Digits</td>
<td>验证Number和String的构成是否合法</td>
</tr>
<tr>
<td>@Past</td>
<td>验证Date和Calendar对象是否在当前时间之前</td>
</tr>
<tr>
<td>@Future</td>
<td>验证Date和Calendar对象是否在当前时间之后</td>
</tr>
<tr>
<td>@Pattern(value)</td>
<td>限制String必须符合指定的正则表达式</td>
</tr>
<tr>
<td>@NotEmpty</td>
<td>验证注解的元素值不为null且不为空（字符串长度不为0、集合大小不为0）</td>
</tr>
<tr>
<td>@NotBlank</td>
<td>验证注解的元素值不为空（不为null、去除首位空格后长度为0），不同于@NotEmpty，只应用于字符串且在比较时会去除字符串的空格</td>
</tr>
<tr>
<td>@Email</td>
<td>验证注解的元素值是Email，也可以通过正则表达式和flag指定自定义的email格式</td>
</tr>
</tbody>
</table>
</div>
<h1 id="五、Web开发"><a href="#五、Web开发" class="headerlink" title="五、Web开发"></a>五、Web开发</h1><h2 id="5-1-静态资源分析"><a href="#5-1-静态资源分析" class="headerlink" title="5.1 静态资源分析"></a>5.1 静态资源分析</h2><ul>
<li>静态资源一般保存在以下几个路径，优先级resources&gt;public&gt;static<ul>
<li>webjars</li>
<li>resources/public</li>
<li>resources/resources</li>
<li>resources/static</li>
<li>/**</li>
</ul>
</li>
<li>以上的资源文件都可以通过“localhost:8080/文件名”访问到文件内容</li>
</ul>
<h2 id="5-2-Thymeleaf入门"><a href="#5-2-Thymeleaf入门" class="headerlink" title="5.2 Thymeleaf入门"></a>5.2 Thymeleaf入门</h2><ul>
<li>表达式：<ul>
<li>${expression}：取出后端传递的值</li>
<li>@{link url}：引用外部链接时，需把链接放到@{}中</li>
</ul>
</li>
</ul>
<h2 id="5-3-拦截器"><a href="#5-3-拦截器" class="headerlink" title="5.3 拦截器"></a>5.3 拦截器</h2><h3 id="5-3-1-创建拦截器配置类"><a href="#5-3-1-创建拦截器配置类" class="headerlink" title="5.3.1 创建拦截器配置类"></a>5.3.1 创建拦截器配置类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-2-注入拦截器"><a href="#5-3-2-注入拦截器" class="headerlink" title="5.3.2 注入拦截器"></a>5.3.2 注入拦截器</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> LoginInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>) <span class="comment">// 拦截的路径</span></span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/&quot;</span>,<span class="string">&quot;/index.html&quot;</span>);    <span class="comment">//放行的路径</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="六、连接数据库"><a href="#六、连接数据库" class="headerlink" title="六、连接数据库"></a>六、连接数据库</h1><h2 id="6-1-yaml配置"><a href="#6-1-yaml配置" class="headerlink" title="6.1 yaml配置"></a>6.1 yaml配置</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/vue?useUnicode=true&amp;characterEncoding=utf8&amp;allowMultiQueries=true&amp;serverTimezone=GMT%2B8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure>
<h2 id="6-2、整合Mybatis"><a href="#6-2、整合Mybatis" class="headerlink" title="6.2、整合Mybatis"></a>6.2、整合Mybatis</h2><h3 id="6-2-1-导入依赖包"><a href="#6-2-1-导入依赖包" class="headerlink" title="6.2.1 导入依赖包"></a>6.2.1 导入依赖包</h3><ul>
<li>导入Mybatis Spring Boot Start依赖包</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>版本要求：</li>
</ul>
<img src="/2022/04/17/Springboot%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/mybatis.png" class="" title="mybaits">
<h3 id="6-2-2-环境搭建"><a href="#6-2-2-环境搭建" class="headerlink" title="6.2.2 环境搭建"></a>6.2.2 环境搭建</h3><ul>
<li>@Mapper注解标注Mapper类</li>
<li>@Repository标注Dao层</li>
<li>创建xxxMapper.xml编写sql</li>
<li>yaml配置xxxMapper.xml的文件路径:</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Mybatis配置</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># 配置XML映射文件中指定的实体类别名路径</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.demo3.pojo</span></span><br><span class="line">  <span class="comment"># 配置MyBatis的xml配置文件路径</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># 开启驼峰uName自动映射到u_name</span></span><br><span class="line">  <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="七、认证与授权"><a href="#七、认证与授权" class="headerlink" title="七、认证与授权"></a>七、认证与授权</h1>]]></content>
      <categories>
        <category>后端</category>
        <category>Springboot</category>
      </categories>
      <tags>
        <tag>后端框架</tag>
        <tag>Springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记5-JenaApi</title>
    <url>/2022/04/18/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B05-JenaApi/</url>
    <content><![CDATA[<h1 id="一、基本使用"><a href="#一、基本使用" class="headerlink" title="一、基本使用"></a>一、基本使用</h1><h2 id="1-1-创建OWL模型"><a href="#1-1-创建OWL模型" class="headerlink" title="1.1 创建OWL模型"></a>1.1 创建OWL模型</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String personURI    = <span class="string">&quot;http://somewhere/JohnSmith&quot;</span>;</span><br><span class="line">String fullName     = <span class="string">&quot;John Smith&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// create an empty Model</span></span><br><span class="line">Model model = ModelFactory.createDefaultModel();</span><br><span class="line"></span><br><span class="line"><span class="comment">// create the resource，创建数据源</span></span><br><span class="line">Resource johnSmith = model.createResource(personURI);</span><br><span class="line"></span><br><span class="line"><span class="comment">// add the property,为数据源添加属性，第一个参数为属性名，第二个参数为属性值</span></span><br><span class="line">johnSmith.addProperty(VCARD.FN, fullName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取数据源中的属性迭代器</span></span><br><span class="line">StmtIterator stmtIterator = johnSmith.listProperties();</span><br><span class="line"><span class="keyword">while</span> (stmtIterator.hasNext())&#123;</span><br><span class="line">    Statement statement = stmtIterator.next();</span><br><span class="line">    System.out.println(statement);	<span class="comment">// 打印三元组</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">结果：</span></span><br><span class="line"><span class="comment">[http://somewhere/JohnSmith, http://www.w3.org/2001/vcard-rdf/3.0#FN, &quot;John Smith&quot;]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>OWL中所有的类都是自身的子类</li>
</ul>
<h2 id="1-2-Statement"><a href="#1-2-Statement" class="headerlink" title="1.2 Statement"></a>1.2 Statement</h2><ul>
<li>从1.1我们可以看到我们已经使用到了Statements来输出我们的属性三元组</li>
<li>具体的Statement有以下方法：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>nextStatement():Statement</td>
<td>从迭代器中获取一组三元组</td>
</tr>
<tr>
<td>getSubject():Resource</td>
<td>获取三元组的主语</td>
</tr>
<tr>
<td>getPredicate():Property</td>
<td>获取三元组的谓语</td>
</tr>
<tr>
<td>getObject():RDFNode</td>
<td>获取三元组的宾语</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>示例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从模型中获取到三元组迭代器（包含文档中所有的三元组信息）</span></span><br><span class="line">StmtIterator iter = model.listStatements();</span><br><span class="line"></span><br><span class="line"><span class="comment">// print out the predicate, subject and object of each statement</span></span><br><span class="line"><span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">    Statement stmt      = iter.nextStatement();  <span class="comment">// get next statement</span></span><br><span class="line">    Resource  subject   = stmt.getSubject();     <span class="comment">// get the subject</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Property可以用作之后获取属性值用（重要）</span></span><br><span class="line">    Property  predicate = stmt.getPredicate();   <span class="comment">// get the predicate</span></span><br><span class="line">    RDFNode   object    = stmt.getObject();      <span class="comment">// get the object</span></span><br><span class="line"></span><br><span class="line">    System.out.print(subject.toString());</span><br><span class="line">    System.out.print(<span class="string">&quot; &quot;</span> + predicate.toString() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 判断object是不是一个Resource对象</span></span><br><span class="line">    <span class="keyword">if</span> (object <span class="keyword">instanceof</span> Resource) &#123;</span><br><span class="line">       System.out.print(object.toString());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// object is a Literal对象</span></span><br><span class="line">        System.out.print(<span class="string">&quot; \&quot;&quot;</span> + object.toString() + <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot; .&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-3-写入RDF"><a href="#1-3-写入RDF" class="headerlink" title="1.3 写入RDF"></a>1.3 写入RDF</h2><ul>
<li>生成的模型可以直接写入输出流中java.io.OutputStream</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">model.write(System.out);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">写入结果：</span></span><br><span class="line"><span class="comment">subject: http://somewhere/JohnSmith</span></span><br><span class="line"><span class="comment">predicate: http://www.w3.org/2001/vcard-rdf/3.0#FN</span></span><br><span class="line"><span class="comment"> &quot;John Smith&quot; .</span></span><br><span class="line"><span class="comment">&lt;rdf:RDF</span></span><br><span class="line"><span class="comment">    xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span></span><br><span class="line"><span class="comment">    xmlns:vcard=&quot;http://www.w3.org/2001/vcard-rdf/3.0#&quot;&gt;</span></span><br><span class="line"><span class="comment">  &lt;rdf:Description rdf:about=&quot;http://somewhere/JohnSmith&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;vcard:FN&gt;John Smith&lt;/vcard:FN&gt;</span></span><br><span class="line"><span class="comment">  &lt;/rdf:Description&gt;</span></span><br><span class="line"><span class="comment">&lt;/rdf:RDF&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>其他的写入方式如下：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// now write the model in a pretty form，以传统的XML方式写入输出流</span></span><br><span class="line">RDFDataMgr.write(System.out, model, Lang.RDFXML);</span><br><span class="line"></span><br><span class="line"><span class="comment">// now write the model in N-TRIPLES form，以N-TRIPLES三元组格式写入输出流</span></span><br><span class="line">RDFDataMgr.write(System.out, model, Lang.NTRIPLES);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Lang.NTRIPLES三元组输出形式如下：</span></span><br><span class="line"><span class="comment">&lt;http://somewhere/JohnSmith&gt; &lt;http://www.w3.org/2001/vcard-rdf/3.0#FN&gt; &quot;John Smith&quot; .</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="1-4-读取RDF文件"><a href="#1-4-读取RDF文件" class="headerlink" title="1.4 读取RDF文件"></a>1.4 读取RDF文件</h2><ul>
<li>创建文件输入流进行读取，使用model.read(in, null)让模型解析文件输入流</li>
<li>model.read(in, null)的第二个参数用于解析相对 URI</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// create an empty model</span></span><br><span class="line"> Model model = ModelFactory.createDefaultModel();</span><br><span class="line"></span><br><span class="line"> <span class="comment">// use the RDFDataMgr to find the input file</span></span><br><span class="line"> InputStream in = RDFDataMgr.open( inputFileName );</span><br><span class="line"><span class="keyword">if</span> (in == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                                 <span class="string">&quot;File: &quot;</span> + inputFileName + <span class="string">&quot; not found&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// read the RDF/XML file</span></span><br><span class="line">model.read(in, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// write it to standard out</span></span><br><span class="line">model.write(System.out);</span><br></pre></td></tr></table></figure>
<h2 id="1-5-控制前缀"><a href="#1-5-控制前缀" class="headerlink" title="1.5 控制前缀"></a>1.5 控制前缀</h2><ul>
<li>每个RDF都会有自己的命名空间，这个命名空间用前缀来区分开来</li>
<li>我们可以显示的定义好前缀形式，这样就可以方便后面对<strong>数据对象和属性</strong>的前缀定义</li>
<li>使用到的方法如下：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>model.createResource(String)</td>
<td>创建主体或客体对象</td>
</tr>
<tr>
<td>model.createProperty(String)</td>
<td>创建谓词属性</td>
</tr>
<tr>
<td>model.setNsPrefix(String prefix, String namespace)</td>
<td>为命名空间绑定前缀</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> Model m = ModelFactory.createDefaultModel();</span><br><span class="line"> String nsA = <span class="string">&quot;http://somewhere/else#&quot;</span>;</span><br><span class="line"> String nsB = <span class="string">&quot;http://nowhere/else#&quot;</span>;</span><br><span class="line"></span><br><span class="line"> Resource root = m.createResource( nsA + <span class="string">&quot;root&quot;</span> );</span><br><span class="line"> Property P = m.createProperty( nsA + <span class="string">&quot;P&quot;</span> );</span><br><span class="line"> Property Q = m.createProperty( nsB + <span class="string">&quot;Q&quot;</span> );</span><br><span class="line"> Resource x = m.createResource( nsA + <span class="string">&quot;x&quot;</span> );</span><br><span class="line"> Resource y = m.createResource( nsA + <span class="string">&quot;y&quot;</span> );</span><br><span class="line"> Resource z = m.createResource( nsA + <span class="string">&quot;z&quot;</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在model中添加三元组</span></span><br><span class="line"> m.add( root, P, x ).add( root, P, y ).add( y, Q, z );</span><br><span class="line"> System.out.println( <span class="string">&quot;# -- no special prefixes defined&quot;</span> );</span><br><span class="line"> m.write( System.out );</span><br><span class="line"> System.out.println( <span class="string">&quot;# -- nsA defined&quot;</span> );</span><br><span class="line"><span class="comment">// 为&quot;http://somewhere/else#&quot;定义前缀为nsA</span></span><br><span class="line"> m.setNsPrefix( <span class="string">&quot;nsA&quot;</span>, nsA );</span><br><span class="line"> m.write( System.out );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为&quot;http://nowhere/else#&quot;定义前缀为cat</span></span><br><span class="line"> System.out.println( <span class="string">&quot;# -- nsA and cat defined&quot;</span> );</span><br><span class="line"> m.setNsPrefix( <span class="string">&quot;cat&quot;</span>, nsB );</span><br><span class="line"> m.write( System.out );</span><br></pre></td></tr></table></figure>
<ul>
<li>上述运行结果如下：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--只要是xml文件就一定有命名空间和前缀，命名空间可以描述标签内的具体信息，而前缀可以简化属性标签的命名--&gt;</span></span><br><span class="line"># -- no special prefixes defined</span><br><span class="line"><span class="tag">&lt;<span class="name">rdf:RDF</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:rdf</span>=<span class="string">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:j.0</span>=<span class="string">&quot;http://somewhere/else#&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:j.1</span>=<span class="string">&quot;http://nowhere/else#&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--j.0是命名空间&quot;http://somewhere/else#&quot;的简称，可以在标签中使用--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--j.1是命名空间&quot;http://nowhere/else#&quot;的简称，可以在标签中使用--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rdf:Description</span> <span class="attr">rdf:about</span>=<span class="string">&quot;http://somewhere/else#root&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--这里j.0:P的前缀j.0使用的就是默认的前缀--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">j.0:P</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rdf:Description</span> <span class="attr">rdf:about</span>=<span class="string">&quot;http://somewhere/else#y&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">j.1:Q</span> <span class="attr">rdf:resource</span>=<span class="string">&quot;http://somewhere/else#z&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">rdf:Description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">j.0:P</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">j.0:P</span> <span class="attr">rdf:resource</span>=<span class="string">&quot;http://somewhere/else#x&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">rdf:Description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rdf:RDF</span>&gt;</span></span><br><span class="line"></span><br><span class="line"># -- nsA defined</span><br><span class="line"><span class="tag">&lt;<span class="name">rdf:RDF</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:rdf</span>=<span class="string">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:nsA</span>=<span class="string">&quot;http://somewhere/else#&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:j.0</span>=<span class="string">&quot;http://nowhere/else#&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">rdf:Description</span> <span class="attr">rdf:about</span>=<span class="string">&quot;http://somewhere/else#root&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--这里nsA:P的前缀nsA，是我们自己定义的前缀--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nsA:P</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rdf:Description</span> <span class="attr">rdf:about</span>=<span class="string">&quot;http://somewhere/else#y&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">j.0:Q</span> <span class="attr">rdf:resource</span>=<span class="string">&quot;http://somewhere/else#z&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">rdf:Description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nsA:P</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nsA:P</span> <span class="attr">rdf:resource</span>=<span class="string">&quot;http://somewhere/else#x&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">rdf:Description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rdf:RDF</span>&gt;</span></span><br><span class="line"># -- nsA and cat defined</span><br><span class="line"><span class="tag">&lt;<span class="name">rdf:RDF</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:rdf</span>=<span class="string">&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:nsA</span>=<span class="string">&quot;http://somewhere/else#&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:cat</span>=<span class="string">&quot;http://nowhere/else#&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">rdf:Description</span> <span class="attr">rdf:about</span>=<span class="string">&quot;http://somewhere/else#root&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--这里nsA:P的前缀nsA，是我们自己定义的前缀--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nsA:P</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rdf:Description</span> <span class="attr">rdf:about</span>=<span class="string">&quot;http://somewhere/else#y&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--这里cat:Q的前缀这里cat，是我们自己定义的前缀--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cat:Q</span> <span class="attr">rdf:resource</span>=<span class="string">&quot;http://somewhere/else#z&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">rdf:Description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nsA:P</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nsA:P</span> <span class="attr">rdf:resource</span>=<span class="string">&quot;http://somewhere/else#x&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">rdf:Description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">rdf:RDF</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="二、操作RDF数据"><a href="#二、操作RDF数据" class="headerlink" title="二、操作RDF数据"></a>二、操作RDF数据</h1><h2 id="2-1-Resource方法"><a href="#2-1-Resource方法" class="headerlink" title="2.1 Resource方法"></a>2.1 Resource方法</h2><ul>
<li>以下都是Resource对象下使用的获取和添加数据的方法</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Model.getResource(String uri):Resource</td>
<td>根据uri获取资源对象</td>
</tr>
<tr>
<td>Resource.getProperty(Property property):Statement</td>
<td>根据resource对象的property获取对应的三元组对象</td>
</tr>
<tr>
<td>Resource.getProperty(Property property).getString()</td>
<td>获取属性property对应的属性值</td>
</tr>
<tr>
<td>Resource.addProperty(Property property，String s)</td>
<td>为resource添加property属性以及对应的属性值s</td>
</tr>
<tr>
<td>Resource.listProperties(Property property):StmtIterator</td>
<td>如果同一的属性对应多个属性值，那么getProperty方法就不起作用了，必须使用此方法，返回包含所有对应Statement三元组的迭代器</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>示例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从模型中检索 John Smith vcard 资源</span></span><br><span class="line">Resource vcard = model.getResource(johnSmithURI);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 N 属性的值</span></span><br><span class="line">Resource name = (Resource) vcard.getProperty(VCARD.N) </span><br><span class="line">                                .getObject();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 N 属性的值</span></span><br><span class="line">Resource name = vcard.getProperty(VCARD.N) </span><br><span class="line">                     .getResource();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检索给定的名称属性</span></span><br><span class="line">String fullName = vcard.getProperty(VCARD.FN) </span><br><span class="line">                        .getString();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同一属性对应多个属性值</span></span><br><span class="line"><span class="comment">// 向 vcard 添加两个昵称属性</span></span><br><span class="line">vcard.addProperty(VCARD.NICKNAME, <span class="string">&quot;Smithy&quot;</span>) </span><br><span class="line">     .addProperty(VCARD.NICKNAME, <span class="string">&quot;Adman&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置输出</span></span><br><span class="line">System.out.println(<span class="string">&quot;\&quot;&quot;</span> </span><br><span class="line">                      + fullName + <span class="string">&quot;\&quot; 的昵称是：&quot;</span>); </span><br><span class="line"><span class="comment">// 列出昵称</span></span><br><span class="line">StmtIterator iter = vcard.listProperties(VCARD.NICKNAME); </span><br><span class="line"><span class="keyword">while</span> (iter.hasNext()) &#123; </span><br><span class="line">    System.out.println(<span class="string">&quot; &quot;</span> + iter.nextStatement() </span><br><span class="line">                                    .getObject() </span><br><span class="line">                                    .toString()); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-2-Model查询方法"><a href="#2-2-Model查询方法" class="headerlink" title="2.2 Model查询方法"></a>2.2 Model查询方法</h2><ul>
<li>以下是Model使用到的查询数据的方法</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Model.listStatements():StmtIterator</td>
<td>返回模型中所有三元组Statement的迭代器对象，不建议在大模型中使用它</td>
</tr>
<tr>
<td>Model.listSubjectsWithProperty(Property p, RDFNode o):ResIterator</td>
<td>返回一个包含所有属性为p且属性值为o的资源主语（Subjects）resource迭代器，该方法有多种重载方法，参数表可以只使用包含Property</td>
</tr>
<tr>
<td>Model.listStatements(Selector s):StmtIterator</td>
<td>查询语法糖，可以使用Selector选择器对象在模型的所有的三元组中进行自定义查询</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>创建选择器</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 选择器可以选择给定的主语、谓词、宾语</span></span><br><span class="line">Selector selector = <span class="keyword">new</span> SimpleSelector(subject, predicate, object);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 三个参数为null，则匹配所有三元组</span></span><br><span class="line">Selector selector = <span class="keyword">new</span> SimpleSelector(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给定其中一个参数值，表示匹配给定的值，如下所示表示匹配谓词为VCARD.FN的所有三元组的选择器</span></span><br><span class="line">Selector selector = <span class="keyword">new</span> SimpleSelector(<span class="keyword">null</span>, VCARD.FN, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面两个选择器匹配功能相同</span></span><br><span class="line">model.listStatements( S, P, O );</span><br><span class="line">model.listStatements( <span class="keyword">new</span> SimpleSelector( S, P, O ) );</span><br></pre></td></tr></table></figure>
<ul>
<li>重载selects方法，selects方法可以更自由的定义我们的匹配方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">StmtIterator iter = model.listStatements(</span><br><span class="line">    <span class="keyword">new</span> SimpleSelector(<span class="keyword">null</span>, VCARD.FN, (RDFNode) <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">selects</span><span class="params">(Statement s)</span></span></span><br><span class="line"><span class="function">            </span>&#123;<span class="keyword">return</span> s.getString().endsWith(<span class="string">&quot;Smith&quot;</span>);&#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下两种语句的作用相同，但第一种的语句方法在面对大模型时性能不高，因为需要对模型中的所有三元组都要测试匹配语句</span></span><br><span class="line">StmtIterator iter = model.listStatements(</span><br><span class="line">  <span class="keyword">new</span></span><br><span class="line">      SimpleSelector(<span class="keyword">null</span>, <span class="keyword">null</span>, (RDFNode) <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">selects</span><span class="params">(Statement s)</span> </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> (subject == <span class="keyword">null</span>   || s.getSubject().equals(subject))</span><br><span class="line">                  &amp;&amp; (predicate == <span class="keyword">null</span> || s.getPredicate().equals(predicate))</span><br><span class="line">                  &amp;&amp; (object == <span class="keyword">null</span>    || s.getObject().equals(object)) ;</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     &#125;);</span><br><span class="line"></span><br><span class="line">StmtIterator iter =</span><br><span class="line">  model.listStatements(<span class="keyword">new</span> SimpleSelector(subject, predicate, object));</span><br></pre></td></tr></table></figure>
<h1 id="三、模型操作"><a href="#三、模型操作" class="headerlink" title="三、模型操作"></a>三、模型操作</h1><ul>
<li>模型的操作包含了多个模型之间的交集、并集、差集</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>model1.union(model2);</td>
<td>将model1和model2模型进行合并，重复的三元组会被删除</td>
</tr>
<tr>
<td>model1.intersection(model2)</td>
<td>交集</td>
</tr>
<tr>
<td>model1.difference(model2)</td>
<td>差集</td>
</tr>
</tbody>
</table>
</div>
<h1 id="四、资源容器"><a href="#四、资源容器" class="headerlink" title="四、资源容器"></a>四、资源容器</h1><ul>
<li><p>Jena有三种资源容器</p>
<ul>
<li>BAG：无序集合</li>
<li>ALT：同上</li>
<li>SEQ：有序集合</li>
</ul>
</li>
<li><p>示例：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// create a bag</span></span><br><span class="line">Bag smiths = model.createBag();</span><br><span class="line"></span><br><span class="line"><span class="comment">// select all the resources with a VCARD.FN property</span></span><br><span class="line"><span class="comment">// whose value ends with &quot;Smith&quot;</span></span><br><span class="line">StmtIterator iter = model.listStatements(</span><br><span class="line">    <span class="keyword">new</span> SimpleSelector(<span class="keyword">null</span>, VCARD.FN, (RDFNode) <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">selects</span><span class="params">(Statement s)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s.getString().endsWith(<span class="string">&quot;Smith&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="comment">// add the Smith&#x27;s to the bag</span></span><br><span class="line"><span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">    smiths.add(iter.nextStatement().getSubject());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">结果：</span></span><br><span class="line"><span class="comment">&lt;rdf:RDF</span></span><br><span class="line"><span class="comment">  xmlns:rdf=&#x27;http://www.w3.org/1999/02/22-rdf-syntax-ns#&#x27;</span></span><br><span class="line"><span class="comment">  xmlns:vcard=&#x27;http://www.w3.org/2001/vcard-rdf/3.0#&#x27;</span></span><br><span class="line"><span class="comment"> &gt;</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">  &lt;rdf:Description rdf:nodeID=&quot;A3&quot;&gt;</span></span><br><span class="line"><span class="comment">    &lt;rdf:type rdf:resource=&#x27;http://www.w3.org/1999/02/22-rdf-syntax-ns#Bag&#x27;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;rdf:_1 rdf:resource=&#x27;http://somewhere/JohnSmith/&#x27;/&gt;</span></span><br><span class="line"><span class="comment">    &lt;rdf:_2 rdf:resource=&#x27;http://somewhere/RebeccaSmith/&#x27;/&gt;</span></span><br><span class="line"><span class="comment">  &lt;/rdf:Description&gt;</span></span><br><span class="line"><span class="comment">&lt;/rdf:RDF&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>迭代容器内容</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 打印BAG的成员</span></span><br><span class="line">NodeIterator iter2 = smiths.iterator(); </span><br><span class="line"><span class="keyword">if</span> (iter2.hasNext()) &#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;包里有：&quot;</span>); </span><br><span class="line">    <span class="keyword">while</span> (iter2.hasNext()) &#123; </span><br><span class="line">        System.out.println(<span class="string">&quot; &quot;</span> + </span><br><span class="line">            ((Resource) iter2.next()) </span><br><span class="line">                            .getProperty(VCARD.FN) </span><br><span class="line">                            .getString()); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    System.out.println(<span class="string">&quot;包里是空的&quot;</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>知识图谱</tag>
        <tag>Jena</tag>
        <tag>OWL</tag>
      </tags>
  </entry>
  <entry>
    <title>LOL天赋介绍</title>
    <url>/2022/04/29/LOL%E5%A4%A9%E8%B5%8B%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>Unity3d脚本大全</title>
    <url>/2022/04/29/Unity3d%E8%84%9A%E6%9C%AC%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、常用对象和方法"><a href="#一、常用对象和方法" class="headerlink" title="一、常用对象和方法"></a>一、常用对象和方法</h1><h1 id="判断键盘按键"><a href="#判断键盘按键" class="headerlink" title="判断键盘按键"></a>判断键盘按键</h1><ul>
<li>为GameObject绑定一个脚本组件</li>
<li>脚本代码如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class cubetest : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    // Start is called before the first frame update</span><br><span class="line">    void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(&quot;测试键盘控制&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // Update is called once per frame</span><br><span class="line">    void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (Input.GetKeyDown(KeyCode.D))</span><br><span class="line">        &#123;</span><br><span class="line">            this.transform.Translate(Vector3.right * 1);</span><br><span class="line">        &#125;</span><br><span class="line">        else if (Input.GetKeyDown(KeyCode.A))</span><br><span class="line">        &#123;</span><br><span class="line">            this.transform.Translate(Vector3.left * 1);</span><br><span class="line">        &#125;</span><br><span class="line">        else if (Input.GetKeyDown(KeyCode.S))</span><br><span class="line">        &#123;</span><br><span class="line">            this.transform.Translate(Vector3.down * 1);</span><br><span class="line">        &#125;</span><br><span class="line">        else if (Input.GetKeyDown(KeyCode.W))</span><br><span class="line">        &#123;</span><br><span class="line">            this.transform.Translate(Vector3.up * 1);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>游戏开发</category>
        <category>unity</category>
      </categories>
      <tags>
        <tag>游戏开发</tag>
        <tag>unity3d</tag>
        <tag>C#脚本</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记6-OPCUA技术研究</title>
    <url>/2022/05/03/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B06-OPCUA%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/</url>
    <content><![CDATA[<h1 id="一、milo环境搭建"><a href="#一、milo环境搭建" class="headerlink" title="一、milo环境搭建"></a>一、milo环境搭建</h1><h2 id="1-1-KEPServer"><a href="#1-1-KEPServer" class="headerlink" title="1.1 KEPServer"></a>1.1 KEPServer</h2><h3 id="1-1-1-简介"><a href="#1-1-1-简介" class="headerlink" title="1.1.1 简介"></a>1.1.1 简介</h3><h3 id="1-1-2-使用"><a href="#1-1-2-使用" class="headerlink" title="1.1.2 使用"></a>1.1.2 使用</h3><ul>
<li>启动KEPServer admin</li>
<li>修改服务器端点（服务器的连接地址）</li>
</ul>
<img src="/2022/05/03/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B06-OPCUA%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/kep.png" class="" title="kep">
<ul>
<li>启动匿名登录<ul>
<li>必须启动匿名登录，否则milo没有设置用户名密码的情况下就无法连接服务端而报错</li>
<li>右键项目-&gt;属性-&gt;opc ua-&gt;启动服务器接口-&gt;允许匿名登录</li>
</ul>
</li>
</ul>
<img src="/2022/05/03/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B06-OPCUA%E6%8A%80%E6%9C%AF%E7%A0%94%E7%A9%B6/opc.png" class="" title="opc">
<h2 id="1-2-milo客户端编程"><a href="#1-2-milo客户端编程" class="headerlink" title="1.2 milo客户端编程"></a>1.2 milo客户端编程</h2><h3 id="1-2-1-依赖包"><a href="#1-2-1-依赖包" class="headerlink" title="1.2.1 依赖包"></a>1.2.1 依赖包</h3><ul>
<li>重要的依赖包<ul>
<li>milo的client和server</li>
<li>guava：请用最新版本，最新版本中有milo使用到的方法，而低版本没有（重要！）</li>
</ul>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Milo客户端的依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.milo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdk-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.6.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Milo服务端的依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.milo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sdk-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.6.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- Milo中有个方法在这里，milo默认会引入但是版本太低，有个方法会不存在，就很智障，没有这个方法干嘛不引入新的版本，非要自己看源码，心累 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>31.1-jre<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- java单元测试依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- java日志包，不导入会报日志异常，虽然不会影响程序运行，但还是加上比较好 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-nop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- springmvc依赖，为以后MVC开发做准备 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-2-简单案例"><a href="#1-2-2-简单案例" class="headerlink" title="1.2.2 简单案例"></a>1.2.2 简单案例</h3><ul>
<li>读取通道设备的标签数据<ul>
<li>创建客户端对象</li>
<li>使用客户端对象读取服务端数据</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// OpcUAClientRunner类用来创建客户端对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OpcUAClientRunner</span> </span>&#123;</span><br><span class="line">    <span class="comment">//opc ua服务端地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String endPointUrl = <span class="string">&quot;opc.tcp://127.0.0.1:49320&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建OPC UA客户端</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> OpcUaClient <span class="title">createClient</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Path securityTempDir = Paths.get(System.getProperty(<span class="string">&quot;java.io.tmpdir&quot;</span>), <span class="string">&quot;security&quot;</span>);</span><br><span class="line">        Files.createDirectories(securityTempDir);</span><br><span class="line">        <span class="keyword">if</span> (!Files.exists(securityTempDir)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">&quot;unable to create security dir: &quot;</span> + securityTempDir);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 这里的SecurityPolicy对应我们设置的opc ua配置的安全策略</span></span><br><span class="line">        <span class="keyword">return</span> OpcUaClient.create(endPointUrl,</span><br><span class="line">                endpoints -&gt;</span><br><span class="line">                    endpoints.stream()</span><br><span class="line">                        .filter(e -&gt; e.getSecurityPolicyUri().equals(SecurityPolicy.None.getUri()))</span><br><span class="line">                        .findFirst(),</span><br><span class="line">                configBuilder -&gt;</span><br><span class="line">                    configBuilder</span><br><span class="line">                        .setApplicationName(LocalizedText.english(<span class="string">&quot;eclipse milo opc-ua client&quot;</span>))</span><br><span class="line">                        .setApplicationUri(<span class="string">&quot;urn:eclipse:milo:examples:client&quot;</span>)</span><br><span class="line">                        <span class="comment">//访问方式</span></span><br><span class="line">                        .setIdentityProvider(<span class="keyword">new</span> AnonymousProvider())</span><br><span class="line">                        .setRequestTimeout(UInteger.valueOf(<span class="number">5000</span>))</span><br><span class="line">                        .build()</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>读取数据测试</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CompletableFuture&lt;OpcUaClient&gt; future = <span class="keyword">new</span> CompletableFuture&lt;&gt;();</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ClientTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        OpcUaClient client = OpcUAClientRunner.createClient();</span><br><span class="line">        client.connect().get();</span><br><span class="line">		</span><br><span class="line">        <span class="comment">/* </span></span><br><span class="line"><span class="comment">        	第一个参数设置为2才能读到数据，目前还不知道为什么</span></span><br><span class="line"><span class="comment">        	第二个参数为节点路径</span></span><br><span class="line"><span class="comment">        	设置完NodeId对象后，就可以根据节点对象从服务器上获取到对应的数据</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        NodeId nodeId_Tag1 = <span class="keyword">new</span> NodeId(<span class="number">2</span>, <span class="string">&quot;通道 1.设备 1.标记 1&quot;</span>);</span><br><span class="line">        NodeId nodeId_Tag2 = <span class="keyword">new</span> NodeId(<span class="number">2</span>, <span class="string">&quot;通道 1.设备 1.标记 2&quot;</span>);</span><br><span class="line">        List&lt;NodeId&gt; nodeIds = ImmutableList.of(nodeId_Tag1, nodeId_Tag2);</span><br><span class="line">        CompletableFuture&lt;List&lt;DataValue&gt;&gt; listCompletableFuture = client.readValues(<span class="number">0.0</span>, TimestampsToReturn.Both, nodeIds);</span><br><span class="line">        List&lt;DataValue&gt; dataValues = listCompletableFuture.get();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">        DataValue nodeValue_Tag1 = dataValues.get(<span class="number">0</span>);</span><br><span class="line">        DataValue nodeValue_Tag2 = dataValues.get(<span class="number">1</span>);</span><br><span class="line">        System.out.print(nodeValue_Tag1);</span><br><span class="line">        System.out.println(<span class="string">&quot;#########Tag1=&quot;</span> + nodeValue_Tag1.getValue().getValue());</span><br><span class="line">        System.out.println(<span class="string">&quot;#########Tag2=&quot;</span> + nodeValue_Tag2.getValue().getValue());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>OPC UA</tag>
        <tag>milo</tag>
        <tag>KEPServer</tag>
      </tags>
  </entry>
  <entry>
    <title>Java学习路线</title>
    <url>/2022/05/14/Java%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/</url>
    <content><![CDATA[<img src="/2022/05/14/Java%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/Java%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E5%9B%BE.jpg" class="" title="img">]]></content>
      <categories>
        <category>后端</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>成神之路</tag>
      </tags>
  </entry>
  <entry>
    <title>知识图谱学习笔记7-OpcUa客户端开发</title>
    <url>/2022/05/12/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B07-OpcUa%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>知识图谱</category>
        <category>学习笔记</category>
      </categories>
      <tags>
        <tag>Jena</tag>
        <tag>OpcUa Client</tag>
        <tag>Milo</tag>
      </tags>
  </entry>
  <entry>
    <title>JVM基础大全</title>
    <url>/2022/05/16/JVM%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><h2 id="1-1-JVM结构"><a href="#1-1-JVM结构" class="headerlink" title="1.1 JVM结构"></a>1.1 JVM结构</h2><ul>
<li>方法区/堆是多线程共享的</li>
<li>虚拟机栈/本地方法栈/程序计数器是每个线程独有一份的，即线程私有</li>
</ul>
<img src="/2022/05/16/JVM%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/jvm.png" class="" title="jvm">
<h2 id="1-2-虚拟机历史"><a href="#1-2-虚拟机历史" class="headerlink" title="1.2 虚拟机历史"></a>1.2 虚拟机历史</h2><h2 id="1-3-结构分析"><a href="#1-3-结构分析" class="headerlink" title="1.3 结构分析"></a>1.3 结构分析</h2><h3 id="1-3-1-类加载器"><a href="#1-3-1-类加载器" class="headerlink" title="1.3.1 类加载器"></a>1.3.1 类加载器</h3><p>类的生命周期</p>
<p>加载、验证、准备、解析、初始化、使用、卸载</p>
<img src="/2022/05/16/JVM%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/classload.png" class="" title="classload">
<h3 id="1-3-2-运行时数据区"><a href="#1-3-2-运行时数据区" class="headerlink" title="1.3.2 运行时数据区"></a>1.3.2 运行时数据区</h3><h4 id="（1）程序计数器"><a href="#（1）程序计数器" class="headerlink" title="（1）程序计数器"></a>（1）程序计数器</h4><p>程序计数器Program Counter Register是一小块内存空间，它表示的是执行<strong>字节码指令的行号</strong>，<strong>字节码解释器</strong>工作时就是通过改变程序计数器来选取<strong>下一条需要执行的字节码指令</strong></p>
<p>程序计数器有以下特点：</p>
<ul>
<li>线程私有</li>
<li>线程执行的是Java方法，则程序计数器记录的是字节码指令的地址</li>
<li>线程执行的是本地（Native）方法，那么程序计数器的值为空（Undefined）</li>
</ul>
<h4 id="（2）虚拟机栈"><a href="#（2）虚拟机栈" class="headerlink" title="（2）虚拟机栈"></a>（2）虚拟机栈</h4><p>一个程序的运行都要维护一个堆栈，这里的堆用于存放数据，而栈用于处理数据是如何执行的，JVM也包含这样的设计思想，这里所要介绍的虚拟机栈就是用来存放方法执行的线程内存模型。</p>
<p>它有以下几个特点：</p>
<ul>
<li>每个线程创建时，都会创建一个虚拟机栈</li>
<li>当线程中的方法被调用时，都会将其作为一个<strong>栈帧</strong>压入到虚拟机栈中</li>
<li>虚拟机栈是<strong>线程私有</strong>的</li>
</ul>
<img src="/2022/05/16/JVM%E5%9F%BA%E7%A1%80%E5%A4%A7%E5%85%A8/vmstack.png" class="" title="vmstack">
<p>虚拟机栈存在以下异常：</p>
<ul>
<li>StackOverflowError：线程请求的栈的深度大于虚拟机所允许的深度，则抛出此异常</li>
<li>OutOfMemoryError：虚拟机栈容量可以动态扩展，当栈扩展时无法申请到足够的内存是，则抛出此异常</li>
</ul>
<h4 id="（3）本地方法栈"><a href="#（3）本地方法栈" class="headerlink" title="（3）本地方法栈"></a>（3）本地方法栈</h4><p>本地方法栈是服务于本地（Native）方法的，虚拟机栈是服务于Java方法的，这两个本质上没什么区别，在HotSpot虚拟机中直接将两者合二为一了</p>
<h4 id="（4）Java堆"><a href="#（4）Java堆" class="headerlink" title="（4）Java堆"></a>（4）Java堆</h4><p>Java堆的作用是存放对象的实例，它有以下特点：</p>
<ul>
<li><strong>线程共享</strong></li>
<li>Java堆是被垃圾收集器管理的内存区域</li>
</ul>
<p>存在的异常：</p>
<ul>
<li>OutOfMemoryError：当Java堆无法再为实例分配足够的内存，且堆无法再扩展时，抛出此异常</li>
</ul>
<h4 id="（5）方法区"><a href="#（5）方法区" class="headerlink" title="（5）方法区"></a>（5）方法区</h4><p>方法区用于存储已被虚拟机加载的<strong>类型信息</strong>、<strong>常量</strong>、<strong>静态变量</strong>、即时编译器编译后的代码缓存等数据</p>
<p>方法区还包含一个运行时常量池（Runtime Constant Pool），Java编译为Class文件后，Class文件除了有类的版本、字段、方法、接口等描述信息外，还包含<strong>常量池表（Constant Pool Table）</strong>，用于存放编译期生成的各种字面量与符号引用，这部分内容将在<strong>类加载</strong>后存放到<strong>方法区的运行时常量池</strong>中</p>
<p>存在的异常：</p>
<ul>
<li>OutOfMemoryError：当方法区无法满足新的内存分配需求时，抛出此异常</li>
</ul>
<h3 id="1-3-4-执行引擎"><a href="#1-3-4-执行引擎" class="headerlink" title="1.3.4 执行引擎"></a>1.3.4 执行引擎</h3><p>执行引擎包含三个部分：解释器、JIT即时编译器、垃圾回收器</p>
<p>JVM执行引擎的主要任务就是将字节码指令解释为对应平台上的本地机器指令 </p>
]]></content>
      <categories>
        <category>后端</category>
        <category>Java</category>
      </categories>
      <tags>
        <tag>面试</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
</search>
